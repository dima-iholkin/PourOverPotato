import{s as He,o as qe,b as F,a as U,n as Y}from"../chunks/scheduler.Cw1-ZcKD.js";import{S as Le,i as je,s as R,k as I,w as oe,l as ze,d as v,f as D,m as T,g as E,n as k,A as Ve,o as h,p as Pe,q as g,r as B,u as Me,t as Ne,b as Fe,v as A,e as Z,c as x,a as Ue,z as H,y as he,h as W,B as Je}from"../chunks/index.DHsbL8_X.js";import{b as Ke,g as O}from"../chunks/entry.Dmx3Y1eU.js";import{g as Qe,b as Xe}from"../chunks/manageCoffeeBeans.CzXUSSc2.js";import{P as Ye,b as Ze,s as xe,e as et,h as tt,u as nt}from"../chunks/PageHeadline.DK2gBKFE.js";import{n as ae}from"../chunks/naming.DmthAWfq.js";import{r as y}from"../chunks/routes.Dv_Wm252.js";import{C as at,p as _e,N as Be,F as ot,T as rt}from"../chunks/NumberInput.ha46Z0t3.js";import{g as re,h as $e,i as it,a as st,p as Ce}from"../chunks/dateHelpers.DtGJLfnR.js";import{L as lt}from"../chunks/Loading.BjzKhRf5.js";import{F as ft,D as ut,a as pt}from"../chunks/FlexRow.Ci6Z7vlA.js";import{T as ge}from"../chunks/Textarea.DSVAmZwN.js";import{D as ct}from"../chunks/DeleteConfirmationModal.DA7syV6L.js";function mt({params:a}){const e=Number.parseFloat(a.id);if(Number.isInteger(e)===!1)throw new Error("Non-integer route params are not allowed for this page. The matcher should have filtered outnon-integer values. Something is wrong with the code.");return{recipeId:e}}const Ot=Object.freeze(Object.defineProperty({__proto__:null,load:mt},Symbol.toStringTag,{value:"Module"}));function dt(a){let e;return{c(){e=Ne("Edit recipe")},l(t){e=Fe(t,"Edit recipe")},m(t,o){E(t,e,o)},d(t){t&&v(e)}}}function Se(a){let e,t,o,f;function i(s){a[18](s)}let n={$$slots:{modal:[ht],button:[_t]},$$scope:{ctx:a}};return a[1]!==void 0&&(n.setDropdownState=a[1]),t=new ut({props:n}),F.push(()=>A(t,"setDropdownState",i)),{c(){e=Z("div"),I(t.$$.fragment),this.h()},l(s){e=x(s,"DIV",{class:!0});var c=Ue(e);T(t.$$.fragment,c),c.forEach(v),this.h()},h(){H(e,"class","menu-container svelte-vb4cmr")},m(s,c){E(s,e,c),k(t,e,null),f=!0},p(s,c){const _={};c&536870915&&(_.$$scope={dirty:c,ctx:s}),!o&&c&2&&(o=!0,_.setDropdownState=s[1],U(()=>o=!1)),t.$set(_)},i(s){f||(g(t.$$.fragment,s),f=!0)},o(s){h(t.$$.fragment,s),f=!1},d(s){s&&v(e),B(t)}}}function _t(a){let e,t;return e=new pt({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",a[17]),{c(){I(e.$$.fragment)},l(o){T(e.$$.fragment,o)},m(o,f){k(e,o,f),t=!0},p:Y,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){B(e,o)}}}function gt(a){let e;return{c(){e=Ne("Please confirm you want to delete this recipe")},l(t){e=Fe(t,"Please confirm you want to delete this recipe")},m(t,o){E(t,e,o)},d(t){t&&v(e)}}}function ht(a){let e,t,o;function f(n){a[16](n)}let i={slot:"modal",onDeleteClick:a[13],$$slots:{default:[gt]},$$scope:{ctx:a}};return a[0]!==void 0&&(i.setModalState=a[0]),e=new ct({props:i}),F.push(()=>A(e,"setModalState",f)),{c(){I(e.$$.fragment)},l(n){T(e.$$.fragment,n)},m(n,s){k(e,n,s),o=!0},p(n,s){const c={};s&536870912&&(c.$$scope={dirty:s,ctx:n}),!t&&s&1&&(t=!0,c.setModalState=n[0],U(()=>t=!1)),e.$set(c)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){h(e.$$.fragment,n),o=!1},d(n){B(e,n)}}}function $t(a){let e,t,o,f;e=new Ye({props:{$$slots:{default:[dt]},$$scope:{ctx:a}}});let i=a[2]instanceof re&&Se(a);return{c(){I(e.$$.fragment),t=R(),i&&i.c(),o=oe()},l(n){T(e.$$.fragment,n),t=D(n),i&&i.l(n),o=oe()},m(n,s){k(e,n,s),E(n,t,s),i&&i.m(n,s),E(n,o,s),f=!0},p(n,s){const c={};s&536870912&&(c.$$scope={dirty:s,ctx:n}),e.$set(c),n[2]instanceof re?i?(i.p(n,s),s&4&&g(i,1)):(i=Se(n),i.c(),g(i,1),i.m(o.parentNode,o)):i&&(Me(),h(i,1,1,()=>{i=null}),Pe())},i(n){f||(g(e.$$.fragment,n),g(i),f=!0)},o(n){h(e.$$.fragment,n),h(i),f=!1},d(n){n&&(v(t),v(o)),B(e,n),i&&i.d(n)}}}function bt(a){let e,t="404",o,f,i="Not Found";return{c(){e=Z("p"),e.textContent=t,o=R(),f=Z("p"),f.textContent=i},l(n){e=x(n,"P",{"data-svelte-h":!0}),he(e)!=="svelte-swq3p4"&&(e.textContent=t),o=D(n),f=x(n,"P",{"data-svelte-h":!0}),he(f)!=="svelte-14ywr5"&&(f.textContent=i)},m(n,s){E(n,e,s),E(n,o,s),E(n,f,s)},p:Y,i:Y,o:Y,d(n){n&&(v(e),v(o),v(f))}}}function vt(a){let e,t,o,f,i,n,s,c,_,$,d,b,u,m,C,w,V,q,L,S,j,z,P,J,K,M,ee="Save changes",G,Q,te;function ie(r){a[19](r)}let l={allCoffeeBeans:a[3],initialCoffeeBeansId:a[2].coffeeBeansId,showAddButton:!1};a[4]!==void 0&&(l.selectedCoffeeBeansId=a[4]),t=new at({props:l}),F.push(()=>A(t,"selectedCoffeeBeansId",ie));function N(r){a[20](r)}let X={id:Re,initialValue:a[2].recipeTarget,label:ae.recipe.recipeTarget+":",name:Re,placeholder:_e.recipeTarget};a[5]!==void 0&&(X.value=a[5]),i=new ge({props:X}),F.push(()=>A(i,"value",N));function se(r){a[21](r)}let be={id:De,initialValue:a[2].recipeResult,label:ae.recipe.recipeResult+":",name:De,placeholder:_e.recipeResult};a[6]!==void 0&&(be.value=a[6]),c=new ge({props:be}),F.push(()=>A(c,"value",se));function Ae(r){a[22](r)}let ve={initialValue:a[2].outWeight,labelText:ae.recipe.outWeight+" (g):",min:0,nameAttr:Tt,step:5};a[8]!==void 0&&(ve.value=a[8]),d=new Be({props:ve}),F.push(()=>A(d,"value",Ae));function We(r){a[23](r)}let we={initialValue:a[2].rating,labelText:"Rating:",max:5,min:0,nameAttr:kt,step:.5};a[9]!==void 0&&(we.value=a[9]),m=new Be({props:we}),F.push(()=>A(m,"value",We));function Oe(r){a[24](r)}let Ie={initialValue:a[2].favorite};a[10]!==void 0&&(Ie.value=a[10]),V=new ot({props:Ie}),F.push(()=>A(V,"value",Oe));function ye(r){a[25](r)}let Te={id:Ee,initialValue:a[2].recipeThoughts,label:ae.recipe.recipeThoughts+":",name:Ee,placeholder:_e.recipeThoughts};a[7]!==void 0&&(Te.value=a[7]),S=new ge({props:Te}),F.push(()=>A(S,"value",ye));function Ge(r){a[26](r)}let ke={initialValue:$e(a[2].timestamp)};return a[11]!==void 0&&(ke.value=a[11]),P=new rt({props:ke}),F.push(()=>A(P,"value",Ge)),{c(){e=Z("form"),I(t.$$.fragment),f=R(),I(i.$$.fragment),s=R(),I(c.$$.fragment),$=R(),I(d.$$.fragment),u=R(),I(m.$$.fragment),w=R(),I(V.$$.fragment),L=R(),I(S.$$.fragment),z=R(),I(P.$$.fragment),K=R(),M=Z("button"),M.textContent=ee,this.h()},l(r){e=x(r,"FORM",{id:!0,class:!0});var p=Ue(e);T(t.$$.fragment,p),f=D(p),T(i.$$.fragment,p),s=D(p),T(c.$$.fragment,p),$=D(p),T(d.$$.fragment,p),u=D(p),T(m.$$.fragment,p),w=D(p),T(V.$$.fragment,p),L=D(p),T(S.$$.fragment,p),z=D(p),T(P.$$.fragment,p),K=D(p),M=x(p,"BUTTON",{class:!0,form:!0,type:!0,"data-svelte-h":!0}),he(M)!=="svelte-1dkauk3"&&(M.textContent=ee),p.forEach(v),this.h()},h(){H(M,"class","my-button svelte-vb4cmr"),H(M,"form","edit-recipe"),H(M,"type","submit"),H(e,"id","edit-recipe"),H(e,"class","svelte-vb4cmr")},m(r,p){E(r,e,p),k(t,e,null),W(e,f),k(i,e,null),W(e,s),k(c,e,null),W(e,$),k(d,e,null),W(e,u),k(m,e,null),W(e,w),k(V,e,null),W(e,L),k(S,e,null),W(e,z),k(P,e,null),W(e,K),W(e,M),G=!0,Q||(te=Ve(e,"submit",Je(a[14])),Q=!0)},p(r,p){const ne={};p&8&&(ne.allCoffeeBeans=r[3]),p&4&&(ne.initialCoffeeBeansId=r[2].coffeeBeansId),!o&&p&16&&(o=!0,ne.selectedCoffeeBeansId=r[4],U(()=>o=!1)),t.$set(ne);const le={};p&4&&(le.initialValue=r[2].recipeTarget),!n&&p&32&&(n=!0,le.value=r[5],U(()=>n=!1)),i.$set(le);const fe={};p&4&&(fe.initialValue=r[2].recipeResult),!_&&p&64&&(_=!0,fe.value=r[6],U(()=>_=!1)),c.$set(fe);const ue={};p&4&&(ue.initialValue=r[2].outWeight),!b&&p&256&&(b=!0,ue.value=r[8],U(()=>b=!1)),d.$set(ue);const pe={};p&4&&(pe.initialValue=r[2].rating),!C&&p&512&&(C=!0,pe.value=r[9],U(()=>C=!1)),m.$set(pe);const ce={};p&4&&(ce.initialValue=r[2].favorite),!q&&p&1024&&(q=!0,ce.value=r[10],U(()=>q=!1)),V.$set(ce);const me={};p&4&&(me.initialValue=r[2].recipeThoughts),!j&&p&128&&(j=!0,me.value=r[7],U(()=>j=!1)),S.$set(me);const de={};p&4&&(de.initialValue=$e(r[2].timestamp)),!J&&p&2048&&(J=!0,de.value=r[11],U(()=>J=!1)),P.$set(de)},i(r){G||(g(t.$$.fragment,r),g(i.$$.fragment,r),g(c.$$.fragment,r),g(d.$$.fragment,r),g(m.$$.fragment,r),g(V.$$.fragment,r),g(S.$$.fragment,r),g(P.$$.fragment,r),G=!0)},o(r){h(t.$$.fragment,r),h(i.$$.fragment,r),h(c.$$.fragment,r),h(d.$$.fragment,r),h(m.$$.fragment,r),h(V.$$.fragment,r),h(S.$$.fragment,r),h(P.$$.fragment,r),G=!1},d(r){r&&v(e),B(t),B(i),B(c),B(d),B(m),B(V),B(S),B(P),Q=!1,te()}}}function wt(a){let e,t;return e=new lt({}),{c(){I(e.$$.fragment)},l(o){T(e.$$.fragment,o)},m(o,f){k(e,o,f),t=!0},p:Y,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){B(e,o)}}}function It(a){let e,t,o,f,i,n,s,c,_;t=new ft({props:{$$slots:{default:[$t]},$$scope:{ctx:a}}});const $=[wt,vt,bt],d=[];function b(u,m){return u[2]===null?0:u[2]instanceof re?1:2}return f=b(a),i=d[f]=$[f](a),{c(){e=R(),I(t.$$.fragment),o=R(),i.c(),n=oe(),this.h()},l(u){ze("svelte-cc1fw0",document.head).forEach(v),e=D(u),T(t.$$.fragment,u),o=D(u),i.l(u),n=oe(),this.h()},h(){document.title="Edit recipe - PourOverPotato app"},m(u,m){E(u,e,m),k(t,u,m),E(u,o,m),d[f].m(u,m),E(u,n,m),s=!0,c||(_=Ve(window,"beforeunload",a[12]),c=!0)},p(u,[m]){const C={};m&536870919&&(C.$$scope={dirty:m,ctx:u}),t.$set(C);let w=f;f=b(u),f===w?d[f].p(u,m):(Me(),h(d[w],1,1,()=>{d[w]=null}),Pe(),i=d[f],i?i.p(u,m):(i=d[f]=$[f](u),i.c()),g(i,1),i.m(n.parentNode,n))},i(u){s||(g(t.$$.fragment,u),g(i),s=!0)},o(u){h(t.$$.fragment,u),h(i),s=!1},d(u){u&&(v(e),v(o),v(n)),B(t,u),d[f].d(u),c=!1,_()}}}const Re="recipe-target",De="recipe-result",Ee="recipe-thoughts",Tt="out-weight",kt="rating";function Bt(a,e,t){let{data:o}=e,f,i,n=null,s,c=!1,_,$,d,b,u,m,C,w;Ke(l=>{l.willUnload===!1&&c===!1&&S()&&confirm("Do you want to navigate away and lose unsaved changes?")===!1&&l.cancel()}),qe(()=>{Ze(o.recipeId).then(l=>{t(2,n=l),l!==void 0&&Qe().then(N=>{t(3,s=N),t(4,_=l.coffeeBeansId),t(5,$=l.recipeTarget),t(6,d=l.recipeResult),t(7,b=l.recipeThoughts),t(8,u=l.outWeight),t(9,m=l.rating),t(10,C=l.favorite),t(11,w=$e(l.timestamp))})})});function V(l){if(c===!1&&S())return l.preventDefault(),l.returnValue="","Are you sure you want to navigate away?"}async function q(){if(n==null)return;const l=n;await xe(l.id);const N=await Xe(l.coffeeBeansId);it("Recipe deleted.",async()=>{await nt(l.id),O(y.home).then(()=>N?O(y.coffeeBeansItem(N.name)):O(y.home))},async()=>{await tt(l.id)}),c=!0,N?O(y.coffeeBeansItem(N.name)):O(y.home)}async function L(){t(5,$=$.trim()),t(6,d=d.trim()),t(7,b=b.trim());const l=Ce(w);if(_===void 0)throw new Error("Please select the coffee beans.");if(n==null)throw new Error("Recipe was undefined or null somehow.");const N=new re({id:n.id,coffeeBeansId:_,recipeTarget:$,recipeResult:d,recipeThoughts:b,outWeight:u,rating:m,favorite:C,timestamp:l});await et(N),st("Recipe modified."),c=!0;const X=s==null?void 0:s.find(se=>se.id===_);if(X===void 0){O(y.home);return}O(y.coffeeBeansItem(X.name))}function S(){return n.coffeeBeansId!==_||n.recipeTarget!==$||n.recipeResult!==d||n.recipeThoughts!==b||n.outWeight!==u||n.rating!==m||n.favorite!==C||n.timestamp.getTime()!==Ce(w).getTime()}function j(l){f=l,t(0,f)}const z=()=>{i("closed"),f("open")};function P(l){i=l,t(1,i)}function J(l){_=l,t(4,_)}function K(l){$=l,t(5,$)}function M(l){d=l,t(6,d)}function ee(l){u=l,t(8,u)}function G(l){m=l,t(9,m)}function Q(l){C=l,t(10,C)}function te(l){b=l,t(7,b)}function ie(l){w=l,t(11,w)}return a.$$set=l=>{"data"in l&&t(15,o=l.data)},[f,i,n,s,_,$,d,b,u,m,C,w,V,q,L,o,j,z,P,J,K,M,ee,G,Q,te,ie]}class yt extends Le{constructor(e){super(),je(this,e,Bt,It,He,{data:15})}}export{yt as component,Ot as universal};
