import{s as Be,e as Q,x as _e,y as he,r as Ie,t as Fe,o as Pe,n as C}from"../chunks/scheduler.AO9fmgJ9.js";import{S as Ee,i as Ne,D as be,s as E,e as N,k as j,t as ee,f as D,c as M,x as U,a as x,m as O,b as te,d as h,y as w,z as ge,g as k,n as V,h as y,E as $e,C as W,F as Re,j as me,q as B,o as I,r as H,v as Z,l as Se,p as de,u as pe,w as Te}from"../chunks/index.aOryA6iz.js";import{e as ke}from"../chunks/each.Ps9lscrY.js";import{F as qe,M as je}from"../chunks/Card.88gmIURc.js";import{a as Oe,R as Ve}from"../chunks/sortRecipes.zzLWI_QH.js";import{P as He}from"../chunks/PageHeadline.tjTqjmKn.js";import{C as ue,i as Ke,j as ze,k as Le,l as Ue}from"../chunks/indexedDB.b1TVZGZV.js";import{r as ce}from"../chunks/routes.7NYnkK08.js";import{M as Ae,L as ve,T as We}from"../chunks/Textarea.GKT8T1gW.js";import{M as xe}from"../chunks/MySidebar.JRmG_Qww.js";const Ge=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Xe({params:l}){return{coffeeBeansName:l.name}}const Nt=Object.freeze(Object.defineProperty({__proto__:null,load:Xe},Symbol.toStringTag,{value:"Module"})),{window:Ye}=Ge;function Je(l){let e;return{c(){e=ee("Edit coffee beans")},l(n){e=te(n,"Edit coffee beans")},m(n,t){k(n,e,t)},d(n){n&&h(e)}}}function Qe(l){let e;return{c(){e=ee("Coffee beans name:")},l(n){e=te(n,"Coffee beans name:")},m(n,t){k(n,e,t)},d(n){n&&h(e)}}}function Ze(l){let e;return{c(){e=ee("Description:")},l(n){e=te(n,"Description:")},m(n,t){k(n,e,t)},d(n){n&&h(e)}}}function et(l){let e,n,t="Edit",s,f,r,i,_,o,d,u,b,c,v,a,g,K,z,P,G,ne,R,S,le,F,se,ae,oe,T,fe="Save",m,X,Y;r=new xe({props:{asGap:!0}}),o=new Ae({props:{$$slots:{default:[Je]},$$scope:{ctx:l}}}),o.$on("click",l[21]),c=new ve({props:{_for:"name",valid:!l[0],$$slots:{default:[Qe]},$$scope:{ctx:l}}}),S=new ve({props:{_for:"description",$$slots:{default:[Ze]},$$scope:{ctx:l}}});function De(p){l[24](p)}function Me(p){l[25](p)}let ie={id:"description",name:"description",placeholder:tt};return l[5]!==void 0&&(ie._this=l[5]),l[8]!==void 0&&(ie.value=l[8]),F=new We({props:ie}),Q.push(()=>be(F,"_this",De)),Q.push(()=>be(F,"value",Me)),F.$on("keydown",l[14]),{c(){e=E(),n=N("button"),n.textContent=t,s=E(),f=N("div"),j(r.$$.fragment),i=E(),_=N("div"),j(o.$$.fragment),d=E(),u=N("form"),b=N("div"),j(c.$$.fragment),v=E(),a=N("input"),z=E(),P=N("p"),G=ee(l[9]),ne=E(),R=N("div"),j(S.$$.fragment),le=E(),j(F.$$.fragment),oe=E(),T=N("button"),T.textContent=fe,this.h()},l(p){e=D(p),n=M(p,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),U(n)!=="svelte-1apqlca"&&(n.textContent=t),s=D(p),f=M(p,"DIV",{class:!0});var $=x(f);O(r.$$.fragment,$),i=D($),_=M($,"DIV",{class:!0});var A=x(_);O(o.$$.fragment,A),d=D(A),u=M(A,"FORM",{class:!0});var q=x(u);b=M(q,"DIV",{class:!0});var L=x(b);O(c.$$.fragment,L),v=D(L),a=M(L,"INPUT",{class:!0,id:!0,name:!0,placeholder:!0,type:!0}),z=D(L),P=M(L,"P",{class:!0});var J=x(P);G=te(J,l[9]),J.forEach(h),L.forEach(h),ne=D(q),R=M(q,"DIV",{class:!0});var re=x(R);O(S.$$.fragment,re),le=D(re),O(F.$$.fragment,re),re.forEach(h),oe=D(q),T=M(q,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),U(T)!=="svelte-j4uhei"&&(T.textContent=fe),q.forEach(h),A.forEach(h),$.forEach(h),this.h()},h(){w(n,"class","edit-button svelte-12pk1fb"),w(n,"type","button"),w(a,"class",g=_e(l[0]?"input-name-validation-failed":"input-name")+" svelte-12pk1fb"),w(a,"id","name"),w(a,"name","name"),w(a,"placeholder",K=l[0]?"":"Example: Rwanda Mabanza"),w(a,"type","text"),w(P,"class","mt-2 text-sm text-red-600 dark:text-red-500"),w(b,"class","mb-5"),w(R,"class","my-div mb-5 svelte-12pk1fb"),w(T,"class","button-submit svelte-12pk1fb"),w(T,"type","submit"),w(u,"class","max-w-sm mx-auto"),w(_,"class","inner-container svelte-12pk1fb"),w(f,"class","modal-container svelte-12pk1fb"),ge(f,"show-modal",l[1])},m(p,$){k(p,e,$),k(p,n,$),l[19](n),k(p,s,$),k(p,f,$),V(r,f,null),y(f,i),y(f,_),V(o,_,null),y(_,d),y(_,u),y(u,b),V(c,b,null),y(b,v),y(b,a),l[22](a),$e(a,l[7]),y(b,z),y(b,P),y(P,G),y(u,ne),y(u,R),V(S,R,null),y(R,le),V(F,R,null),y(u,oe),y(u,T),l[26](u),l[27](_),m=!0,X||(Y=[W(Ye,"keydown",l[12]),W(document,"click",l[17]),W(n,"click",l[20]),W(a,"input",l[23]),W(a,"input",l[16]),W(a,"keydown",l[13]),W(u,"submit",Re(l[15]))],X=!0)},p(p,[$]){const A={};$&268435456&&(A.$$scope={dirty:$,ctx:p}),o.$set(A);const q={};$&1&&(q.valid=!p[0]),$&268435456&&(q.$$scope={dirty:$,ctx:p}),c.$set(q),(!m||$&1&&g!==(g=_e(p[0]?"input-name-validation-failed":"input-name")+" svelte-12pk1fb"))&&w(a,"class",g),(!m||$&1&&K!==(K=p[0]?"":"Example: Rwanda Mabanza"))&&w(a,"placeholder",K),$&128&&a.value!==p[7]&&$e(a,p[7]),(!m||$&512)&&me(G,p[9]);const L={};$&268435456&&(L.$$scope={dirty:$,ctx:p}),S.$set(L);const J={};!se&&$&32&&(se=!0,J._this=p[5],he(()=>se=!1)),!ae&&$&256&&(ae=!0,J.value=p[8],he(()=>ae=!1)),F.$set(J),(!m||$&2)&&ge(f,"show-modal",p[1])},i(p){m||(B(r.$$.fragment,p),B(o.$$.fragment,p),B(c.$$.fragment,p),B(S.$$.fragment,p),B(F.$$.fragment,p),m=!0)},o(p){I(r.$$.fragment,p),I(o.$$.fragment,p),I(c.$$.fragment,p),I(S.$$.fragment,p),I(F.$$.fragment,p),m=!1},d(p){p&&(h(e),h(n),h(s),h(f)),l[19](null),H(r),H(o),H(c),l[22](null),H(S),H(F),l[26](null),l[27](null),X=!1,Ie(Y)}}}const tt="Example: Washed process. Notes: plum, cherry.";function Ce(l,e){const n=l.getBoundingClientRect(),t=e.clientX,s=e.clientY;return t<n.left||t>n.right||s<n.top||s>n.bottom}function nt(l,e,n){let{coffeeBeansItem:t}=e,s=!1,f,r,i,_,o,d=t.name,u=t.description,b=!1,c="";function v(){n(1,s=!0),Fe().then(()=>{i.focus()})}function a(){n(1,s=!1),n(0,b=!1)}function g(m){s&&m.key==="Escape"&&n(1,s=!1)}function K(m){m.key==="Enter"&&(m.preventDefault(),_.focus())}function z(m){m.key==="Enter"&&(m.metaKey||m.ctrlKey)&&(m.preventDefault(),o.requestSubmit())}async function P(){const m=new ue({name:d,description:u},t.id),X=Ke.create(m);if(X==="ValidationFailed_NameMustBeAtLeast3CharsLong"){n(0,b=!0),n(9,c="Name must be at least 3 characters long.");return}const Y=await ze(X);if(Y==="Failure_NameAlreadyExist"){n(0,b=!0),n(9,c="Coffee beans with this name exist already.");return}alert("We saved the edited coffee beans successfully."),n(18,t=Y),a(),window.location.replace(ce.coffeeBeansItem(Y.name))}function G(){b&&(n(0,b=!1),n(9,c=""))}function ne(m){s!==!1&&Ce(f,m)&&Ce(r,m)&&a()}function R(m){Q[m?"unshift":"push"](()=>{r=m,n(3,r)})}const S=()=>v(),le=()=>a();function F(m){Q[m?"unshift":"push"](()=>{i=m,n(4,i)})}function se(){d=this.value,n(7,d)}function ae(m){_=m,n(5,_)}function oe(m){u=m,n(8,u)}function T(m){Q[m?"unshift":"push"](()=>{o=m,n(6,o)})}function fe(m){Q[m?"unshift":"push"](()=>{f=m,n(2,f)})}return l.$$set=m=>{"coffeeBeansItem"in m&&n(18,t=m.coffeeBeansItem)},l.$$.update=()=>{l.$$.dirty&1&&b===!1&&n(9,c="")},[b,s,f,r,i,_,o,d,u,c,v,a,g,K,z,P,G,ne,t,R,S,le,F,se,ae,oe,T,fe]}class lt extends Ee{constructor(e){super(),Ne(this,e,nt,et,Be,{coffeeBeansItem:18})}}function we(l,e,n){const t=l.slice();return t[3]=e[n],t}function st(l){return{c(){this.h()},l(e){this.h()},h(){document.title="404 Not Found"},m:C,d:C}}function at(l){return{c(){this.h()},l(e){this.h()},h(){document.title="loading..."},m:C,d:C}}function ot(l){return document.title=l[0].name,{c:C,l:C,m:C,d:C}}function ft(l){let e,n="404",t,s,f="Coffee beans not found.";return{c(){e=N("h1"),e.textContent=n,t=E(),s=N("p"),s.textContent=f},l(r){e=M(r,"H1",{"data-svelte-h":!0}),U(e)!=="svelte-v1pfve"&&(e.textContent=n),t=D(r),s=M(r,"P",{"data-svelte-h":!0}),U(s)!=="svelte-9rilyc"&&(s.textContent=f)},m(r,i){k(r,e,i),k(r,t,i),k(r,s,i)},p:C,i:C,o:C,d(r){r&&(h(e),h(t),h(s))}}}function rt(l){let e,n="loading...";return{c(){e=N("p"),e.textContent=n},l(t){e=M(t,"P",{"data-svelte-h":!0}),U(e)!=="svelte-qeejp2"&&(e.textContent=n)},m(t,s){k(t,e,s)},p:C,i:C,o:C,d(t){t&&h(e)}}}function it(l){let e,n,t,s=l[0].description+"",f,r,i,_,o,d,u;e=new qe({props:{$$slots:{default:[ct]},$$scope:{ctx:l}}});const b=[pt,dt,mt],c=[];function v(a,g){return a[1]!==void 0&&a[1].length>0?0:a[1]!==void 0&&a[1].length===0?1:2}return i=v(l),_=c[i]=b[i](l),d=new je({props:{href:ce.addRecipe(l[0].name)}}),{c(){j(e.$$.fragment),n=E(),t=N("p"),f=ee(s),r=E(),_.c(),o=E(),j(d.$$.fragment),this.h()},l(a){O(e.$$.fragment,a),n=D(a),t=M(a,"P",{class:!0});var g=x(t);f=te(g,s),g.forEach(h),r=D(a),_.l(a),o=D(a),O(d.$$.fragment,a),this.h()},h(){w(t,"class","coffee-beans-description svelte-1hdudlq")},m(a,g){V(e,a,g),k(a,n,g),k(a,t,g),y(t,f),k(a,r,g),c[i].m(a,g),k(a,o,g),V(d,a,g),u=!0},p(a,g){const K={};g&65&&(K.$$scope={dirty:g,ctx:a}),e.$set(K),(!u||g&1)&&s!==(s=a[0].description+"")&&me(f,s);let z=i;i=v(a),i===z?c[i].p(a,g):(pe(),I(c[z],1,1,()=>{c[z]=null}),de(),_=c[i],_?_.p(a,g):(_=c[i]=b[i](a),_.c()),B(_,1),_.m(o.parentNode,o));const P={};g&1&&(P.href=ce.addRecipe(a[0].name)),d.$set(P)},i(a){u||(B(e.$$.fragment,a),B(_),B(d.$$.fragment,a),u=!0)},o(a){I(e.$$.fragment,a),I(_),I(d.$$.fragment,a),u=!1},d(a){a&&(h(n),h(t),h(r),h(o)),H(e,a),c[i].d(a),H(d,a)}}}function ut(l){let e=l[0].name+"",n;return{c(){n=ee(e)},l(t){n=te(t,e)},m(t,s){k(t,n,s)},p(t,s){s&1&&e!==(e=t[0].name+"")&&me(n,e)},d(t){t&&h(n)}}}function ct(l){let e,n,t,s;return e=new He({props:{$$slots:{default:[ut]},$$scope:{ctx:l}}}),t=new lt({props:{coffeeBeansItem:l[0]}}),{c(){j(e.$$.fragment),n=E(),j(t.$$.fragment)},l(f){O(e.$$.fragment,f),n=D(f),O(t.$$.fragment,f)},m(f,r){V(e,f,r),k(f,n,r),V(t,f,r),s=!0},p(f,r){const i={};r&65&&(i.$$scope={dirty:r,ctx:f}),e.$set(i);const _={};r&1&&(_.coffeeBeansItem=f[0]),t.$set(_)},i(f){s||(B(e.$$.fragment,f),B(t.$$.fragment,f),s=!0)},o(f){I(e.$$.fragment,f),I(t.$$.fragment,f),s=!1},d(f){f&&h(n),H(e,f),H(t,f)}}}function mt(l){let e,n="loading...";return{c(){e=N("p"),e.textContent=n},l(t){e=M(t,"P",{"data-svelte-h":!0}),U(e)!=="svelte-qeejp2"&&(e.textContent=n)},m(t,s){k(t,e,s)},p:C,i:C,o:C,d(t){t&&h(e)}}}function dt(l){let e,n="No recipes added yet.";return{c(){e=N("p"),e.textContent=n},l(t){e=M(t,"P",{"data-svelte-h":!0}),U(e)!=="svelte-1wkojli"&&(e.textContent=n)},m(t,s){k(t,e,s)},p:C,i:C,o:C,d(t){t&&h(e)}}}function pt(l){let e,n="Best recipes",t,s,f,r=ke(l[1]),i=[];for(let o=0;o<r.length;o+=1)i[o]=ye(we(l,r,o));const _=o=>I(i[o],1,1,()=>{i[o]=null});return{c(){e=N("h2"),e.textContent=n,t=E();for(let o=0;o<i.length;o+=1)i[o].c();s=Z(),this.h()},l(o){e=M(o,"H2",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1ugq89b"&&(e.textContent=n),t=D(o);for(let d=0;d<i.length;d+=1)i[d].l(o);s=Z(),this.h()},h(){w(e,"class","svelte-1hdudlq")},m(o,d){k(o,e,d),k(o,t,d);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(o,d);k(o,s,d),f=!0},p(o,d){if(d&2){r=ke(o[1]);let u;for(u=0;u<r.length;u+=1){const b=we(o,r,u);i[u]?(i[u].p(b,d),B(i[u],1)):(i[u]=ye(b),i[u].c(),B(i[u],1),i[u].m(s.parentNode,s))}for(pe(),u=r.length;u<i.length;u+=1)_(u);de()}},i(o){if(!f){for(let d=0;d<r.length;d+=1)B(i[d]);f=!0}},o(o){i=i.filter(Boolean);for(let d=0;d<i.length;d+=1)I(i[d]);f=!1},d(o){o&&(h(e),h(t),h(s)),Te(i,o)}}}function ye(l){let e,n;return e=new Ve({props:{recipe:l[3]}}),{c(){j(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,s){V(e,t,s),n=!0},p(t,s){const f={};s&2&&(f.recipe=t[3]),e.$set(f)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function _t(l){let e,n,t,s,f,r;function i(c,v){if(c[0]instanceof ue)return ot;if(c[0]===void 0)return at;if(c[0]==="CoffeeBeansNotFound")return st}let _=i(l),o=_&&_(l);const d=[it,rt,ft],u=[];function b(c,v){return c[0]instanceof ue?0:c[0]===void 0?1:c[0]==="CoffeeBeansNotFound"?2:-1}return~(t=b(l))&&(s=u[t]=d[t](l)),{c(){o&&o.c(),e=Z(),n=E(),s&&s.c(),f=Z()},l(c){const v=Se("svelte-pyc7eo",document.head);o&&o.l(v),e=Z(),v.forEach(h),n=D(c),s&&s.l(c),f=Z()},m(c,v){o&&o.m(document.head,null),y(document.head,e),k(c,n,v),~t&&u[t].m(c,v),k(c,f,v),r=!0},p(c,[v]){_!==(_=i(c))&&(o&&o.d(1),o=_&&_(c),o&&(o.c(),o.m(e.parentNode,e)));let a=t;t=b(c),t===a?~t&&u[t].p(c,v):(s&&(pe(),I(u[a],1,1,()=>{u[a]=null}),de()),~t?(s=u[t],s?s.p(c,v):(s=u[t]=d[t](c),s.c()),B(s,1),s.m(f.parentNode,f)):s=null)},i(c){r||(B(s),r=!0)},o(c){I(s),r=!1},d(c){c&&(h(n),h(f)),o&&o.d(c),h(e),~t&&u[t].d(c)}}}function ht(l,e,n){let{data:t}=e,s,f;return Pe(()=>{Le(t.coffeeBeansName).then(r=>r===void 0?(n(0,s="CoffeeBeansNotFound"),Promise.resolve("CoffeeBeansNotFound")):(n(0,s=r),Ue(s.id))).then(r=>{r!=="CoffeeBeansNotFound"&&n(1,f=r.sort(Oe))})}),l.$$set=r=>{"data"in r&&n(2,t=r.data)},[s,f,t]}class Dt extends Ee{constructor(e){super(),Ne(this,e,ht,_t,Be,{data:2})}}export{Dt as component,Nt as universal};
