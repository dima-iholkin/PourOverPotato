import{s as fe,d as z,e as Y,f as oe,r as $e,n as D}from"../chunks/scheduler.c6D-u3vw.js";import{S as ue,i as de,y as G,k as N,m as P,n as I,q as S,o as C,r as T,e as F,s as O,t as Z,c as j,a as K,f as L,b as x,d as g,z as X,x as k,g as M,h as E,E as se,A as Q,C as he,j as ee,v as q,l as ge,p as te,u as ne}from"../chunks/index.uR5eFXUy.js";import{e as le,u as be,o as ve}from"../chunks/each.SsXDy5GB.js";import{g as ce}from"../chunks/entry.rkIKpWki.js";import{C as me,l as we,m as ke,h as pe,n as Se,o as Ce,q as Me,b as ye}from"../chunks/indexedDB.Q_ZGv_fi.js";import{s as Be,A as De,S as Ee,N as Ne}from"../chunks/NoItemsYetP.vzLr9CNR.js";import{r as J}from"../chunks/routes.bM4H9LUV.js";import{R as Pe}from"../chunks/RecipeCard.2GZoCXaI.js";import{L as _e}from"../chunks/Loading.fvMZ11oo.js";import{D as Ie,a as Te}from"../chunks/DropdownMenuItem.zyeQVuEX.js";import{F as Re}from"../chunks/FlexRow.GGLUjX4k.js";import{D as Fe}from"../chunks/DeleteConfirmationModal.HPLiuZkv.js";import{P as je}from"../chunks/PageHeadline.F2eDUn1P.js";import{L as Oe,T as Le}from"../chunks/Textarea.pD-sxuTV.js";import{M as Ve}from"../chunks/Modal.k4Lp8p4d.js";function qe({params:a}){return{coffeeBeansName:a.name}}const Mt=Object.freeze(Object.defineProperty({__proto__:null,load:qe},Symbol.toStringTag,{value:"Module"}));function ze(a){let e;return{c(){e=Z("Coffee beans name:")},l(n){e=x(n,"Coffee beans name:")},m(n,t){M(n,e,t)},d(n){n&&g(e)}}}function Ae(a){let e,n,t,o,s,l,r,c,i,f,p,b,u,v,d,m,y,R="Save",_,w,A;t=new Oe({props:{for_:"name",valid:!a[0],$$slots:{default:[ze]},$$scope:{ctx:a}}});function H(h){a[16](h)}function $(h){a[17](h)}let U={id:"description",label:"Description:",name:"description",placeholder:Ke};return a[3]!==void 0&&(U.this_=a[3]),a[6]!==void 0&&(U.value=a[6]),u=new Le({props:U}),z.push(()=>G(u,"this_",H)),z.push(()=>G(u,"value",$)),u.$on("keydown",a[9]),{c(){e=F("form"),n=F("div"),N(t.$$.fragment),o=O(),s=F("input"),c=O(),i=F("p"),f=Z(a[7]),p=O(),b=F("div"),N(u.$$.fragment),m=O(),y=F("button"),y.textContent=R,this.h()},l(h){e=j(h,"FORM",{class:!0});var B=K(e);n=j(B,"DIV",{class:!0});var V=K(n);P(t.$$.fragment,V),o=L(V),s=j(V,"INPUT",{id:!0,autocomplete:!0,class:!0,name:!0,placeholder:!0,type:!0}),c=L(V),i=j(V,"P",{class:!0});var W=K(i);f=x(W,a[7]),W.forEach(g),V.forEach(g),p=L(B),b=j(B,"DIV",{class:!0});var ae=K(b);P(u.$$.fragment,ae),ae.forEach(g),m=L(B),y=j(B,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),X(y)!=="svelte-j4uhei"&&(y.textContent=R),B.forEach(g),this.h()},h(){k(s,"id","name"),k(s,"autocomplete","off"),k(s,"class",l=oe(a[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"),k(s,"name","name"),k(s,"placeholder",r=a[0]?"":"Example: Rwanda Mabanza"),k(s,"type","text"),k(i,"class","mt-2 text-sm text-red-600 dark:text-red-500"),k(n,"class","mb-5"),k(b,"class","my-div mb-5 svelte-15jwmuc"),k(y,"class","button-submit svelte-15jwmuc"),k(y,"type","submit"),k(e,"class","mx-auto")},m(h,B){M(h,e,B),E(e,n),I(t,n,null),E(n,o),E(n,s),a[14](s),se(s,a[5]),E(n,c),E(n,i),E(i,f),E(e,p),E(e,b),I(u,b,null),E(e,m),E(e,y),a[18](e),_=!0,w||(A=[Q(s,"input",a[15]),Q(s,"input",a[11]),Q(s,"keydown",a[8]),Q(e,"submit",he(a[10]))],w=!0)},p(h,B){const V={};B&1&&(V.valid=!h[0]),B&1048576&&(V.$$scope={dirty:B,ctx:h}),t.$set(V),(!_||B&1&&l!==(l=oe(h[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"))&&k(s,"class",l),(!_||B&1&&r!==(r=h[0]?"":"Example: Rwanda Mabanza"))&&k(s,"placeholder",r),B&32&&s.value!==h[5]&&se(s,h[5]),(!_||B&128)&&ee(f,h[7]);const W={};!v&&B&8&&(v=!0,W.this_=h[3],Y(()=>v=!1)),!d&&B&64&&(d=!0,W.value=h[6],Y(()=>d=!1)),u.$set(W)},i(h){_||(S(t.$$.fragment,h),S(u.$$.fragment,h),_=!0)},o(h){C(t.$$.fragment,h),C(u.$$.fragment,h),_=!1},d(h){h&&g(e),T(t),a[14](null),T(u),a[18](null),w=!1,$e(A)}}}function He(a){let e,n,t;function o(l){a[19](l)}let s={title:"Edit coffee beans",$$slots:{default:[Ae]},$$scope:{ctx:a}};return a[1]!==void 0&&(s.setState=a[1]),e=new Ve({props:s}),z.push(()=>G(e,"setState",o)),{c(){N(e.$$.fragment)},l(l){P(e.$$.fragment,l)},m(l,r){I(e,l,r),t=!0},p(l,[r]){const c={};r&1048829&&(c.$$scope={dirty:r,ctx:l}),!n&&r&2&&(n=!0,c.setState=l[1],Y(()=>n=!1)),e.$set(c)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}const Ke="Example: Washed process. Notes: plum, cherry.";function Ue(a,e,n){const t=$=>{s($)};let{item:o}=e,s,l,r,c,i=o.name??"",f=o.description??"",p="",b=!1;function u($){$.key==="Enter"&&($.preventDefault(),r.focus())}function v($){$.key==="Enter"&&($.metaKey||$.ctrlKey)&&($.preventDefault(),c.requestSubmit())}async function d(){const $=new me({name:i,description:f},o.id),U=we.create($);if(U==="ValidationFailed_NameMustBeAtLeast3CharsLong"){n(0,b=!0),n(7,p="Name must be at least 3 characters long.");return}const h=await ke(U);if(h==="Failure_NameAlreadyExist"){n(0,b=!0),n(7,p="Coffee beans with this name exist already.");return}pe(`Coffee beans "${h.name}" changes saved.`),n(12,o=h),s("closed"),ce(J.coffeeBeansItem(h.name))}function m(){b&&(n(0,b=!1),n(7,p=""))}function y($){z[$?"unshift":"push"](()=>{l=$,n(2,l)})}function R(){i=this.value,n(5,i)}function _($){r=$,n(3,r)}function w($){f=$,n(6,f)}function A($){z[$?"unshift":"push"](()=>{c=$,n(4,c)})}function H($){s=$,n(1,s)}return a.$$set=$=>{"item"in $&&n(12,o=$.item)},a.$$.update=()=>{a.$$.dirty&1&&b===!1&&n(7,p="")},[b,s,l,r,c,i,f,p,u,v,d,m,o,t,y,R,_,w,A,H]}class We extends ue{constructor(e){super(),de(this,e,Ue,He,fe,{setModalState:13,item:12})}get setModalState(){return this.$$.ctx[13]}}function re(a,e,n){const t=a.slice();return t[13]=e[n],t}function Ye(a){return document.title=a[3].name+" - PourOverPotato app",{c:D,l:D,m:D,d:D}}function Ge(a){return{c(){this.h()},l(e){this.h()},h(){document.title="404 Not Found - PourOverPotato app"},m:D,d:D}}function Je(a){return{c(){this.h()},l(e){this.h()},h(){document.title="loading... - PourOverPotato app"},m:D,d:D}}function Qe(a){let e,n,t,o=a[3].description+"",s,l,r,c,i,f,p;e=new Re({props:{$$slots:{default:[at]},$$scope:{ctx:a}}});const b=[lt,st,ot],u=[];function v(d,m){return d[4]===void 0?0:d[4].length===0?1:2}return r=v(a),c=u[r]=b[r](a),f=new De({props:{href:J.addRecipe(a[3].name)}}),{c(){N(e.$$.fragment),n=O(),t=F("p"),s=Z(o),l=O(),c.c(),i=O(),N(f.$$.fragment),this.h()},l(d){P(e.$$.fragment,d),n=L(d),t=j(d,"P",{class:!0});var m=K(t);s=x(m,o),m.forEach(g),l=L(d),c.l(d),i=L(d),P(f.$$.fragment,d),this.h()},h(){k(t,"class","coffee-beans-description svelte-1vu3dn8")},m(d,m){I(e,d,m),M(d,n,m),M(d,t,m),E(t,s),M(d,l,m),u[r].m(d,m),M(d,i,m),I(f,d,m),p=!0},p(d,m){const y={};m&65551&&(y.$$scope={dirty:m,ctx:d}),e.$set(y),(!p||m&8)&&o!==(o=d[3].description+"")&&ee(s,o);let R=r;r=v(d),r===R?u[r].p(d,m):(ne(),C(u[R],1,1,()=>{u[R]=null}),te(),c=u[r],c?c.p(d,m):(c=u[r]=b[r](d),c.c()),S(c,1),c.m(i.parentNode,i));const _={};m&8&&(_.href=J.addRecipe(d[3].name)),f.$set(_)},i(d){p||(S(e.$$.fragment,d),S(c),S(f.$$.fragment,d),p=!0)},o(d){C(e.$$.fragment,d),C(c),C(f.$$.fragment,d),p=!1},d(d){d&&(g(n),g(t),g(l),g(i)),T(e,d),u[r].d(d),T(f,d)}}}function Xe(a){let e,n="<h1>404</h1> <p>Coffee beans not found.</p>";return{c(){e=F("div"),e.innerHTML=n,this.h()},l(t){e=j(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-akmamj"&&(e.innerHTML=n),this.h()},h(){k(e,"class","loading-position svelte-1vu3dn8")},m(t,o){M(t,e,o)},p:D,i:D,o:D,d(t){t&&g(e)}}}function Ze(a){let e,n,t;return n=new _e({}),{c(){e=F("div"),N(n.$$.fragment),this.h()},l(o){e=j(o,"DIV",{class:!0});var s=K(e);P(n.$$.fragment,s),s.forEach(g),this.h()},h(){k(e,"class","loading-position svelte-1vu3dn8")},m(o,s){M(o,e,s),I(n,e,null),t=!0},p:D,i(o){t||(S(n.$$.fragment,o),t=!0)},o(o){C(n.$$.fragment,o),t=!1},d(o){o&&g(e),T(n)}}}function xe(a){let e=a[3].name+"",n;return{c(){n=Z(e)},l(t){n=x(t,e)},m(t,o){M(t,n,o)},p(t,o){o&8&&e!==(e=t[3].name+"")&&ee(n,e)},d(t){t&&g(n)}}}function et(a){let e,n;return e=new Te({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",a[10]),{c(){N(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){I(e,t,o),n=!0},p:D,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function tt(a){let e,n="Please confirm you want to delete these coffee beans.",t,o,s="The dependent recipes will be deleted too.";return{c(){e=F("p"),e.textContent=n,t=O(),o=F("p"),o.textContent=s},l(l){e=j(l,"P",{"data-svelte-h":!0}),X(e)!=="svelte-jtslft"&&(e.textContent=n),t=L(l),o=j(l,"P",{"data-svelte-h":!0}),X(o)!=="svelte-puw9d7"&&(o.textContent=s)},m(l,r){M(l,e,r),M(l,t,r),M(l,o,r)},p:D,d(l){l&&(g(e),g(t),g(o))}}}function nt(a){let e,n,t;function o(l){a[9](l)}let s={slot:"modal",onDeleteClick:a[5],$$slots:{default:[tt]},$$scope:{ctx:a}};return a[0]!==void 0&&(s.setModalState=a[0]),e=new Fe({props:s}),z.push(()=>G(e,"setModalState",o)),{c(){N(e.$$.fragment)},l(l){P(e.$$.fragment,l)},m(l,r){I(e,l,r),t=!0},p(l,r){const c={};r&65536&&(c.$$scope={dirty:r,ctx:l}),!n&&r&1&&(n=!0,c.setModalState=l[0],Y(()=>n=!1)),e.$set(c)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function at(a){let e,n,t,o,s="Edit",l,r,c,i,f,p,b,u,v;e=new je({props:{$$slots:{default:[xe]},$$scope:{ctx:a}}});function d(_){a[8](_)}let m={item:a[3]};a[2]!==void 0&&(m.setModalState=a[2]),r=new We({props:m}),z.push(()=>G(r,"setModalState",d));function y(_){a[11](_)}let R={$$slots:{modal:[nt],button:[et]},$$scope:{ctx:a}};return a[1]!==void 0&&(R.setDropdownState=a[1]),f=new Ie({props:R}),z.push(()=>G(f,"setDropdownState",y)),{c(){N(e.$$.fragment),n=O(),t=F("div"),o=F("button"),o.textContent=s,l=O(),N(r.$$.fragment),i=O(),N(f.$$.fragment),this.h()},l(_){P(e.$$.fragment,_),n=L(_),t=j(_,"DIV",{class:!0});var w=K(t);o=j(w,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),X(o)!=="svelte-gleq7e"&&(o.textContent=s),l=L(w),P(r.$$.fragment,w),i=L(w),P(f.$$.fragment,w),w.forEach(g),this.h()},h(){k(o,"class","edit-button svelte-1vu3dn8"),k(o,"type","button"),k(t,"class","menu-container svelte-1vu3dn8")},m(_,w){I(e,_,w),M(_,n,w),M(_,t,w),E(t,o),E(t,l),I(r,t,null),E(t,i),I(f,t,null),b=!0,u||(v=Q(o,"click",a[7]),u=!0)},p(_,w){const A={};w&65544&&(A.$$scope={dirty:w,ctx:_}),e.$set(A);const H={};w&8&&(H.item=_[3]),!c&&w&4&&(c=!0,H.setModalState=_[2],Y(()=>c=!1)),r.$set(H);const $={};w&65539&&($.$$scope={dirty:w,ctx:_}),!p&&w&2&&(p=!0,$.setDropdownState=_[1],Y(()=>p=!1)),f.$set($)},i(_){b||(S(e.$$.fragment,_),S(r.$$.fragment,_),S(f.$$.fragment,_),b=!0)},o(_){C(e.$$.fragment,_),C(r.$$.fragment,_),C(f.$$.fragment,_),b=!1},d(_){_&&(g(n),g(t)),T(e,_),T(r),T(f),u=!1,v()}}}function ot(a){let e,n,t=[],o=new Map,s,l;e=new Ee({props:{$$slots:{default:[rt]},$$scope:{ctx:a}}});let r=le(a[4]);const c=i=>i[13].id;for(let i=0;i<r.length;i+=1){let f=re(a,r,i),p=c(f);o.set(p,t[i]=ie(p,f))}return{c(){N(e.$$.fragment),n=O();for(let i=0;i<t.length;i+=1)t[i].c();s=q()},l(i){P(e.$$.fragment,i),n=L(i);for(let f=0;f<t.length;f+=1)t[f].l(i);s=q()},m(i,f){I(e,i,f),M(i,n,f);for(let p=0;p<t.length;p+=1)t[p]&&t[p].m(i,f);M(i,s,f),l=!0},p(i,f){const p={};f&65536&&(p.$$scope={dirty:f,ctx:i}),e.$set(p),f&24&&(r=le(i[4]),ne(),t=be(t,f,c,1,i,r,o,s.parentNode,ve,ie,s,re),te())},i(i){if(!l){S(e.$$.fragment,i);for(let f=0;f<r.length;f+=1)S(t[f]);l=!0}},o(i){C(e.$$.fragment,i);for(let f=0;f<t.length;f+=1)C(t[f]);l=!1},d(i){i&&(g(n),g(s)),T(e,i);for(let f=0;f<t.length;f+=1)t[f].d(i)}}}function st(a){let e,n;return e=new Ne({}),{c(){N(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){I(e,t,o),n=!0},p:D,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function lt(a){let e,n;return e=new _e({}),{c(){N(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){I(e,t,o),n=!0},p:D,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function rt(a){let e;return{c(){e=Z("Sorted by latest recipe date")},l(n){e=x(n,"Sorted by latest recipe date")},m(n,t){M(n,e,t)},d(n){n&&g(e)}}}function ie(a,e){let n,t,o;return t=new Pe({props:{coffeeBeansName:e[3].name,href:J.recipeItem(e[13].id),recipe:e[13]}}),{key:a,first:null,c(){n=q(),N(t.$$.fragment),this.h()},l(s){n=q(),P(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,l){M(s,n,l),I(t,s,l),o=!0},p(s,l){e=s;const r={};l&8&&(r.coffeeBeansName=e[3].name),l&16&&(r.href=J.recipeItem(e[13].id)),l&16&&(r.recipe=e[13]),t.$set(r)},i(s){o||(S(t.$$.fragment,s),o=!0)},o(s){C(t.$$.fragment,s),o=!1},d(s){s&&g(n),T(t,s)}}}function it(a){let e,n,t,o,s,l;function r(u,v){return u[3]===void 0?Je:u[3]==="CoffeeBeansNotFound"?Ge:Ye}let c=r(a),i=c(a);const f=[Ze,Xe,Qe],p=[];function b(u,v){return u[3]===void 0?0:u[3]==="CoffeeBeansNotFound"?1:2}return t=b(a),o=p[t]=f[t](a),{c(){i.c(),e=q(),n=O(),o.c(),s=q()},l(u){const v=ge("svelte-1xzg8rg",document.head);i.l(v),e=q(),v.forEach(g),n=L(u),o.l(u),s=q()},m(u,v){i.m(document.head,null),E(document.head,e),M(u,n,v),p[t].m(u,v),M(u,s,v),l=!0},p(u,[v]){c!==(c=r(u))&&(i.d(1),i=c(u),i&&(i.c(),i.m(e.parentNode,e)));let d=t;t=b(u),t===d?p[t].p(u,v):(ne(),C(p[d],1,1,()=>{p[d]=null}),te(),o=p[t],o?o.p(u,v):(o=p[t]=f[t](u),o.c()),S(o,1),o.m(s.parentNode,s))},i(u){l||(S(o),l=!0)},o(u){C(o),l=!1},d(u){u&&(g(n),g(s)),i.d(u),g(e),p[t].d(u)}}}function ft(a,e,n){let{data:t}=e,o,s,l,r,c;async function i(){if(r instanceof me){const m=await Se(r.id);await Ce(r.id),ce(J.home);const y=m===1?"recipe":"recipes",R=m>0?` and ${m} ${y}`:"";pe(`Coffee beans "${r.name}"`+R+" deleted.")}}async function f(){const m=await Me(t.coffeeBeansName);if(m===void 0){n(3,r="CoffeeBeansNotFound");return}n(3,r=m);const y=await ye(r.id);n(4,c=y.sort(Be))}const p=()=>l("open");function b(m){l=m,n(2,l)}function u(m){o=m,n(0,o)}const v=()=>{o("open"),s("closed")};function d(m){s=m,n(1,s)}return a.$$set=m=>{"data"in m&&n(6,t=m.data)},a.$$.update=()=>{a.$$.dirty&64&&window.indexedDB&&f()},[o,s,l,r,c,i,t,p,b,u,v,d]}class yt extends ue{constructor(e){super(),de(this,e,ft,it,fe,{data:6})}}export{yt as component,Mt as universal};
