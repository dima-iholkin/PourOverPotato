import{s as fe,d as A,e as Y,f as oe,r as $e,n as N}from"../chunks/scheduler.FewvdMMF.js";import{S as ue,i as de,y as G,k as P,m as I,n as R,q as C,o as M,r as T,e as j,s as O,t as Z,c as F,a as K,f as L,b as x,d as b,z as X,x as S,g as D,h as E,D as se,A as Q,B as he,j as ee,v as z,l as ge,p as te,u as ne}from"../chunks/index.hBqe7O5r.js";import{e as le,u as be,o as ve}from"../chunks/each.upGX0VEp.js";import{g as ce}from"../chunks/entry.p4acZ2N1.js";import{C as me,k as we,l as ke,c as pe,m as Se,n as Ce,o as Me,j as De}from"../chunks/indexedDB.-NdEfsz5.js";import{s as Be,A as ye,N as Ne}from"../chunks/NoItemsYetP.SMclZW3c.js";import{r as J}from"../chunks/routes.skTZjV5d.js";import{S as Ee,R as Pe}from"../chunks/SortRecipesSelect._fL4QJID.js";import{L as _e}from"../chunks/Loading.3VKhBrP9.js";import{D as Ie,a as Re}from"../chunks/DropdownMenuItem.UMOmPgjU.js";import{F as Te}from"../chunks/FlexRow.t7qNHO_n.js";import{D as je}from"../chunks/DeleteConfirmationModal.duEl-YPh.js";import{P as Fe}from"../chunks/PageHeadline.U16gsSp1.js";import{L as Oe,T as Le}from"../chunks/Textarea.tHEkl40a.js";import{M as Ve}from"../chunks/Modal.XYP6TJ_5.js";function ze({params:a}){return{coffeeBeansName:a.name}}const Ct=Object.freeze(Object.defineProperty({__proto__:null,load:ze},Symbol.toStringTag,{value:"Module"}));function Ae(a){let e;return{c(){e=Z("Coffee beans name:")},l(n){e=x(n,"Coffee beans name:")},m(n,t){D(n,e,t)},d(n){n&&b(e)}}}function qe(a){let e,n,t,o,s,l,r,c,i,f,p,v,u,w,d,g,_,y="Save",m,k,q;t=new Oe({props:{for_:"name",valid:!a[0],$$slots:{default:[Ae]},$$scope:{ctx:a}}});function H(h){a[16](h)}function $(h){a[17](h)}let U={id:"description",label:"Description:",name:"description",placeholder:Ke};return a[3]!==void 0&&(U.this_=a[3]),a[6]!==void 0&&(U.value=a[6]),u=new Le({props:U}),A.push(()=>G(u,"this_",H)),A.push(()=>G(u,"value",$)),u.$on("keydown",a[9]),{c(){e=j("form"),n=j("div"),P(t.$$.fragment),o=O(),s=j("input"),c=O(),i=j("p"),f=Z(a[7]),p=O(),v=j("div"),P(u.$$.fragment),g=O(),_=j("button"),_.textContent=y,this.h()},l(h){e=F(h,"FORM",{class:!0});var B=K(e);n=F(B,"DIV",{class:!0});var V=K(n);I(t.$$.fragment,V),o=L(V),s=F(V,"INPUT",{id:!0,autocomplete:!0,class:!0,name:!0,placeholder:!0,type:!0}),c=L(V),i=F(V,"P",{class:!0});var W=K(i);f=x(W,a[7]),W.forEach(b),V.forEach(b),p=L(B),v=F(B,"DIV",{class:!0});var ae=K(v);I(u.$$.fragment,ae),ae.forEach(b),g=L(B),_=F(B,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),X(_)!=="svelte-j4uhei"&&(_.textContent=y),B.forEach(b),this.h()},h(){S(s,"id","name"),S(s,"autocomplete","off"),S(s,"class",l=oe(a[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"),S(s,"name","name"),S(s,"placeholder",r=a[0]?"":"Example: Rwanda Mabanza"),S(s,"type","text"),S(i,"class","mt-2 text-sm text-red-600 dark:text-red-500"),S(n,"class","mb-5"),S(v,"class","my-div mb-5 svelte-15jwmuc"),S(_,"class","button-submit svelte-15jwmuc"),S(_,"type","submit"),S(e,"class","mx-auto")},m(h,B){D(h,e,B),E(e,n),R(t,n,null),E(n,o),E(n,s),a[14](s),se(s,a[5]),E(n,c),E(n,i),E(i,f),E(e,p),E(e,v),R(u,v,null),E(e,g),E(e,_),a[18](e),m=!0,k||(q=[Q(s,"input",a[15]),Q(s,"input",a[11]),Q(s,"keydown",a[8]),Q(e,"submit",he(a[10]))],k=!0)},p(h,B){const V={};B&1&&(V.valid=!h[0]),B&1048576&&(V.$$scope={dirty:B,ctx:h}),t.$set(V),(!m||B&1&&l!==(l=oe(h[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"))&&S(s,"class",l),(!m||B&1&&r!==(r=h[0]?"":"Example: Rwanda Mabanza"))&&S(s,"placeholder",r),B&32&&s.value!==h[5]&&se(s,h[5]),(!m||B&128)&&ee(f,h[7]);const W={};!w&&B&8&&(w=!0,W.this_=h[3],Y(()=>w=!1)),!d&&B&64&&(d=!0,W.value=h[6],Y(()=>d=!1)),u.$set(W)},i(h){m||(C(t.$$.fragment,h),C(u.$$.fragment,h),m=!0)},o(h){M(t.$$.fragment,h),M(u.$$.fragment,h),m=!1},d(h){h&&b(e),T(t),a[14](null),T(u),a[18](null),k=!1,$e(q)}}}function He(a){let e,n,t;function o(l){a[19](l)}let s={title:"Edit coffee beans",$$slots:{default:[qe]},$$scope:{ctx:a}};return a[1]!==void 0&&(s.setState=a[1]),e=new Ve({props:s}),A.push(()=>G(e,"setState",o)),{c(){P(e.$$.fragment)},l(l){I(e.$$.fragment,l)},m(l,r){R(e,l,r),t=!0},p(l,[r]){const c={};r&1048829&&(c.$$scope={dirty:r,ctx:l}),!n&&r&2&&(n=!0,c.setState=l[1],Y(()=>n=!1)),e.$set(c)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}const Ke="Example: Washed process. Notes: plum, cherry.";function Ue(a,e,n){const t=$=>{s($)};let{item:o}=e,s,l,r,c,i=o.name??"",f=o.description??"",p="",v=!1;function u($){$.key==="Enter"&&($.preventDefault(),r.focus())}function w($){$.key==="Enter"&&($.metaKey||$.ctrlKey)&&($.preventDefault(),c.requestSubmit())}async function d(){const $=new me({name:i,description:f},o.id),U=we.create($);if(U==="ValidationFailed_NameMustBeAtLeast3CharsLong"){n(0,v=!0),n(7,p="Name must be at least 3 characters long.");return}const h=await ke(U);if(h==="Failure_NameAlreadyExist"){n(0,v=!0),n(7,p="Coffee beans with this name exist already.");return}pe(`Coffee beans "${h.name}" changes saved.`),n(12,o=h),s("closed"),ce(J.coffeeBeansItem(h.name))}function g(){v&&(n(0,v=!1),n(7,p=""))}function _($){A[$?"unshift":"push"](()=>{l=$,n(2,l)})}function y(){i=this.value,n(5,i)}function m($){r=$,n(3,r)}function k($){f=$,n(6,f)}function q($){A[$?"unshift":"push"](()=>{c=$,n(4,c)})}function H($){s=$,n(1,s)}return a.$$set=$=>{"item"in $&&n(12,o=$.item)},a.$$.update=()=>{a.$$.dirty&1&&v===!1&&n(7,p="")},[v,s,l,r,c,i,f,p,u,w,d,g,o,t,_,y,m,k,q,H]}class We extends ue{constructor(e){super(),de(this,e,Ue,He,fe,{setModalState:13,item:12})}get setModalState(){return this.$$.ctx[13]}}function re(a,e,n){const t=a.slice();return t[14]=e[n],t}function Ye(a){return document.title=a[3].name+" - PourOverPotato app",{c:N,l:N,m:N,d:N}}function Ge(a){return{c(){this.h()},l(e){this.h()},h(){document.title="404 Not Found - PourOverPotato app"},m:N,d:N}}function Je(a){return{c(){this.h()},l(e){this.h()},h(){document.title="loading... - PourOverPotato app"},m:N,d:N}}function Qe(a){let e,n,t,o=a[3].description+"",s,l,r,c,i,f,p;e=new Te({props:{$$slots:{default:[at]},$$scope:{ctx:a}}});const v=[lt,st,ot],u=[];function w(d,g){return d[4]===void 0?0:d[4].length===0?1:2}return r=w(a),c=u[r]=v[r](a),f=new ye({props:{href:J.addRecipe(a[3].name)}}),{c(){P(e.$$.fragment),n=O(),t=j("p"),s=Z(o),l=O(),c.c(),i=O(),P(f.$$.fragment),this.h()},l(d){I(e.$$.fragment,d),n=L(d),t=F(d,"P",{class:!0});var g=K(t);s=x(g,o),g.forEach(b),l=L(d),c.l(d),i=L(d),I(f.$$.fragment,d),this.h()},h(){S(t,"class","coffee-beans-description svelte-1vu3dn8")},m(d,g){R(e,d,g),D(d,n,g),D(d,t,g),E(t,s),D(d,l,g),u[r].m(d,g),D(d,i,g),R(f,d,g),p=!0},p(d,g){const _={};g&131087&&(_.$$scope={dirty:g,ctx:d}),e.$set(_),(!p||g&8)&&o!==(o=d[3].description+"")&&ee(s,o);let y=r;r=w(d),r===y?u[r].p(d,g):(ne(),M(u[y],1,1,()=>{u[y]=null}),te(),c=u[r],c?c.p(d,g):(c=u[r]=v[r](d),c.c()),C(c,1),c.m(i.parentNode,i));const m={};g&8&&(m.href=J.addRecipe(d[3].name)),f.$set(m)},i(d){p||(C(e.$$.fragment,d),C(c),C(f.$$.fragment,d),p=!0)},o(d){M(e.$$.fragment,d),M(c),M(f.$$.fragment,d),p=!1},d(d){d&&(b(n),b(t),b(l),b(i)),T(e,d),u[r].d(d),T(f,d)}}}function Xe(a){let e,n="<h1>404</h1> <p>Coffee beans not found.</p>";return{c(){e=j("div"),e.innerHTML=n,this.h()},l(t){e=F(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-akmamj"&&(e.innerHTML=n),this.h()},h(){S(e,"class","loading-position svelte-1vu3dn8")},m(t,o){D(t,e,o)},p:N,i:N,o:N,d(t){t&&b(e)}}}function Ze(a){let e,n,t;return n=new _e({}),{c(){e=j("div"),P(n.$$.fragment),this.h()},l(o){e=F(o,"DIV",{class:!0});var s=K(e);I(n.$$.fragment,s),s.forEach(b),this.h()},h(){S(e,"class","loading-position svelte-1vu3dn8")},m(o,s){D(o,e,s),R(n,e,null),t=!0},p:N,i(o){t||(C(n.$$.fragment,o),t=!0)},o(o){M(n.$$.fragment,o),t=!1},d(o){o&&b(e),T(n)}}}function xe(a){let e=a[3].name+"",n;return{c(){n=Z(e)},l(t){n=x(t,e)},m(t,o){D(t,n,o)},p(t,o){o&8&&e!==(e=t[3].name+"")&&ee(n,e)},d(t){t&&b(n)}}}function et(a){let e,n;return e=new Re({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",a[11]),{c(){P(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){R(e,t,o),n=!0},p:N,i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function tt(a){let e,n="Please confirm you want to delete these coffee beans.",t,o,s="The dependent recipes will be deleted too.";return{c(){e=j("p"),e.textContent=n,t=O(),o=j("p"),o.textContent=s},l(l){e=F(l,"P",{"data-svelte-h":!0}),X(e)!=="svelte-jtslft"&&(e.textContent=n),t=L(l),o=F(l,"P",{"data-svelte-h":!0}),X(o)!=="svelte-puw9d7"&&(o.textContent=s)},m(l,r){D(l,e,r),D(l,t,r),D(l,o,r)},p:N,d(l){l&&(b(e),b(t),b(o))}}}function nt(a){let e,n,t;function o(l){a[10](l)}let s={slot:"modal",onDeleteClick:a[5],$$slots:{default:[tt]},$$scope:{ctx:a}};return a[0]!==void 0&&(s.setModalState=a[0]),e=new je({props:s}),A.push(()=>G(e,"setModalState",o)),{c(){P(e.$$.fragment)},l(l){I(e.$$.fragment,l)},m(l,r){R(e,l,r),t=!0},p(l,r){const c={};r&131072&&(c.$$scope={dirty:r,ctx:l}),!n&&r&1&&(n=!0,c.setModalState=l[0],Y(()=>n=!1)),e.$set(c)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function at(a){let e,n,t,o,s="Edit",l,r,c,i,f,p,v,u,w;e=new Fe({props:{$$slots:{default:[xe]},$$scope:{ctx:a}}});function d(m){a[9](m)}let g={item:a[3]};a[2]!==void 0&&(g.setModalState=a[2]),r=new We({props:g}),A.push(()=>G(r,"setModalState",d));function _(m){a[12](m)}let y={$$slots:{modal:[nt],button:[et]},$$scope:{ctx:a}};return a[1]!==void 0&&(y.setDropdownState=a[1]),f=new Ie({props:y}),A.push(()=>G(f,"setDropdownState",_)),{c(){P(e.$$.fragment),n=O(),t=j("div"),o=j("button"),o.textContent=s,l=O(),P(r.$$.fragment),i=O(),P(f.$$.fragment),this.h()},l(m){I(e.$$.fragment,m),n=L(m),t=F(m,"DIV",{class:!0});var k=K(t);o=F(k,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),X(o)!=="svelte-gleq7e"&&(o.textContent=s),l=L(k),I(r.$$.fragment,k),i=L(k),I(f.$$.fragment,k),k.forEach(b),this.h()},h(){S(o,"class","edit-button svelte-1vu3dn8"),S(o,"type","button"),S(t,"class","menu-container svelte-1vu3dn8")},m(m,k){R(e,m,k),D(m,n,k),D(m,t,k),E(t,o),E(t,l),R(r,t,null),E(t,i),R(f,t,null),v=!0,u||(w=Q(o,"click",a[8]),u=!0)},p(m,k){const q={};k&131080&&(q.$$scope={dirty:k,ctx:m}),e.$set(q);const H={};k&8&&(H.item=m[3]),!c&&k&4&&(c=!0,H.setModalState=m[2],Y(()=>c=!1)),r.$set(H);const $={};k&131075&&($.$$scope={dirty:k,ctx:m}),!p&&k&2&&(p=!0,$.setDropdownState=m[1],Y(()=>p=!1)),f.$set($)},i(m){v||(C(e.$$.fragment,m),C(r.$$.fragment,m),C(f.$$.fragment,m),v=!0)},o(m){M(e.$$.fragment,m),M(r.$$.fragment,m),M(f.$$.fragment,m),v=!1},d(m){m&&(b(n),b(t)),T(e,m),T(r),T(f),u=!1,w()}}}function ot(a){let e,n,t=[],o=new Map,s,l;e=new Ee({props:{onChange:a[6]}});let r=le(a[4]);const c=i=>i[14].id;for(let i=0;i<r.length;i+=1){let f=re(a,r,i),p=c(f);o.set(p,t[i]=ie(p,f))}return{c(){P(e.$$.fragment),n=O();for(let i=0;i<t.length;i+=1)t[i].c();s=z()},l(i){I(e.$$.fragment,i),n=L(i);for(let f=0;f<t.length;f+=1)t[f].l(i);s=z()},m(i,f){R(e,i,f),D(i,n,f);for(let p=0;p<t.length;p+=1)t[p]&&t[p].m(i,f);D(i,s,f),l=!0},p(i,f){f&24&&(r=le(i[4]),ne(),t=be(t,f,c,1,i,r,o,s.parentNode,ve,ie,s,re),te())},i(i){if(!l){C(e.$$.fragment,i);for(let f=0;f<r.length;f+=1)C(t[f]);l=!0}},o(i){M(e.$$.fragment,i);for(let f=0;f<t.length;f+=1)M(t[f]);l=!1},d(i){i&&(b(n),b(s)),T(e,i);for(let f=0;f<t.length;f+=1)t[f].d(i)}}}function st(a){let e,n;return e=new Ne({}),{c(){P(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){R(e,t,o),n=!0},p:N,i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function lt(a){let e,n;return e=new _e({}),{c(){P(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){R(e,t,o),n=!0},p:N,i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ie(a,e){let n,t,o;return t=new Pe({props:{coffeeBeansName:e[3].name,href:J.recipeItem(e[14].id),recipe:e[14]}}),{key:a,first:null,c(){n=z(),P(t.$$.fragment),this.h()},l(s){n=z(),I(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,l){D(s,n,l),R(t,s,l),o=!0},p(s,l){e=s;const r={};l&8&&(r.coffeeBeansName=e[3].name),l&16&&(r.href=J.recipeItem(e[14].id)),l&16&&(r.recipe=e[14]),t.$set(r)},i(s){o||(C(t.$$.fragment,s),o=!0)},o(s){M(t.$$.fragment,s),o=!1},d(s){s&&b(n),T(t,s)}}}function rt(a){let e,n,t,o,s,l;function r(u,w){return u[3]===void 0?Je:u[3]==="CoffeeBeansNotFound"?Ge:Ye}let c=r(a),i=c(a);const f=[Ze,Xe,Qe],p=[];function v(u,w){return u[3]===void 0?0:u[3]==="CoffeeBeansNotFound"?1:2}return t=v(a),o=p[t]=f[t](a),{c(){i.c(),e=z(),n=O(),o.c(),s=z()},l(u){const w=ge("svelte-1xzg8rg",document.head);i.l(w),e=z(),w.forEach(b),n=L(u),o.l(u),s=z()},m(u,w){i.m(document.head,null),E(document.head,e),D(u,n,w),p[t].m(u,w),D(u,s,w),l=!0},p(u,[w]){c!==(c=r(u))&&(i.d(1),i=c(u),i&&(i.c(),i.m(e.parentNode,e)));let d=t;t=v(u),t===d?p[t].p(u,w):(ne(),M(p[d],1,1,()=>{p[d]=null}),te(),o=p[t],o?o.p(u,w):(o=p[t]=f[t](u),o.c()),C(o,1),o.m(s.parentNode,s))},i(u){l||(C(o),l=!0)},o(u){M(o),l=!1},d(u){u&&(b(n),b(s)),i.d(u),b(e),p[t].d(u)}}}function it(a,e,n){let{data:t}=e,o,s,l,r,c;async function i(){if(r instanceof me){const _=await Se(r.id);await Ce(r.id),ce(J.home);const y=_===1?"recipe":"recipes",m=_>0?` and ${_} ${y}`:"";pe(`Coffee beans "${r.name}"`+m+" deleted.")}}function f(_,y){n(4,c=c.sort(y))}async function p(){const _=await Me(t.coffeeBeansName);if(_===void 0){n(3,r="CoffeeBeansNotFound");return}n(3,r=_);const y=await De(r.id);n(4,c=y.sort(Be))}const v=()=>l("open");function u(_){l=_,n(2,l)}function w(_){o=_,n(0,o)}const d=()=>{o("open"),s("closed")};function g(_){s=_,n(1,s)}return a.$$set=_=>{"data"in _&&n(7,t=_.data)},a.$$.update=()=>{a.$$.dirty&128&&window.indexedDB&&p()},[o,s,l,r,c,i,f,t,v,u,w,d,g]}class Mt extends ue{constructor(e){super(),de(this,e,it,rt,fe,{data:7})}}export{Mt as component,Ct as universal};
