import{s as N,o as K,n as R}from"../chunks/scheduler.QZKnv3vM.js";import{S as O,i as V,m as C,o as b,p as k,l as $,k as d,r as w,e as B,s as g,t as I,c as y,a as M,d as p,f as v,b as x,x as E,g as _,h as P,j as D,n as L,q as z,u as G,v as q,w as J}from"../chunks/index.SYB2qcav.js";import{e as S,u as Q,o as U}from"../chunks/each.TMmm_5_o.js";import{P as W,b as X,c as Y}from"../chunks/PageHeadline.PAaPCPFD.js";import{C as Z,M as ee,s as te,a as se,A as ne}from"../chunks/AddDemoCoffeeBeans_PageBlock.O7caEFYF.js";import{r as F}from"../chunks/routes.smfzXBee.js";import{F as ae}from"../chunks/FlexRow.S1Ti9Shd.js";function re(c){let e,n=c[0].name+"",t,s,a,o,u,i=c[1]===1?"recipe":"recipes",m;return{c(){e=B("h5"),t=I(n),s=g(),a=B("p"),o=I(c[1]),u=g(),m=I(i),this.h()},l(r){e=y(r,"H5",{class:!0});var f=M(e);t=x(f,n),f.forEach(p),s=v(r),a=y(r,"P",{class:!0});var l=M(a);o=x(l,c[1]),u=v(l),m=x(l,i),l.forEach(p),this.h()},h(){E(e,"class","svelte-1w6mxay"),E(a,"class","recipes-count svelte-1w6mxay")},m(r,f){_(r,e,f),P(e,t),_(r,s,f),_(r,a,f),P(a,o),P(a,u),P(a,m)},p(r,f){f&1&&n!==(n=r[0].name+"")&&D(t,n),f&2&&D(o,r[1]),f&2&&i!==(i=r[1]===1?"recipe":"recipes")&&D(m,i)},d(r){r&&(p(e),p(s),p(a))}}}function le(c){let e,n,t,s,a=c[0].description+"",o,u;return n=new ae({props:{$$slots:{default:[re]},$$scope:{ctx:c}}}),{c(){e=B("div"),C(n.$$.fragment),t=g(),s=B("p"),o=I(a),this.h()},l(i){e=y(i,"DIV",{class:!0});var m=M(e);b(n.$$.fragment,m),m.forEach(p),t=v(i),s=y(i,"P",{class:!0});var r=M(s);o=x(r,a),r.forEach(p),this.h()},h(){E(e,"class","flex-row svelte-1w6mxay"),E(s,"class","svelte-1w6mxay")},m(i,m){_(i,e,m),k(n,e,null),_(i,t,m),_(i,s,m),P(s,o),u=!0},p(i,m){const r={};m&11&&(r.$$scope={dirty:m,ctx:i}),n.$set(r),(!u||m&1)&&a!==(a=i[0].description+"")&&D(o,a)},i(i){u||($(n.$$.fragment,i),u=!0)},o(i){d(n.$$.fragment,i),u=!1},d(i){i&&(p(e),p(t),p(s)),w(n)}}}function oe(c){let e,n;return e=new Z({props:{href:c[2],$$slots:{default:[le]},$$scope:{ctx:c}}}),{c(){C(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){k(e,t,s),n=!0},p(t,[s]){const a={};s&4&&(a.href=t[2]),s&11&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function fe(c,e,n){let{item:t}=e,{recipeCount:s=0}=e,{href:a}=e;return c.$$set=o=>{"item"in o&&n(0,t=o.item),"recipeCount"in o&&n(1,s=o.recipeCount),"href"in o&&n(2,a=o.href)},[t,s,a]}class ie extends O{constructor(e){super(),V(this,e,fe,oe,N,{item:0,recipeCount:1,href:2})}}function T(c,e,n){const t=c.slice();return t[1]=e[n],t}function ce(c){let e;return{c(){e=I("Coffee beans")},l(n){e=x(n,"Coffee beans")},m(n,t){_(n,e,t)},d(n){n&&p(e)}}}function ue(c){let e,n="Sorted by latest recipe date",t,s=[],a=new Map,o,u,i=S(c[0]);const m=r=>r[1].id;for(let r=0;r<i.length;r+=1){let f=T(c,i,r),l=m(f);a.set(l,s[r]=j(l,f))}return{c(){e=B("h2"),e.textContent=n,t=g();for(let r=0;r<s.length;r+=1)s[r].c();o=q(),this.h()},l(r){e=y(r,"H2",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-16exyv5"&&(e.textContent=n),t=v(r);for(let f=0;f<s.length;f+=1)s[f].l(r);o=q(),this.h()},h(){E(e,"class","svelte-12ofamk")},m(r,f){_(r,e,f),_(r,t,f);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(r,f);_(r,o,f),u=!0},p(r,f){f&1&&(i=S(r[0]),G(),s=Q(s,f,m,1,r,i,a,o.parentNode,U,j,o,T),z())},i(r){if(!u){for(let f=0;f<i.length;f+=1)$(s[f]);u=!0}},o(r){for(let f=0;f<s.length;f+=1)d(s[f]);u=!1},d(r){r&&(p(e),p(t),p(o));for(let f=0;f<s.length;f+=1)s[f].d(r)}}}function me(c){let e,n;return e=new ne({}),{c(){C(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,s){k(e,t,s),n=!0},p:R,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pe(c){let e,n="loading...";return{c(){e=B("p"),e.textContent=n},l(t){e=y(t,"P",{"data-svelte-h":!0}),J(e)!=="svelte-qeejp2"&&(e.textContent=n)},m(t,s){_(t,e,s)},p:R,i:R,o:R,d(t){t&&p(e)}}}function j(c,e){let n,t,s;return t=new ie({props:{href:F.coffeeBeansItem(e[1].name),item:e[1],recipeCount:e[1].recipeCount}}),{key:c,first:null,c(){n=q(),C(t.$$.fragment),this.h()},l(a){n=q(),b(t.$$.fragment,a),this.h()},h(){this.first=n},m(a,o){_(a,n,o),k(t,a,o),s=!0},p(a,o){e=a;const u={};o&1&&(u.href=F.coffeeBeansItem(e[1].name)),o&1&&(u.item=e[1]),o&1&&(u.recipeCount=e[1].recipeCount),t.$set(u)},i(a){s||($(t.$$.fragment,a),s=!0)},o(a){d(t.$$.fragment,a),s=!1},d(a){a&&p(n),w(t,a)}}}function _e(c){let e,n,t,s,a,o,u,i;n=new W({props:{$$slots:{default:[ce]},$$scope:{ctx:c}}});const m=[pe,me,ue],r=[];function f(l,h){return l[0]===void 0?0:l[0].length===0?1:2}return s=f(c),a=r[s]=m[s](c),u=new ee({props:{href:F.addRecipe()}}),{c(){e=g(),C(n.$$.fragment),t=g(),a.c(),o=g(),C(u.$$.fragment),this.h()},l(l){L("svelte-n9a09p",document.head).forEach(p),e=v(l),b(n.$$.fragment,l),t=v(l),a.l(l),o=v(l),b(u.$$.fragment,l),this.h()},h(){document.title="PourOverPotato app"},m(l,h){_(l,e,h),k(n,l,h),_(l,t,h),r[s].m(l,h),_(l,o,h),k(u,l,h),i=!0},p(l,[h]){const H={};h&16&&(H.$$scope={dirty:h,ctx:l}),n.$set(H);let A=s;s=f(l),s===A?r[s].p(l,h):(G(),d(r[A],1,1,()=>{r[A]=null}),z(),a=r[s],a?a.p(l,h):(a=r[s]=m[s](l),a.c()),$(a,1),a.m(o.parentNode,o))},i(l){i||($(n.$$.fragment,l),$(a),$(u.$$.fragment,l),i=!0)},o(l){d(n.$$.fragment,l),d(a),d(u.$$.fragment,l),i=!1},d(l){l&&(p(e),p(t),p(o)),w(n,l),r[s].d(l),w(u,l)}}}function he(c,e,n){let t;return K(()=>{X().then(s=>{Promise.all(s.map(async a=>{const o=await Y(a.id);return{...a,recipeCount:o.length,latestRecipeTimestamp:o.length>0?o.sort(te)[0].timestamp:void 0}})).then(a=>{n(0,t=a.sort(se))})})}),[t]}class we extends O{constructor(e){super(),V(this,e,he,_e,N,{})}}export{we as component};
