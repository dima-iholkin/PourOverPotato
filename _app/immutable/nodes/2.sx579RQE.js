import{s as O,o as K,n as k}from"../chunks/scheduler.ZvbRK0ck.js";import{S as V,i as z,m as y,o as I,p as E,l as $,k as d,r as R,e as v,s as g,t as B,c as b,a as q,d as m,f as C,b as P,x,g as _,h as w,j as M,n as L,q as G,u as J,v as D,w as N}from"../chunks/index.D4zfOep-.js";import{e as T,u as Q,o as U}from"../chunks/each.ggNsCiOK.js";import{P as W,c as X,d as Y}from"../chunks/PageHeadline.zjx-BUZ1.js";import{C as Z,F as ee,M as te,s as se,a as ne}from"../chunks/MyFab.RmFSIMab.js";import{r as H}from"../chunks/routes.1eZgGMMa.js";function ae(c){let e,n=c[0].name+"",t,s,a,o,u,i=c[1]===1?"recipe":"recipes",p;return{c(){e=v("h5"),t=B(n),s=g(),a=v("p"),o=B(c[1]),u=g(),p=B(i),this.h()},l(l){e=b(l,"H5",{class:!0});var f=q(e);t=P(f,n),f.forEach(m),s=C(l),a=b(l,"P",{class:!0});var r=q(a);o=P(r,c[1]),u=C(r),p=P(r,i),r.forEach(m),this.h()},h(){x(e,"class","svelte-1wwph69"),x(a,"class","recipes-count svelte-1wwph69")},m(l,f){_(l,e,f),w(e,t),_(l,s,f),_(l,a,f),w(a,o),w(a,u),w(a,p)},p(l,f){f&1&&n!==(n=l[0].name+"")&&M(t,n),f&2&&M(o,l[1]),f&2&&i!==(i=l[1]===1?"recipe":"recipes")&&M(p,i)},d(l){l&&(m(e),m(s),m(a))}}}function le(c){let e,n,t,s,a=c[0].description+"",o,u;return n=new ee({props:{$$slots:{default:[ae]},$$scope:{ctx:c}}}),{c(){e=v("div"),y(n.$$.fragment),t=g(),s=v("p"),o=B(a),this.h()},l(i){e=b(i,"DIV",{class:!0});var p=q(e);I(n.$$.fragment,p),p.forEach(m),t=C(i),s=b(i,"P",{class:!0});var l=q(s);o=P(l,a),l.forEach(m),this.h()},h(){x(e,"class","flex-row svelte-1wwph69"),x(s,"class","svelte-1wwph69")},m(i,p){_(i,e,p),E(n,e,null),_(i,t,p),_(i,s,p),w(s,o),u=!0},p(i,p){const l={};p&11&&(l.$$scope={dirty:p,ctx:i}),n.$set(l),(!u||p&1)&&a!==(a=i[0].description+"")&&M(o,a)},i(i){u||($(n.$$.fragment,i),u=!0)},o(i){d(n.$$.fragment,i),u=!1},d(i){i&&(m(e),m(t),m(s)),R(n)}}}function re(c){let e,n;return e=new Z({props:{href:c[2],$$slots:{default:[le]},$$scope:{ctx:c}}}),{c(){y(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,s){E(e,t,s),n=!0},p(t,[s]){const a={};s&4&&(a.href=t[2]),s&11&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function oe(c,e,n){let{item:t}=e,{recipeCount:s=0}=e,{href:a}=e;return c.$$set=o=>{"item"in o&&n(0,t=o.item),"recipeCount"in o&&n(1,s=o.recipeCount),"href"in o&&n(2,a=o.href)},[t,s,a]}class fe extends V{constructor(e){super(),z(this,e,oe,re,O,{item:0,recipeCount:1,href:2})}}function j(c,e,n){const t=c.slice();return t[1]=e[n],t}function ie(c){let e;return{c(){e=B("Coffee beans")},l(n){e=P(n,"Coffee beans")},m(n,t){_(n,e,t)},d(n){n&&m(e)}}}function ce(c){let e,n="Sorted by latest recipe",t,s=[],a=new Map,o,u,i=T(c[0]);const p=l=>l[1].id;for(let l=0;l<i.length;l+=1){let f=j(c,i,l),r=p(f);a.set(r,s[l]=A(r,f))}return{c(){e=v("h2"),e.textContent=n,t=g();for(let l=0;l<s.length;l+=1)s[l].c();o=D(),this.h()},l(l){e=b(l,"H2",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-21fhux"&&(e.textContent=n),t=C(l);for(let f=0;f<s.length;f+=1)s[f].l(l);o=D(),this.h()},h(){x(e,"class","svelte-12ofamk")},m(l,f){_(l,e,f),_(l,t,f);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,f);_(l,o,f),u=!0},p(l,f){f&1&&(i=T(l[0]),J(),s=Q(s,f,p,1,l,i,a,o.parentNode,U,A,o,j),G())},i(l){if(!u){for(let f=0;f<i.length;f+=1)$(s[f]);u=!0}},o(l){for(let f=0;f<s.length;f+=1)d(s[f]);u=!1},d(l){l&&(m(e),m(t),m(o));for(let f=0;f<s.length;f+=1)s[f].d(l)}}}function ue(c){let e,n="No coffee beans added yet.";return{c(){e=v("p"),e.textContent=n},l(t){e=b(t,"P",{"data-svelte-h":!0}),N(e)!=="svelte-1pt8418"&&(e.textContent=n)},m(t,s){_(t,e,s)},p:k,i:k,o:k,d(t){t&&m(e)}}}function pe(c){let e,n="loading...";return{c(){e=v("p"),e.textContent=n},l(t){e=b(t,"P",{"data-svelte-h":!0}),N(e)!=="svelte-qeejp2"&&(e.textContent=n)},m(t,s){_(t,e,s)},p:k,i:k,o:k,d(t){t&&m(e)}}}function A(c,e){let n,t,s;return t=new fe({props:{href:H.coffeeBeansItem(e[1].name),recipeCount:e[1].recipeCount,item:e[1]}}),{key:c,first:null,c(){n=D(),y(t.$$.fragment),this.h()},l(a){n=D(),I(t.$$.fragment,a),this.h()},h(){this.first=n},m(a,o){_(a,n,o),E(t,a,o),s=!0},p(a,o){e=a;const u={};o&1&&(u.href=H.coffeeBeansItem(e[1].name)),o&1&&(u.recipeCount=e[1].recipeCount),o&1&&(u.item=e[1]),t.$set(u)},i(a){s||($(t.$$.fragment,a),s=!0)},o(a){d(t.$$.fragment,a),s=!1},d(a){a&&m(n),R(t,a)}}}function me(c){let e,n,t,s,a,o,u,i;n=new W({props:{$$slots:{default:[ie]},$$scope:{ctx:c}}});const p=[pe,ue,ce],l=[];function f(r,h){return r[0]===void 0?0:r[0].length===0?1:2}return s=f(c),a=l[s]=p[s](c),u=new te({props:{href:H.addRecipe()}}),{c(){e=g(),y(n.$$.fragment),t=g(),a.c(),o=g(),y(u.$$.fragment),this.h()},l(r){L("svelte-n9a09p",document.head).forEach(m),e=C(r),I(n.$$.fragment,r),t=C(r),a.l(r),o=C(r),I(u.$$.fragment,r),this.h()},h(){document.title="PourOverPotato app"},m(r,h){_(r,e,h),E(n,r,h),_(r,t,h),l[s].m(r,h),_(r,o,h),E(u,r,h),i=!0},p(r,[h]){const S={};h&16&&(S.$$scope={dirty:h,ctx:r}),n.$set(S);let F=s;s=f(r),s===F?l[s].p(r,h):(J(),d(l[F],1,1,()=>{l[F]=null}),G(),a=l[s],a?a.p(r,h):(a=l[s]=p[s](r),a.c()),$(a,1),a.m(o.parentNode,o))},i(r){i||($(n.$$.fragment,r),$(a),$(u.$$.fragment,r),i=!0)},o(r){d(n.$$.fragment,r),d(a),d(u.$$.fragment,r),i=!1},d(r){r&&(m(e),m(t),m(o)),R(n,r),l[s].d(r),R(u,r)}}}function _e(c,e,n){let t;return K(()=>{X().then(s=>{Promise.all(s.map(async a=>{const o=await Y(a.id);return{...a,recipeCount:o.length,latestRecipeTimestamp:o.length>0?o.sort(se)[0].timestamp:void 0}})).then(a=>{n(0,t=a.sort(ne))})})}),[t]}class be extends V{constructor(e){super(),z(this,e,_e,me,O,{})}}export{be as component};
