import{s as $e,b as L,a as H,f as ue,r as Se,t as Ce,n as y}from"../chunks/scheduler.Cw1-ZcKD.js";import{S as be,i as ve,v as U,k as N,m as F,n as E,q as B,o as D,r as I,e as R,s as O,t as ae,c as P,a as X,f as z,b as oe,d as k,y as ee,z as C,g as M,h as T,D as de,A as J,B as Be,j as le,w as Y,l as De,p as ie,u as fe}from"../chunks/index.DHsbL8_X.js";import{e as ce,u as Me,o as ye}from"../chunks/each.DGQvojpB.js";import{g as Q}from"../chunks/entry.DRGciIfZ.js";import{C as Te,l as Ne,m as Fe,i as Ee,n as Ie,k as Re,o as me,q as pe,e as Pe,r as Oe,s as ze}from"../chunks/indexedDB.9t1uuO4e.js";import{s as _e,P as Ve}from"../chunks/PageHeadline.BeVZTrZl.js";import{r as K}from"../chunks/routes.BYcm90ft.js";import{S as je,R as Le}from"../chunks/SortRecipesSelect.BBDGlZJZ.js";import{A as Ke,N as qe}from"../chunks/NoItemsYetP.uUKHbJ7x.js";import{L as we}from"../chunks/Loading.BjzKhRf5.js";import{F as Ae,D as He,a as Ue}from"../chunks/FlexRow.GoYR74vG.js";import{D as We}from"../chunks/DeleteConfirmationModal.58vAVeVc.js";import{L as Ye,T as Ge}from"../chunks/Textarea.DSVAmZwN.js";import{M as Je}from"../chunks/Modal.CZBRvdiz.js";function Qe({params:a}){return{coffeeBeansName:a.name}}const It=Object.freeze(Object.defineProperty({__proto__:null,load:Qe},Symbol.toStringTag,{value:"Module"}));function Xe(a){let e;return{c(){e=ae("Coffee beans name:")},l(n){e=oe(n,"Coffee beans name:")},m(n,t){M(n,e,t)},d(n){n&&k(e)}}}function Ze(a){let e,n,t,o,r,l,i,f,c,m,$,u,s,h,d,w,V,p,_="Save",b,q,W;t=new Ye({props:{for_:"name",valid:!a[0],$$slots:{default:[Xe]},$$scope:{ctx:a}}});function G(v){a[22](v)}function se(v){a[23](v)}function re(v){a[24](v)}let Z={id:"description",label:"Description:",name:"description",placeholder:et};return a[1]!==void 0&&(Z.resizeTextarea=a[1]),a[7]!==void 0&&(Z.this_=a[7]),a[9]!==void 0&&(Z.value=a[9]),s=new Ge({props:Z}),L.push(()=>U(s,"resizeTextarea",G)),L.push(()=>U(s,"this_",se)),L.push(()=>U(s,"value",re)),s.$on("keydown",a[12]),{c(){e=R("form"),n=R("div"),N(t.$$.fragment),o=O(),r=R("input"),f=O(),c=R("p"),m=ae(a[10]),$=O(),u=R("div"),N(s.$$.fragment),V=O(),p=R("button"),p.textContent=_,this.h()},l(v){e=P(v,"FORM",{class:!0});var S=X(e);n=P(S,"DIV",{class:!0});var j=X(n);F(t.$$.fragment,j),o=z(j),r=P(j,"INPUT",{id:!0,autocomplete:!0,class:!0,name:!0,placeholder:!0,type:!0}),f=z(j),c=P(j,"P",{class:!0});var A=X(c);m=oe(A,a[10]),A.forEach(k),j.forEach(k),$=z(S),u=P(S,"DIV",{class:!0});var te=X(u);F(s.$$.fragment,te),te.forEach(k),V=z(S),p=P(S,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ee(p)!=="svelte-ro3ydn"&&(p.textContent=_),S.forEach(k),this.h()},h(){C(r,"id","name"),C(r,"autocomplete","off"),C(r,"class",l=ue(a[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"),C(r,"name","name"),C(r,"placeholder",i=a[0]?"":"Example: Rwanda Mabanza"),C(r,"type","text"),C(c,"class","mt-2 text-sm text-red-600 dark:text-red-500"),C(n,"class","mb-5"),C(u,"class","my-div mb-5 svelte-15jwmuc"),C(p,"class","button-submit svelte-15jwmuc"),C(p,"type","submit"),C(e,"class","mx-auto")},m(v,S){M(v,e,S),T(e,n),E(t,n,null),T(n,o),T(n,r),a[20](r),de(r,a[8]),T(n,f),T(n,c),T(c,m),T(e,$),T(e,u),E(s,u,null),T(e,V),T(e,p),a[25](p),a[26](e),b=!0,q||(W=[J(r,"input",a[21]),J(r,"focusin",a[17]),J(r,"input",a[15]),J(r,"keydown",a[11]),J(p,"keydown",a[16]),J(e,"submit",Be(a[13]))],q=!0)},p(v,S){const j={};S&1&&(j.valid=!v[0]),S&1073741824&&(j.$$scope={dirty:S,ctx:v}),t.$set(j),(!b||S&1&&l!==(l=ue(v[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"))&&C(r,"class",l),(!b||S&1&&i!==(i=v[0]?"":"Example: Rwanda Mabanza"))&&C(r,"placeholder",i),S&256&&r.value!==v[8]&&de(r,v[8]),(!b||S&1024)&&le(m,v[10]);const A={};!h&&S&2&&(h=!0,A.resizeTextarea=v[1],H(()=>h=!1)),!d&&S&128&&(d=!0,A.this_=v[7],H(()=>d=!1)),!w&&S&512&&(w=!0,A.value=v[9],H(()=>w=!1)),s.$set(A)},i(v){b||(B(t.$$.fragment,v),B(s.$$.fragment,v),b=!0)},o(v){D(t.$$.fragment,v),D(s.$$.fragment,v),b=!1},d(v){v&&k(e),I(t),a[20](null),I(s),a[25](null),a[26](null),q=!1,Se(W)}}}function xe(a){let e,n,t,o;function r(f){a[28](f)}function l(f){a[29](f)}let i={onFocusReverse:a[27],onStateChange:a[14],title:"Edit coffee beans",$$slots:{default:[Ze]},$$scope:{ctx:a}};return a[2]!==void 0&&(i.setFocus=a[2]),a[3]!==void 0&&(i.setState=a[3]),e=new Je({props:i}),L.push(()=>U(e,"setFocus",r)),L.push(()=>U(e,"setState",l)),{c(){N(e.$$.fragment)},l(f){F(e.$$.fragment,f)},m(f,c){E(e,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.onFocusReverse=f[27]),c&1073743859&&(m.$$scope={dirty:c,ctx:f}),!n&&c&4&&(n=!0,m.setFocus=f[2],H(()=>n=!1)),!t&&c&8&&(t=!0,m.setState=f[3],H(()=>t=!1)),e.$set(m)},i(f){o||(B(e.$$.fragment,f),o=!0)},o(f){D(e.$$.fragment,f),o=!1},d(f){I(e,f)}}}const et="Example: Washed process. Notes: plum, cherry.";function tt(a,e,n){const t=g=>{i(g)};let{item:o}=e,r,l,i,f,c,m,$,u=o.name??"",s=o.description??"",h="",d=!1;function w(g){g.key==="Enter"&&(g.preventDefault(),$.focus())}function V(g){g.key==="Enter"&&(g.metaKey||g.ctrlKey)&&(g.preventDefault(),f.requestSubmit())}async function p(){const g=new Te({name:u,description:s},o.id),x=Ne.create(g);if(x==="ValidationFailed_NameMustBeAtLeast3CharsLong"){n(0,d=!0),n(10,h="Name must be at least 3 characters long.");return}const ne=await Fe(x);if(ne==="Failure_NameAlreadyExist"){n(0,d=!0),n(10,h="Coffee beans with this name exist already.");return}Ee(`Coffee beans "${ne.name}" changes saved.`),n(18,o=ne),i("closed"),Q(K.home).then(()=>Q(K.coffeeBeansItem(ne.name)))}function _(g){g==="open"&&(n(8,u=o.name??""),n(9,s=o.description??""),n(10,h=""),Ce().then(()=>{r(),c.focus()}))}function b(){d&&(n(0,d=!1),n(10,h=""))}function q(g){g.key==="Tab"&&g.shiftKey===!1&&(g.preventDefault(),l())}function W(g){const x=g.currentTarget.value.length;c.setSelectionRange(x,x)}function G(g){L[g?"unshift":"push"](()=>{c=g,n(5,c)})}function se(){u=this.value,n(8,u)}function re(g){r=g,n(1,r)}function Z(g){$=g,n(7,$)}function v(g){s=g,n(9,s)}function S(g){L[g?"unshift":"push"](()=>{m=g,n(6,m)})}function j(g){L[g?"unshift":"push"](()=>{f=g,n(4,f)})}const A=()=>m.focus();function te(g){l=g,n(2,l)}function ke(g){i=g,n(3,i)}return a.$$set=g=>{"item"in g&&n(18,o=g.item)},a.$$.update=()=>{a.$$.dirty&1&&d===!1&&n(10,h="")},[d,r,l,i,f,c,m,$,u,s,h,w,V,p,_,b,q,W,o,t,G,se,re,Z,v,S,j,A,te,ke]}class nt extends be{constructor(e){super(),ve(this,e,tt,xe,$e,{setModalState:19,item:18})}get setModalState(){return this.$$.ctx[19]}}function he(a,e,n){const t=a.slice();return t[15]=e[n],t}function at(a){return document.title=a[5].name+" - PourOverPotato app",{c:y,l:y,m:y,d:y}}function ot(a){return{c(){this.h()},l(e){this.h()},h(){document.title="404 Not Found - PourOverPotato app"},m:y,d:y}}function st(a){return{c(){this.h()},l(e){this.h()},h(){document.title="loading... - PourOverPotato app"},m:y,d:y}}function rt(a){let e,n,t,o=a[5].description+"",r,l,i,f,c,m,$;e=new Ae({props:{$$slots:{default:[mt]},$$scope:{ctx:a}}});const u=[ht,_t,pt],s=[];function h(d,w){return d[0]===void 0?0:d[0].length===0?1:2}return i=h(a),f=s[i]=u[i](a),m=new Ke({props:{href:K.addRecipe(a[5].name)}}),{c(){N(e.$$.fragment),n=O(),t=R("p"),r=ae(o),l=O(),f.c(),c=O(),N(m.$$.fragment),this.h()},l(d){F(e.$$.fragment,d),n=z(d),t=P(d,"P",{class:!0});var w=X(t);r=oe(w,o),w.forEach(k),l=z(d),f.l(d),c=z(d),F(m.$$.fragment,d),this.h()},h(){C(t,"class","coffee-beans-description svelte-1vu3dn8")},m(d,w){E(e,d,w),M(d,n,w),M(d,t,w),T(t,r),M(d,l,w),s[i].m(d,w),M(d,c,w),E(m,d,w),$=!0},p(d,w){const V={};w&262204&&(V.$$scope={dirty:w,ctx:d}),e.$set(V),(!$||w&32)&&o!==(o=d[5].description+"")&&le(r,o);let p=i;i=h(d),i===p?s[i].p(d,w):(fe(),D(s[p],1,1,()=>{s[p]=null}),ie(),f=s[i],f?f.p(d,w):(f=s[i]=u[i](d),f.c()),B(f,1),f.m(c.parentNode,c));const _={};w&32&&(_.href=K.addRecipe(d[5].name)),m.$set(_)},i(d){$||(B(e.$$.fragment,d),B(f),B(m.$$.fragment,d),$=!0)},o(d){D(e.$$.fragment,d),D(f),D(m.$$.fragment,d),$=!1},d(d){d&&(k(n),k(t),k(l),k(c)),I(e,d),s[i].d(d),I(m,d)}}}function lt(a){let e,n="<h1>404</h1> <p>Coffee beans not found.</p>";return{c(){e=R("div"),e.innerHTML=n,this.h()},l(t){e=P(t,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-akmamj"&&(e.innerHTML=n),this.h()},h(){C(e,"class","loading-position svelte-1vu3dn8")},m(t,o){M(t,e,o)},p:y,i:y,o:y,d(t){t&&k(e)}}}function it(a){let e,n,t;return n=new we({}),{c(){e=R("div"),N(n.$$.fragment),this.h()},l(o){e=P(o,"DIV",{class:!0});var r=X(e);F(n.$$.fragment,r),r.forEach(k),this.h()},h(){C(e,"class","loading-position svelte-1vu3dn8")},m(o,r){M(o,e,r),E(n,e,null),t=!0},p:y,i(o){t||(B(n.$$.fragment,o),t=!0)},o(o){D(n.$$.fragment,o),t=!1},d(o){o&&k(e),I(n)}}}function ft(a){let e=a[5].name+"",n;return{c(){n=ae(e)},l(t){n=oe(t,e)},m(t,o){M(t,n,o)},p(t,o){o&32&&e!==(e=t[5].name+"")&&le(n,e)},d(t){t&&k(n)}}}function ut(a){let e,n;return e=new Ue({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",a[11]),{c(){N(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,o){E(e,t,o),n=!0},p:y,i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function dt(a){let e,n="Please confirm you want to delete these coffee beans.",t,o,r="The dependent recipes will be deleted too.";return{c(){e=R("p"),e.textContent=n,t=O(),o=R("p"),o.textContent=r},l(l){e=P(l,"P",{"data-svelte-h":!0}),ee(e)!=="svelte-jtslft"&&(e.textContent=n),t=z(l),o=P(l,"P",{"data-svelte-h":!0}),ee(o)!=="svelte-puw9d7"&&(o.textContent=r)},m(l,i){M(l,e,i),M(l,t,i),M(l,o,i)},p:y,d(l){l&&(k(e),k(t),k(o))}}}function ct(a){let e,n,t;function o(l){a[10](l)}let r={slot:"modal",onDeleteClick:a[6],$$slots:{default:[dt]},$$scope:{ctx:a}};return a[2]!==void 0&&(r.setModalState=a[2]),e=new We({props:r}),L.push(()=>U(e,"setModalState",o)),{c(){N(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,i){E(e,l,i),t=!0},p(l,i){const f={};i&262144&&(f.$$scope={dirty:i,ctx:l}),!n&&i&4&&(n=!0,f.setModalState=l[2],H(()=>n=!1)),e.$set(f)},i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){I(e,l)}}}function mt(a){let e,n,t,o,r="Edit",l,i,f,c,m,$,u,s,h;e=new Ve({props:{$$slots:{default:[ft]},$$scope:{ctx:a}}});function d(_){a[9](_)}let w={item:a[5]};a[4]!==void 0&&(w.setModalState=a[4]),i=new nt({props:w}),L.push(()=>U(i,"setModalState",d));function V(_){a[12](_)}let p={$$slots:{modal:[ct],button:[ut]},$$scope:{ctx:a}};return a[3]!==void 0&&(p.setDropdownState=a[3]),m=new He({props:p}),L.push(()=>U(m,"setDropdownState",V)),{c(){N(e.$$.fragment),n=O(),t=R("div"),o=R("button"),o.textContent=r,l=O(),N(i.$$.fragment),c=O(),N(m.$$.fragment),this.h()},l(_){F(e.$$.fragment,_),n=z(_),t=P(_,"DIV",{class:!0});var b=X(t);o=P(b,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ee(o)!=="svelte-gleq7e"&&(o.textContent=r),l=z(b),F(i.$$.fragment,b),c=z(b),F(m.$$.fragment,b),b.forEach(k),this.h()},h(){C(o,"class","edit-button svelte-1vu3dn8"),C(o,"type","button"),C(t,"class","menu-container svelte-1vu3dn8")},m(_,b){E(e,_,b),M(_,n,b),M(_,t,b),T(t,o),T(t,l),E(i,t,null),T(t,c),E(m,t,null),u=!0,s||(h=J(o,"click",a[8]),s=!0)},p(_,b){const q={};b&262176&&(q.$$scope={dirty:b,ctx:_}),e.$set(q);const W={};b&32&&(W.item=_[5]),!f&&b&16&&(f=!0,W.setModalState=_[4],H(()=>f=!1)),i.$set(W);const G={};b&262156&&(G.$$scope={dirty:b,ctx:_}),!$&&b&8&&($=!0,G.setDropdownState=_[3],H(()=>$=!1)),m.$set(G)},i(_){u||(B(e.$$.fragment,_),B(i.$$.fragment,_),B(m.$$.fragment,_),u=!0)},o(_){D(e.$$.fragment,_),D(i.$$.fragment,_),D(m.$$.fragment,_),u=!1},d(_){_&&(k(n),k(t)),I(e,_),I(i),I(m),s=!1,h()}}}function pt(a){let e,n,t,o=[],r=new Map,l,i;function f(u){a[13](u)}let c={};a[1]!==void 0&&(c.sortOrderValue=a[1]),e=new je({props:c}),L.push(()=>U(e,"sortOrderValue",f));let m=ce(a[0]);const $=u=>u[15].id;for(let u=0;u<m.length;u+=1){let s=he(a,m,u),h=$(s);r.set(h,o[u]=ge(h,s))}return{c(){N(e.$$.fragment),t=O();for(let u=0;u<o.length;u+=1)o[u].c();l=Y()},l(u){F(e.$$.fragment,u),t=z(u);for(let s=0;s<o.length;s+=1)o[s].l(u);l=Y()},m(u,s){E(e,u,s),M(u,t,s);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(u,s);M(u,l,s),i=!0},p(u,s){const h={};!n&&s&2&&(n=!0,h.sortOrderValue=u[1],H(()=>n=!1)),e.$set(h),s&33&&(m=ce(u[0]),fe(),o=Me(o,s,$,1,u,m,r,l.parentNode,ye,ge,l,he),ie())},i(u){if(!i){B(e.$$.fragment,u);for(let s=0;s<m.length;s+=1)B(o[s]);i=!0}},o(u){D(e.$$.fragment,u);for(let s=0;s<o.length;s+=1)D(o[s]);i=!1},d(u){u&&(k(t),k(l)),I(e,u);for(let s=0;s<o.length;s+=1)o[s].d(u)}}}function _t(a){let e,n;return e=new qe({}),{c(){N(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,o){E(e,t,o),n=!0},p:y,i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function ht(a){let e,n;return e=new we({}),{c(){N(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,o){E(e,t,o),n=!0},p:y,i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function ge(a,e){let n,t,o;return t=new Le({props:{coffeeBeansName:e[5].name,href:K.recipeItem(e[15].id),recipe:e[15]}}),{key:a,first:null,c(){n=Y(),N(t.$$.fragment),this.h()},l(r){n=Y(),F(t.$$.fragment,r),this.h()},h(){this.first=n},m(r,l){M(r,n,l),E(t,r,l),o=!0},p(r,l){e=r;const i={};l&32&&(i.coffeeBeansName=e[5].name),l&1&&(i.href=K.recipeItem(e[15].id)),l&1&&(i.recipe=e[15]),t.$set(i)},i(r){o||(B(t.$$.fragment,r),o=!0)},o(r){D(t.$$.fragment,r),o=!1},d(r){r&&k(n),I(t,r)}}}function gt(a){let e,n,t,o,r,l;function i(s,h){return s[5]===void 0?st:s[5]==="CoffeeBeansNotFound"?ot:at}let f=i(a),c=f(a);const m=[it,lt,rt],$=[];function u(s,h){return s[5]===void 0?0:s[5]==="CoffeeBeansNotFound"?1:2}return t=u(a),o=$[t]=m[t](a),{c(){c.c(),e=Y(),n=O(),o.c(),r=Y()},l(s){const h=De("svelte-1xzg8rg",document.head);c.l(h),e=Y(),h.forEach(k),n=z(s),o.l(s),r=Y()},m(s,h){c.m(document.head,null),T(document.head,e),M(s,n,h),$[t].m(s,h),M(s,r,h),l=!0},p(s,[h]){f!==(f=i(s))&&(c.d(1),c=f(s),c&&(c.c(),c.m(e.parentNode,e)));let d=t;t=u(s),t===d?$[t].p(s,h):(fe(),D($[d],1,1,()=>{$[d]=null}),ie(),o=$[t],o?o.p(s,h):(o=$[t]=m[t](s),o.c()),B(o,1),o.m(r.parentNode,r))},i(s){l||(B(o),l=!0)},o(s){D(o),l=!1},d(s){s&&(k(n),k(r)),c.d(s),k(e),$[t].d(s)}}}function $t(a,e,n){let{data:t}=e,o,r,l,i,f,c;async function m(){if(i===void 0||i==="CoffeeBeansNotFound")return;const p=i,_=await me(p.id,!0);await pe(p.id,!0,p),Q(K.home);const b=_===1?"recipe":"recipes",q=_>0?` and ${_} ${b}`:"";Pe(`Coffee beans "${p.name}"`+q+" deleted.",async()=>{await Oe(p),await ze(p.id),Q(K.coffeeBeansItem(p.name)).then(()=>Q(K.home))},async()=>{await me(p.id),await pe(p.id),Q(K.coffeeBeansItem(p.name)).then(()=>Q(K.home))})}async function $(){const p=await Ie(t.coffeeBeansName);if(p===void 0){n(5,i="CoffeeBeansNotFound");return}n(5,i=p);const _=await Re(i.id);n(0,f=_.sort(_e))}const u=()=>l("open");function s(p){l=p,n(4,l)}function h(p){o=p,n(2,o)}const d=()=>{o("open"),r("closed")};function w(p){r=p,n(3,r)}function V(p){c=p,n(1,c)}return a.$$set=p=>{"data"in p&&n(7,t=p.data)},a.$$.update=()=>{a.$$.dirty&3&&f&&n(0,f=f.sort((c==null?void 0:c.sortOrderFunc)??_e)),a.$$.dirty&128&&window.indexedDB&&$()},[f,c,o,r,l,i,m,t,u,s,h,d,w,V]}class Rt extends be{constructor(e){super(),ve(this,e,$t,gt,$e,{data:7})}}export{Rt as component,It as universal};
