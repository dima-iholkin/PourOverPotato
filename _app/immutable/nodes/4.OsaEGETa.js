import{s as me,b as A,a as G,f as se,r as $e,t as ge,n as N}from"../chunks/scheduler.vcOl-ZmV.js";import{S as pe,i as _e,v as J,k as I,m as P,n as R,q as B,o as M,r as T,e as O,s as V,t as x,c as F,a as Y,f as j,b as ee,d as w,z as Z,y as S,g as D,h as E,C as re,A as X,B as be,j as te,w as H,l as ve,p as ne,u as ae}from"../chunks/index.Cssh76hr.js";import{e as le,u as we,o as ke}from"../chunks/each.Y9tOFi6h.js";import{g as W}from"../chunks/entry.kD8zA7gH.js";import{C as Ce,l as Se,m as Be,i as Me,n as De,k as ye,o as ie,q as fe,e as Ne,r as Ee,s as Ie}from"../chunks/indexedDB.DSM7SfQo.js";import{s as ue,A as Pe,N as Re}from"../chunks/NoItemsYetP.dNabnttE.js";import{r as L}from"../chunks/routes.4PclK729.js";import{S as Te,R as Oe}from"../chunks/SortRecipesSelect.IrVPKTS-.js";import{L as he}from"../chunks/Loading.Qg4qLUvP.js";import{D as Fe,a as Ve}from"../chunks/DropdownMenuItem.MIVn0qp8.js";import{F as je}from"../chunks/FlexRow.xptY61V6.js";import{D as Le}from"../chunks/DeleteConfirmationModal.4k60hAfm.js";import{P as qe}from"../chunks/PageHeadline.nemWhGO-.js";import{L as ze,T as Ae}from"../chunks/Textarea.PgoFlOOt.js";import{M as He}from"../chunks/Modal.YKr32guJ.js";function Ke({params:o}){return{coffeeBeansName:o.name}}const yt=Object.freeze(Object.defineProperty({__proto__:null,load:Ke},Symbol.toStringTag,{value:"Module"}));function Ue(o){let e;return{c(){e=x("Coffee beans name:")},l(n){e=ee(n,"Coffee beans name:")},m(n,t){D(n,e,t)},d(n){n&&w(e)}}}function We(o){let e,n,t,a,l,r,i,d,m,p,$,f,s,_,u,b,y,h="Save",c,k,z;t=new ze({props:{for_:"name",valid:!o[0],$$slots:{default:[Ue]},$$scope:{ctx:o}}});function K(v){o[17](v)}function U(v){o[18](v)}let g={id:"description",label:"Description:",name:"description",placeholder:Ge};return o[3]!==void 0&&(g.this_=o[3]),o[6]!==void 0&&(g.value=o[6]),s=new Ae({props:g}),A.push(()=>J(s,"this_",K)),A.push(()=>J(s,"value",U)),s.$on("keydown",o[9]),{c(){e=O("form"),n=O("div"),I(t.$$.fragment),a=V(),l=O("input"),d=V(),m=O("p"),p=x(o[7]),$=V(),f=O("div"),I(s.$$.fragment),b=V(),y=O("button"),y.textContent=h,this.h()},l(v){e=F(v,"FORM",{class:!0});var C=Y(e);n=F(C,"DIV",{class:!0});var q=Y(n);P(t.$$.fragment,q),a=j(q),l=F(q,"INPUT",{id:!0,autocomplete:!0,class:!0,name:!0,placeholder:!0,type:!0}),d=j(q),m=F(q,"P",{class:!0});var Q=Y(m);p=ee(Q,o[7]),Q.forEach(w),q.forEach(w),$=j(C),f=F(C,"DIV",{class:!0});var oe=Y(f);P(s.$$.fragment,oe),oe.forEach(w),b=j(C),y=F(C,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Z(y)!=="svelte-j4uhei"&&(y.textContent=h),C.forEach(w),this.h()},h(){S(l,"id","name"),S(l,"autocomplete","off"),S(l,"class",r=se(o[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"),S(l,"name","name"),S(l,"placeholder",i=o[0]?"":"Example: Rwanda Mabanza"),S(l,"type","text"),S(m,"class","mt-2 text-sm text-red-600 dark:text-red-500"),S(n,"class","mb-5"),S(f,"class","my-div mb-5 svelte-15jwmuc"),S(y,"class","button-submit svelte-15jwmuc"),S(y,"type","submit"),S(e,"class","mx-auto")},m(v,C){D(v,e,C),E(e,n),R(t,n,null),E(n,a),E(n,l),o[15](l),re(l,o[5]),E(n,d),E(n,m),E(m,p),E(e,$),E(e,f),R(s,f,null),E(e,b),E(e,y),o[19](e),c=!0,k||(z=[X(l,"input",o[16]),X(l,"input",o[12]),X(l,"keydown",o[8]),X(e,"submit",be(o[10]))],k=!0)},p(v,C){const q={};C&1&&(q.valid=!v[0]),C&2097152&&(q.$$scope={dirty:C,ctx:v}),t.$set(q),(!c||C&1&&r!==(r=se(v[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"))&&S(l,"class",r),(!c||C&1&&i!==(i=v[0]?"":"Example: Rwanda Mabanza"))&&S(l,"placeholder",i),C&32&&l.value!==v[5]&&re(l,v[5]),(!c||C&128)&&te(p,v[7]);const Q={};!_&&C&8&&(_=!0,Q.this_=v[3],G(()=>_=!1)),!u&&C&64&&(u=!0,Q.value=v[6],G(()=>u=!1)),s.$set(Q)},i(v){c||(B(t.$$.fragment,v),B(s.$$.fragment,v),c=!0)},o(v){M(t.$$.fragment,v),M(s.$$.fragment,v),c=!1},d(v){v&&w(e),T(t),o[15](null),T(s),o[19](null),k=!1,$e(z)}}}function Ye(o){let e,n,t;function a(r){o[20](r)}let l={onStateChange:o[11],title:"Edit coffee beans",$$slots:{default:[We]},$$scope:{ctx:o}};return o[1]!==void 0&&(l.setState=o[1]),e=new He({props:l}),A.push(()=>J(e,"setState",a)),{c(){I(e.$$.fragment)},l(r){P(e.$$.fragment,r)},m(r,i){R(e,r,i),t=!0},p(r,[i]){const d={};i&2097405&&(d.$$scope={dirty:i,ctx:r}),!n&&i&2&&(n=!0,d.setState=r[1],G(()=>n=!1)),e.$set(d)},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}const Ge="Example: Washed process. Notes: plum, cherry.";function Je(o,e,n){const t=g=>{l(g)};let{item:a}=e,l,r,i,d,m=a.name??"",p=a.description??"",$="",f=!1;function s(g){g.key==="Enter"&&(g.preventDefault(),i.focus())}function _(g){g.key==="Enter"&&(g.metaKey||g.ctrlKey)&&(g.preventDefault(),d.requestSubmit())}async function u(){const g=new Ce({name:m,description:p},a.id),v=Se.create(g);if(v==="ValidationFailed_NameMustBeAtLeast3CharsLong"){n(0,f=!0),n(7,$="Name must be at least 3 characters long.");return}const C=await Be(v);if(C==="Failure_NameAlreadyExist"){n(0,f=!0),n(7,$="Coffee beans with this name exist already.");return}Me(`Coffee beans "${C.name}" changes saved.`),n(13,a=C),l("closed"),W(L.home).then(()=>W(L.coffeeBeansItem(C.name)))}function b(g){g==="open"&&ge().then(()=>{i.focus(),i.blur()}),g==="closed"&&(n(5,m=a.name??""),n(6,p=a.description??""),n(7,$=""))}function y(){f&&(n(0,f=!1),n(7,$=""))}function h(g){A[g?"unshift":"push"](()=>{r=g,n(2,r)})}function c(){m=this.value,n(5,m)}function k(g){i=g,n(3,i)}function z(g){p=g,n(6,p)}function K(g){A[g?"unshift":"push"](()=>{d=g,n(4,d)})}function U(g){l=g,n(1,l)}return o.$$set=g=>{"item"in g&&n(13,a=g.item)},o.$$.update=()=>{o.$$.dirty&1&&f===!1&&n(7,$="")},[f,l,r,i,d,m,p,$,s,_,u,b,y,a,t,h,c,k,z,K,U]}class Qe extends pe{constructor(e){super(),_e(this,e,Je,Ye,me,{setModalState:14,item:13})}get setModalState(){return this.$$.ctx[14]}}function ce(o,e,n){const t=o.slice();return t[15]=e[n],t}function Xe(o){return document.title=o[5].name+" - PourOverPotato app",{c:N,l:N,m:N,d:N}}function Ze(o){return{c(){this.h()},l(e){this.h()},h(){document.title="404 Not Found - PourOverPotato app"},m:N,d:N}}function xe(o){return{c(){this.h()},l(e){this.h()},h(){document.title="loading... - PourOverPotato app"},m:N,d:N}}function et(o){let e,n,t,a=o[5].description+"",l,r,i,d,m,p,$;e=new je({props:{$$slots:{default:[lt]},$$scope:{ctx:o}}});const f=[ut,ft,it],s=[];function _(u,b){return u[0]===void 0?0:u[0].length===0?1:2}return i=_(o),d=s[i]=f[i](o),p=new Pe({props:{href:L.addRecipe(o[5].name)}}),{c(){I(e.$$.fragment),n=V(),t=O("p"),l=x(a),r=V(),d.c(),m=V(),I(p.$$.fragment),this.h()},l(u){P(e.$$.fragment,u),n=j(u),t=F(u,"P",{class:!0});var b=Y(t);l=ee(b,a),b.forEach(w),r=j(u),d.l(u),m=j(u),P(p.$$.fragment,u),this.h()},h(){S(t,"class","coffee-beans-description svelte-1vu3dn8")},m(u,b){R(e,u,b),D(u,n,b),D(u,t,b),E(t,l),D(u,r,b),s[i].m(u,b),D(u,m,b),R(p,u,b),$=!0},p(u,b){const y={};b&262204&&(y.$$scope={dirty:b,ctx:u}),e.$set(y),(!$||b&32)&&a!==(a=u[5].description+"")&&te(l,a);let h=i;i=_(u),i===h?s[i].p(u,b):(ae(),M(s[h],1,1,()=>{s[h]=null}),ne(),d=s[i],d?d.p(u,b):(d=s[i]=f[i](u),d.c()),B(d,1),d.m(m.parentNode,m));const c={};b&32&&(c.href=L.addRecipe(u[5].name)),p.$set(c)},i(u){$||(B(e.$$.fragment,u),B(d),B(p.$$.fragment,u),$=!0)},o(u){M(e.$$.fragment,u),M(d),M(p.$$.fragment,u),$=!1},d(u){u&&(w(n),w(t),w(r),w(m)),T(e,u),s[i].d(u),T(p,u)}}}function tt(o){let e,n="<h1>404</h1> <p>Coffee beans not found.</p>";return{c(){e=O("div"),e.innerHTML=n,this.h()},l(t){e=F(t,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-akmamj"&&(e.innerHTML=n),this.h()},h(){S(e,"class","loading-position svelte-1vu3dn8")},m(t,a){D(t,e,a)},p:N,i:N,o:N,d(t){t&&w(e)}}}function nt(o){let e,n,t;return n=new he({}),{c(){e=O("div"),I(n.$$.fragment),this.h()},l(a){e=F(a,"DIV",{class:!0});var l=Y(e);P(n.$$.fragment,l),l.forEach(w),this.h()},h(){S(e,"class","loading-position svelte-1vu3dn8")},m(a,l){D(a,e,l),R(n,e,null),t=!0},p:N,i(a){t||(B(n.$$.fragment,a),t=!0)},o(a){M(n.$$.fragment,a),t=!1},d(a){a&&w(e),T(n)}}}function at(o){let e=o[5].name+"",n;return{c(){n=x(e)},l(t){n=ee(t,e)},m(t,a){D(t,n,a)},p(t,a){a&32&&e!==(e=t[5].name+"")&&te(n,e)},d(t){t&&w(n)}}}function ot(o){let e,n;return e=new Ve({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",o[11]),{c(){I(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){R(e,t,a),n=!0},p:N,i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function st(o){let e,n="Please confirm you want to delete these coffee beans.",t,a,l="The dependent recipes will be deleted too.";return{c(){e=O("p"),e.textContent=n,t=V(),a=O("p"),a.textContent=l},l(r){e=F(r,"P",{"data-svelte-h":!0}),Z(e)!=="svelte-jtslft"&&(e.textContent=n),t=j(r),a=F(r,"P",{"data-svelte-h":!0}),Z(a)!=="svelte-puw9d7"&&(a.textContent=l)},m(r,i){D(r,e,i),D(r,t,i),D(r,a,i)},p:N,d(r){r&&(w(e),w(t),w(a))}}}function rt(o){let e,n,t;function a(r){o[10](r)}let l={slot:"modal",onDeleteClick:o[6],$$slots:{default:[st]},$$scope:{ctx:o}};return o[2]!==void 0&&(l.setModalState=o[2]),e=new Le({props:l}),A.push(()=>J(e,"setModalState",a)),{c(){I(e.$$.fragment)},l(r){P(e.$$.fragment,r)},m(r,i){R(e,r,i),t=!0},p(r,i){const d={};i&262144&&(d.$$scope={dirty:i,ctx:r}),!n&&i&4&&(n=!0,d.setModalState=r[2],G(()=>n=!1)),e.$set(d)},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function lt(o){let e,n,t,a,l="Edit",r,i,d,m,p,$,f,s,_;e=new qe({props:{$$slots:{default:[at]},$$scope:{ctx:o}}});function u(c){o[9](c)}let b={item:o[5]};o[4]!==void 0&&(b.setModalState=o[4]),i=new Qe({props:b}),A.push(()=>J(i,"setModalState",u));function y(c){o[12](c)}let h={$$slots:{modal:[rt],button:[ot]},$$scope:{ctx:o}};return o[3]!==void 0&&(h.setDropdownState=o[3]),p=new Fe({props:h}),A.push(()=>J(p,"setDropdownState",y)),{c(){I(e.$$.fragment),n=V(),t=O("div"),a=O("button"),a.textContent=l,r=V(),I(i.$$.fragment),m=V(),I(p.$$.fragment),this.h()},l(c){P(e.$$.fragment,c),n=j(c),t=F(c,"DIV",{class:!0});var k=Y(t);a=F(k,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Z(a)!=="svelte-gleq7e"&&(a.textContent=l),r=j(k),P(i.$$.fragment,k),m=j(k),P(p.$$.fragment,k),k.forEach(w),this.h()},h(){S(a,"class","edit-button svelte-1vu3dn8"),S(a,"type","button"),S(t,"class","menu-container svelte-1vu3dn8")},m(c,k){R(e,c,k),D(c,n,k),D(c,t,k),E(t,a),E(t,r),R(i,t,null),E(t,m),R(p,t,null),f=!0,s||(_=X(a,"click",o[8]),s=!0)},p(c,k){const z={};k&262176&&(z.$$scope={dirty:k,ctx:c}),e.$set(z);const K={};k&32&&(K.item=c[5]),!d&&k&16&&(d=!0,K.setModalState=c[4],G(()=>d=!1)),i.$set(K);const U={};k&262156&&(U.$$scope={dirty:k,ctx:c}),!$&&k&8&&($=!0,U.setDropdownState=c[3],G(()=>$=!1)),p.$set(U)},i(c){f||(B(e.$$.fragment,c),B(i.$$.fragment,c),B(p.$$.fragment,c),f=!0)},o(c){M(e.$$.fragment,c),M(i.$$.fragment,c),M(p.$$.fragment,c),f=!1},d(c){c&&(w(n),w(t)),T(e,c),T(i),T(p),s=!1,_()}}}function it(o){let e,n,t,a=[],l=new Map,r,i;function d(f){o[13](f)}let m={pageName:"coffeebeans_recipes"};o[1]!==void 0&&(m.sortOrderValue=o[1]),e=new Te({props:m}),A.push(()=>J(e,"sortOrderValue",d));let p=le(o[0]);const $=f=>f[15].id;for(let f=0;f<p.length;f+=1){let s=ce(o,p,f),_=$(s);l.set(_,a[f]=de(_,s))}return{c(){I(e.$$.fragment),t=V();for(let f=0;f<a.length;f+=1)a[f].c();r=H()},l(f){P(e.$$.fragment,f),t=j(f);for(let s=0;s<a.length;s+=1)a[s].l(f);r=H()},m(f,s){R(e,f,s),D(f,t,s);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(f,s);D(f,r,s),i=!0},p(f,s){const _={};!n&&s&2&&(n=!0,_.sortOrderValue=f[1],G(()=>n=!1)),e.$set(_),s&33&&(p=le(f[0]),ae(),a=we(a,s,$,1,f,p,l,r.parentNode,ke,de,r,ce),ne())},i(f){if(!i){B(e.$$.fragment,f);for(let s=0;s<p.length;s+=1)B(a[s]);i=!0}},o(f){M(e.$$.fragment,f);for(let s=0;s<a.length;s+=1)M(a[s]);i=!1},d(f){f&&(w(t),w(r)),T(e,f);for(let s=0;s<a.length;s+=1)a[s].d(f)}}}function ft(o){let e,n;return e=new Re({}),{c(){I(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){R(e,t,a),n=!0},p:N,i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ut(o){let e,n;return e=new he({}),{c(){I(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){R(e,t,a),n=!0},p:N,i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function de(o,e){let n,t,a;return t=new Oe({props:{coffeeBeansName:e[5].name,href:L.recipeItem(e[15].id),recipe:e[15]}}),{key:o,first:null,c(){n=H(),I(t.$$.fragment),this.h()},l(l){n=H(),P(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,r){D(l,n,r),R(t,l,r),a=!0},p(l,r){e=l;const i={};r&32&&(i.coffeeBeansName=e[5].name),r&1&&(i.href=L.recipeItem(e[15].id)),r&1&&(i.recipe=e[15]),t.$set(i)},i(l){a||(B(t.$$.fragment,l),a=!0)},o(l){M(t.$$.fragment,l),a=!1},d(l){l&&w(n),T(t,l)}}}function ct(o){let e,n,t,a,l,r;function i(s,_){return s[5]===void 0?xe:s[5]==="CoffeeBeansNotFound"?Ze:Xe}let d=i(o),m=d(o);const p=[nt,tt,et],$=[];function f(s,_){return s[5]===void 0?0:s[5]==="CoffeeBeansNotFound"?1:2}return t=f(o),a=$[t]=p[t](o),{c(){m.c(),e=H(),n=V(),a.c(),l=H()},l(s){const _=ve("svelte-1xzg8rg",document.head);m.l(_),e=H(),_.forEach(w),n=j(s),a.l(s),l=H()},m(s,_){m.m(document.head,null),E(document.head,e),D(s,n,_),$[t].m(s,_),D(s,l,_),r=!0},p(s,[_]){d!==(d=i(s))&&(m.d(1),m=d(s),m&&(m.c(),m.m(e.parentNode,e)));let u=t;t=f(s),t===u?$[t].p(s,_):(ae(),M($[u],1,1,()=>{$[u]=null}),ne(),a=$[t],a?a.p(s,_):(a=$[t]=p[t](s),a.c()),B(a,1),a.m(l.parentNode,l))},i(s){r||(B(a),r=!0)},o(s){M(a),r=!1},d(s){s&&(w(n),w(l)),m.d(s),w(e),$[t].d(s)}}}function dt(o,e,n){let{data:t}=e,a,l,r,i,d,m;async function p(){if(i===void 0||i==="CoffeeBeansNotFound")return;const h=i,c=await ie(h.id,!0);await fe(h.id,!0,h),W(L.home);const k=c===1?"recipe":"recipes",z=c>0?` and ${c} ${k}`:"";Ne(`Coffee beans "${h.name}"`+z+" deleted.",async()=>{await Ee(h),await Ie(h.id),W(L.coffeeBeansItem(h.name)).then(()=>W(L.home))},async()=>{await ie(h.id),await fe(h.id),W(L.coffeeBeansItem(h.name)).then(()=>W(L.home))})}async function $(){const h=await De(t.coffeeBeansName);if(h===void 0){n(5,i="CoffeeBeansNotFound");return}n(5,i=h);const c=await ye(i.id);n(0,d=c.sort(ue))}const f=()=>r("open");function s(h){r=h,n(4,r)}function _(h){a=h,n(2,a)}const u=()=>{a("open"),l("closed")};function b(h){l=h,n(3,l)}function y(h){m=h,n(1,m)}return o.$$set=h=>{"data"in h&&n(7,t=h.data)},o.$$.update=()=>{o.$$.dirty&3&&d&&n(0,d=d.sort((m==null?void 0:m.sortOrderFunc)??ue)),o.$$.dirty&128&&window.indexedDB&&$()},[d,m,a,l,r,i,p,t,f,s,_,u,b,y]}class Nt extends pe{constructor(e){super(),_e(this,e,dt,ct,me,{data:7})}}export{Nt as component,yt as universal};
