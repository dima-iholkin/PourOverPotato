import{s as N,o as J,n as j}from"../chunks/scheduler.QZKnv3vM.js";import{S as O,i as V,k as g,m as b,n as k,q as d,o as h,r as C,e as R,s as v,t as B,c as S,a as A,d as p,f as w,b as y,x as E,g as $,h as P,j as I,l as K,p as z,u as G,v as D}from"../chunks/index.CHfITGLb.js";import{P as Q,e as H,u as U,o as W}from"../chunks/PageHeadline.dJVkQ42h.js";import{g as X,b as Y}from"../chunks/indexedDB.vUzQvWEJ.js";import{C as Z,A as x,s as ee,a as te,S as re}from"../chunks/NoItemsYetP.54nxMtoY.js";import{r as T}from"../chunks/routes.z25Z1unV.js";import{F as se}from"../chunks/FlexRow.Y4rk8yok.js";import{L as ne}from"../chunks/Loading.EgPeQWTv.js";import{A as ae}from"../chunks/AddDemoCoffeeBeans_PageBlock.0KkobVGC.js";function fe(c){let t,r=c[0].name+"",e,f,s,o,i,m=c[1]===1?"recipe":"recipes",a;return{c(){t=R("h5"),e=B(r),f=v(),s=R("p"),o=B(c[1]),i=v(),a=B(m),this.h()},l(n){t=S(n,"H5",{class:!0});var u=A(t);e=y(u,r),u.forEach(p),f=w(n),s=S(n,"P",{class:!0});var l=A(s);o=y(l,c[1]),i=w(l),a=y(l,m),l.forEach(p),this.h()},h(){E(t,"class","svelte-1w6mxay"),E(s,"class","recipes-count svelte-1w6mxay")},m(n,u){$(n,t,u),P(t,e),$(n,f,u),$(n,s,u),P(s,o),P(s,i),P(s,a)},p(n,u){u&1&&r!==(r=n[0].name+"")&&I(e,r),u&2&&I(o,n[1]),u&2&&m!==(m=n[1]===1?"recipe":"recipes")&&I(a,m)},d(n){n&&(p(t),p(f),p(s))}}}function oe(c){let t,r,e,f,s=c[0].description+"",o,i;return r=new se({props:{$$slots:{default:[fe]},$$scope:{ctx:c}}}),{c(){t=R("div"),g(r.$$.fragment),e=v(),f=R("p"),o=B(s),this.h()},l(m){t=S(m,"DIV",{class:!0});var a=A(t);b(r.$$.fragment,a),a.forEach(p),e=w(m),f=S(m,"P",{class:!0});var n=A(f);o=y(n,s),n.forEach(p),this.h()},h(){E(t,"class","flex-row svelte-1w6mxay"),E(f,"class","svelte-1w6mxay")},m(m,a){$(m,t,a),k(r,t,null),$(m,e,a),$(m,f,a),P(f,o),i=!0},p(m,a){const n={};a&11&&(n.$$scope={dirty:a,ctx:m}),r.$set(n),(!i||a&1)&&s!==(s=m[0].description+"")&&I(o,s)},i(m){i||(d(r.$$.fragment,m),i=!0)},o(m){h(r.$$.fragment,m),i=!1},d(m){m&&(p(t),p(e),p(f)),C(r)}}}function le(c){let t,r;return t=new Z({props:{href:c[2],$$slots:{default:[oe]},$$scope:{ctx:c}}}),{c(){g(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,f){k(t,e,f),r=!0},p(e,[f]){const s={};f&4&&(s.href=e[2]),f&11&&(s.$$scope={dirty:f,ctx:e}),t.$set(s)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){C(t,e)}}}function ie(c,t,r){let{item:e}=t,{recipeCount:f=0}=t,{href:s}=t;return c.$$set=o=>{"item"in o&&r(0,e=o.item),"recipeCount"in o&&r(1,f=o.recipeCount),"href"in o&&r(2,s=o.href)},[e,f,s]}class ce extends O{constructor(t){super(),V(this,t,ie,le,N,{item:0,recipeCount:1,href:2})}}function L(c,t,r){const e=c.slice();return e[1]=t[r],e}function me(c){let t;return{c(){t=B("Coffee beans")},l(r){t=y(r,"Coffee beans")},m(r,e){$(r,t,e)},d(r){r&&p(t)}}}function ue(c){let t,r,e=[],f=new Map,s,o;t=new re({props:{$$slots:{default:[_e]},$$scope:{ctx:c}}});let i=H(c[0]);const m=a=>a[1].id;for(let a=0;a<i.length;a+=1){let n=L(c,i,a),u=m(n);f.set(u,e[a]=M(u,n))}return{c(){g(t.$$.fragment),r=v();for(let a=0;a<e.length;a+=1)e[a].c();s=D()},l(a){b(t.$$.fragment,a),r=w(a);for(let n=0;n<e.length;n+=1)e[n].l(a);s=D()},m(a,n){k(t,a,n),$(a,r,n);for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(a,n);$(a,s,n),o=!0},p(a,n){const u={};n&16&&(u.$$scope={dirty:n,ctx:a}),t.$set(u),n&1&&(i=H(a[0]),G(),e=U(e,n,m,1,a,i,f,s.parentNode,W,M,s,L),z())},i(a){if(!o){d(t.$$.fragment,a);for(let n=0;n<i.length;n+=1)d(e[n]);o=!0}},o(a){h(t.$$.fragment,a);for(let n=0;n<e.length;n+=1)h(e[n]);o=!1},d(a){a&&(p(r),p(s)),C(t,a);for(let n=0;n<e.length;n+=1)e[n].d(a)}}}function pe(c){let t,r;return t=new ae({}),{c(){g(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,f){k(t,e,f),r=!0},p:j,i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){C(t,e)}}}function $e(c){let t,r;return t=new ne({}),{c(){g(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,f){k(t,e,f),r=!0},p:j,i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){C(t,e)}}}function _e(c){let t;return{c(){t=B("Sorted by latest recipe date")},l(r){t=y(r,"Sorted by latest recipe date")},m(r,e){$(r,t,e)},d(r){r&&p(t)}}}function M(c,t){let r,e,f;return e=new ce({props:{href:T.coffeeBeansItem(t[1].name),item:t[1],recipeCount:t[1].recipeCount}}),{key:c,first:null,c(){r=D(),g(e.$$.fragment),this.h()},l(s){r=D(),b(e.$$.fragment,s),this.h()},h(){this.first=r},m(s,o){$(s,r,o),k(e,s,o),f=!0},p(s,o){t=s;const i={};o&1&&(i.href=T.coffeeBeansItem(t[1].name)),o&1&&(i.item=t[1]),o&1&&(i.recipeCount=t[1].recipeCount),e.$set(i)},i(s){f||(d(e.$$.fragment,s),f=!0)},o(s){h(e.$$.fragment,s),f=!1},d(s){s&&p(r),C(e,s)}}}function de(c){let t,r,e,f,s,o,i,m;r=new Q({props:{$$slots:{default:[me]},$$scope:{ctx:c}}});const a=[$e,pe,ue],n=[];function u(l,_){return l[0]===void 0?0:l[0].length===0?1:2}return f=u(c),s=n[f]=a[f](c),i=new x({props:{href:T.addRecipe()}}),{c(){t=v(),g(r.$$.fragment),e=v(),s.c(),o=v(),g(i.$$.fragment),this.h()},l(l){K("svelte-n9a09p",document.head).forEach(p),t=w(l),b(r.$$.fragment,l),e=w(l),s.l(l),o=w(l),b(i.$$.fragment,l),this.h()},h(){document.title="PourOverPotato app"},m(l,_){$(l,t,_),k(r,l,_),$(l,e,_),n[f].m(l,_),$(l,o,_),k(i,l,_),m=!0},p(l,[_]){const q={};_&16&&(q.$$scope={dirty:_,ctx:l}),r.$set(q);let F=f;f=u(l),f===F?n[f].p(l,_):(G(),h(n[F],1,1,()=>{n[F]=null}),z(),s=n[f],s?s.p(l,_):(s=n[f]=a[f](l),s.c()),d(s,1),s.m(o.parentNode,o))},i(l){m||(d(r.$$.fragment,l),d(s),d(i.$$.fragment,l),m=!0)},o(l){h(r.$$.fragment,l),h(s),h(i.$$.fragment,l),m=!1},d(l){l&&(p(t),p(e),p(o)),C(r,l),n[f].d(l),C(i,l)}}}function he(c,t,r){let e;return J(()=>{X().then(async f=>{const s=await Promise.all(f.map(async o=>{const i=await Y(o.id);return{...o,recipeCount:i.length,latestRecipeTimestamp:i.length>0?i.sort(ee)[0].timestamp:void 0}}));r(0,e=s.sort(te))})}),[e]}class Ie extends O{constructor(t){super(),V(this,t,he,de,N,{})}}export{Ie as component};
