import{s as qe,b as O,a as R,c as ze,o as Ve}from"../chunks/scheduler.vcOl-ZmV.js";import{S as Ke,i as Je,v as E,s as F,k as w,e as Ne,l as Qe,d as W,f as S,m as N,c as Ae,a as Xe,y as Ye,z as Z,g as re,n as A,h as M,A as Ze,B as xe,q as P,o as y,r as D,t as et,b as tt}from"../chunks/index.Otd-Ubpp.js";import{g as le}from"../chunks/entry.k3F19gLe.js";import{p as nt}from"../chunks/stores.EdY3A0yE.js";import{f as at,g as st,j as rt,i as ot,p as it}from"../chunks/indexedDB.omaGZViy.js";import{n as se}from"../chunks/naming.kUvCv0xb.js";import{r as pe}from"../chunks/routes.vq0lUGBL.js";import{C as ft,N as Me,F as ut,T as lt,p as me}from"../chunks/NumberInput.cd4yrBnH.js";import{T as ce}from"../chunks/Textarea.nT9hUE4u.js";import{P as pt}from"../chunks/PageHeadline.5NItdQjD.js";async function mt({url:t}){return{coffeeBeansName:t.searchParams.get("coffee_beans_name")}}const St=Object.freeze(Object.defineProperty({__proto__:null,load:mt},Symbol.toStringTag,{value:"Module"}));function U(t,o,n){const g=_e(t,o);localStorage.setItem(g,n)}function j(t,o,n){const g=_e(t,o),s=localStorage.getItem(g);if(s===null)return null;if(n==="number"){const p=Number.parseFloat(s);return Number.isNaN(p)?null:p}return s}function L(t,o){const n=_e(t,o);localStorage.removeItem(n)}function _e(t,o){return`form_${t}_${o}`}function ct(t){let o;return{c(){o=et("Add recipe")},l(n){o=tt(n,"Add recipe")},m(n,g){re(n,o,g)},d(n){n&&W(o)}}}function gt(t){let o,n,g,s,p,H,d,T,r,_,b,l,B,I,m,G,q,h,z,V,v,K,J,$,Q,X,C,a,k,c,ne="Save",ae,fe,be;n=new pt({props:{$$slots:{default:[ct]},$$scope:{ctx:t}}});function Pe(e){t[14](e)}function ye(e){t[15](e)}let ue={allCoffeeBeans:t[0],onSavedCoffeeBeans:t[12],validationFailed:t[9]};t[8]!==void 0&&(ue.selectDOM=t[8]),t[1]!==void 0&&(ue.selectedCoffeeBeansId=t[1]),p=new ft({props:ue}),O.push(()=>E(p,"selectDOM",Pe)),O.push(()=>E(p,"selectedCoffeeBeansId",ye));function De(e){t[16](e)}let he={id:x,label:se.recipe.recipeTarget+":",name:x,placeholder:me.recipeTarget};t[2]!==void 0&&(he.value=t[2]),r=new ce({props:he}),O.push(()=>E(r,"value",De));function Ge(e){t[17](e)}let ve={id:ee,label:se.recipe.recipeResult+":",name:ee,placeholder:me.recipeResult};t[3]!==void 0&&(ve.value=t[3]),l=new ce({props:ve}),O.push(()=>E(l,"value",Ge));function He(e){t[18](e)}let $e={labelText:se.recipe.outWeight+" (g):",min:0,nameAttr:oe,step:5};t[5]!==void 0&&($e.value=t[5]),m=new Me({props:$e}),O.push(()=>E(m,"value",He));function Ue(e){t[19](e)}let Ce={labelText:"Rating:",max:5,min:0,nameAttr:ie,step:.5};t[6]!==void 0&&(Ce.value=t[6]),h=new Me({props:Ce}),O.push(()=>E(h,"value",Ue));function je(e){t[20](e)}let Te={};t[7]!==void 0&&(Te.value=t[7]),v=new ut({props:Te}),O.push(()=>E(v,"value",je));function Le(e){t[21](e)}let Be={id:te,label:se.recipe.recipeThoughts+":",name:te,placeholder:me.recipeThoughts};t[4]!==void 0&&(Be.value=t[4]),$=new ce({props:Be}),O.push(()=>E($,"value",Le));function We(e){t[22](e)}let Ie={};return t[10]!==void 0&&(Ie.value=t[10]),C=new lt({props:Ie}),O.push(()=>E(C,"value",We)),{c(){o=F(),w(n.$$.fragment),g=F(),s=Ne("form"),w(p.$$.fragment),T=F(),w(r.$$.fragment),b=F(),w(l.$$.fragment),I=F(),w(m.$$.fragment),q=F(),w(h.$$.fragment),V=F(),w(v.$$.fragment),J=F(),w($.$$.fragment),X=F(),w(C.$$.fragment),k=F(),c=Ne("button"),c.textContent=ne,this.h()},l(e){Qe("svelte-kogo9l",document.head).forEach(W),o=S(e),N(n.$$.fragment,e),g=S(e),s=Ae(e,"FORM",{id:!0,class:!0});var i=Xe(s);N(p.$$.fragment,i),T=S(i),N(r.$$.fragment,i),b=S(i),N(l.$$.fragment,i),I=S(i),N(m.$$.fragment,i),q=S(i),N(h.$$.fragment,i),V=S(i),N(v.$$.fragment,i),J=S(i),N($.$$.fragment,i),X=S(i),N(C.$$.fragment,i),k=S(i),c=Ae(i,"BUTTON",{class:!0,form:!0,type:!0,"data-svelte-h":!0}),Ye(c)!=="svelte-1pg8oi4"&&(c.textContent=ne),i.forEach(W),this.h()},h(){document.title="Add recipe - PourOverPotato app",Z(c,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded svelte-b37xp1"),Z(c,"form","add-recipe"),Z(c,"type","submit"),Z(s,"id","add-recipe"),Z(s,"class","svelte-b37xp1")},m(e,u){re(e,o,u),A(n,e,u),re(e,g,u),re(e,s,u),A(p,s,null),M(s,T),A(r,s,null),M(s,b),A(l,s,null),M(s,I),A(m,s,null),M(s,q),A(h,s,null),M(s,V),A(v,s,null),M(s,J),A($,s,null),M(s,X),A(C,s,null),M(s,k),M(s,c),ae=!0,fe||(be=Ze(s,"submit",xe(t[11])),fe=!0)},p(e,[u]){const i={};u&33554432&&(i.$$scope={dirty:u,ctx:e}),n.$set(i);const Y={};u&1&&(Y.allCoffeeBeans=e[0]),u&512&&(Y.validationFailed=e[9]),!H&&u&256&&(H=!0,Y.selectDOM=e[8],R(()=>H=!1)),!d&&u&2&&(d=!0,Y.selectedCoffeeBeansId=e[1],R(()=>d=!1)),p.$set(Y);const Fe={};!_&&u&4&&(_=!0,Fe.value=e[2],R(()=>_=!1)),r.$set(Fe);const Se={};!B&&u&8&&(B=!0,Se.value=e[3],R(()=>B=!1)),l.$set(Se);const ke={};!G&&u&32&&(G=!0,ke.value=e[5],R(()=>G=!1)),m.$set(ke);const Oe={};!z&&u&64&&(z=!0,Oe.value=e[6],R(()=>z=!1)),h.$set(Oe);const Re={};!K&&u&128&&(K=!0,Re.value=e[7],R(()=>K=!1)),v.$set(Re);const Ee={};!Q&&u&16&&(Q=!0,Ee.value=e[4],R(()=>Q=!1)),$.$set(Ee);const we={};!a&&u&1024&&(a=!0,we.value=e[10],R(()=>a=!1)),C.$set(we)},i(e){ae||(P(n.$$.fragment,e),P(p.$$.fragment,e),P(r.$$.fragment,e),P(l.$$.fragment,e),P(m.$$.fragment,e),P(h.$$.fragment,e),P(v.$$.fragment,e),P($.$$.fragment,e),P(C.$$.fragment,e),ae=!0)},o(e){y(n.$$.fragment,e),y(p.$$.fragment,e),y(r.$$.fragment,e),y(l.$$.fragment,e),y(m.$$.fragment,e),y(h.$$.fragment,e),y(v.$$.fragment,e),y($.$$.fragment,e),y(C.$$.fragment,e),ae=!1},d(e){e&&(W(o),W(g),W(s)),D(n,e),D(p),D(r),D(l),D(m),D(h),D(v),D($),D(C),fe=!1,be()}}}const x="recipe-target",ee="recipe-result",te="recipe-thoughts",oe="out-weight",ie="rating",ge="favorite",f="addRecipe",de="coffee-beans";function dt(t,o,n){let g;ze(t,nt,a=>n(23,g=a));const s=g.data.coffeeBeansName;let p,H=!1,d=!1,T,r,_="",b="",l="",B=0,I=0,m=!1,G=at(new Date);Ve(()=>{st().then(a=>{var k;n(0,T=a),s?n(1,r=(k=T.find(c=>c.name.toLowerCase()===s.toLowerCase()))==null?void 0:k.id):n(1,r=j(f,de,"number")??void 0),n(2,_=j(f,x,"string")??""),n(3,b=j(f,ee,"string")??""),n(4,l=j(f,te,"string")??""),n(5,B=j(f,oe,"number")??0),n(6,I=j(f,ie,"number")??0),n(7,m=j(f,ge,"number")===1),n(13,d=!0)})});async function q(){if(r===void 0){n(9,H=!0);return}n(2,_=_.trim()),n(3,b=b.trim()),n(4,l=l.trim());const a=it(G);await rt({coffeeBeansId:r,recipeTarget:_,recipeResult:b,recipeThoughts:l,outWeight:B,rating:I,favorite:m,timestamp:a}),L(f,de),L(f,x),L(f,ee),L(f,te),L(f,oe),L(f,ie),L(f,ge),ot("Recipe created.");const c=T.find(ne=>ne.id===r);if(c===void 0){le(pe.home);return}le(pe.coffeeBeansItem(c.name))}function h(a){T.push(a),n(1,r=a.id),n(9,H=!1)}function z(a){p=a,n(8,p)}function V(a){r=a,n(1,r)}function v(a){_=a,n(2,_)}function K(a){b=a,n(3,b)}function J(a){B=a,n(5,B)}function $(a){I=a,n(6,I)}function Q(a){m=a,n(7,m)}function X(a){l=a,n(4,l)}function C(a){G=a,n(10,G)}return t.$$.update=()=>{var a;if(t.$$.dirty&8195&&r!==void 0&&d){U(f,de,r);const k=(a=T.find(c=>c.id===r))==null?void 0:a.name;le(pe.addRecipe(k))}t.$$.dirty&8196&&d&&U(f,x,_),t.$$.dirty&8200&&d&&U(f,ee,b),t.$$.dirty&8208&&d&&U(f,te,l),t.$$.dirty&8224&&d&&U(f,oe,B),t.$$.dirty&8256&&d&&U(f,ie,I),t.$$.dirty&8320&&d&&U(f,ge,m?1:0)},[T,r,_,b,l,B,I,m,p,H,G,q,h,d,z,V,v,K,J,$,Q,X,C]}class kt extends Ke{constructor(o){super(),Je(this,o,dt,gt,qe,{})}}export{kt as component,St as universal};
