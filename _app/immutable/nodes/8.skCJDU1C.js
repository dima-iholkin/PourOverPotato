import{s as ze,o as xe,n as G,b as W,a as q}from"../chunks/scheduler.ZvbRK0ck.js";import{S as ye,i as Je,s as P,m as D,v as Ve,n as Ke,d as c,f as R,o as V,g as I,p as H,k as E,q as Ae,l as h,r as N,t as z,b as x,u as Oe,e as T,c as C,w as Ce,A as M,a as j,x as w,h as v,B as Qe,C as Xe}from"../chunks/index.D4zfOep-.js";import{P as Ye,R as Fe,b as Ze,c as et,e as tt}from"../chunks/PageHeadline.zjx-BUZ1.js";import{n as ce}from"../chunks/naming.kUvCv0xb.js";import{r as nt}from"../chunks/routes.1eZgGMMa.js";import{L as $e,T as be}from"../chunks/Textarea.SfFHuTCd.js";import{f as st,N as He,T as at,C as rt,p as lt}from"../chunks/TimestampPicker.bo6Dq1UF.js";function ot({params:r}){const e=Number.parseFloat(r.id);if(Number.isInteger(e)===!1)throw new Error("Non-integer route params are not allowed for this page. The matcher should have filtered outnon-integer values. Something is wrong with the code.");return{recipeId:e}}const Bt=Object.freeze(Object.defineProperty({__proto__:null,load:ot},Symbol.toStringTag,{value:"Module"}));function it(r){let e;return{c(){e=z("Edit recipe")},l(t){e=x(t,"Edit recipe")},m(t,a){I(t,e,a)},d(t){t&&c(e)}}}function ut(r){let e,t="404 Not Found";return{c(){e=T("p"),e.textContent=t},l(a){e=C(a,"P",{"data-svelte-h":!0}),Ce(e)!=="svelte-yl3l8h"&&(e.textContent=t)},m(a,n){I(a,e,n)},p:G,i:G,o:G,d(a){a&&c(e)}}}function ft(r){let e,t,a,n,f,p,i,m,d,$,l,_,B,b,Q,X,U,S,Y,Z,u,k,ee,pe,y,L,de,J,A,me,_e,K,O,ge,ve,F,Ie="Save changes",fe,he,ke,g=r[2]!==void 0&&Ne(r);n=new $e({props:{_for:Ee,$$slots:{default:[pt]},$$scope:{ctx:r}}});function Ge(s){r[12](s)}let Pe={id:Ee,name:Ee,placeholder:gt};r[3]!==void 0&&(Pe.value=r[3]),i=new be({props:Pe}),W.push(()=>M(i,"value",Ge)),l=new $e({props:{_for:we,$$slots:{default:[dt]},$$scope:{ctx:r}}});function Ue(s){r[13](s)}let Re={id:we,name:we,placeholder:vt};r[4]!==void 0&&(Re.value=r[4]),b=new be({props:Re}),W.push(()=>M(b,"value",Ue));function Le(s){r[14](s)}let Be={labelText:ce.recipe.outWeight+" (g):",min:0,nameAttr:$t,step:5};r[6]!==void 0&&(Be.value=r[6]),S=new He({props:Be}),W.push(()=>M(S,"value",Le));function We(s){r[15](s)}let Se={labelText:"Rating:",max:5,min:0,nameAttr:bt,step:.5};r[7]!==void 0&&(Se.value=r[7]),k=new He({props:Se}),W.push(()=>M(k,"value",We)),L=new $e({props:{_for:Te,$$slots:{default:[mt]},$$scope:{ctx:r}}});function qe(s){r[16](s)}let je={id:Te,name:Te,placeholder:ht,textLinesCount:4};r[5]!==void 0&&(je.value=r[5]),A=new be({props:je}),W.push(()=>M(A,"value",qe));function Me(s){r[17](s)}let De={};return r[8]!==void 0&&(De.value=r[8]),O=new at({props:De}),W.push(()=>M(O,"value",Me)),{c(){e=T("form"),g&&g.c(),t=P(),a=T("div"),D(n.$$.fragment),f=P(),p=T("div"),D(i.$$.fragment),d=P(),$=T("div"),D(l.$$.fragment),_=P(),B=T("div"),D(b.$$.fragment),X=P(),U=T("div"),D(S.$$.fragment),Z=P(),u=T("div"),D(k.$$.fragment),pe=P(),y=T("div"),D(L.$$.fragment),de=P(),J=T("div"),D(A.$$.fragment),_e=P(),K=T("div"),D(O.$$.fragment),ve=P(),F=T("button"),F.textContent=Ie,this.h()},l(s){e=C(s,"FORM",{id:!0});var o=j(e);g&&g.l(o),t=R(o),a=C(o,"DIV",{class:!0});var te=j(a);V(n.$$.fragment,te),te.forEach(c),f=R(o),p=C(o,"DIV",{class:!0});var ne=j(p);V(i.$$.fragment,ne),ne.forEach(c),d=R(o),$=C(o,"DIV",{class:!0});var se=j($);V(l.$$.fragment,se),se.forEach(c),_=R(o),B=C(o,"DIV",{class:!0});var ae=j(B);V(b.$$.fragment,ae),ae.forEach(c),X=R(o),U=C(o,"DIV",{class:!0});var re=j(U);V(S.$$.fragment,re),re.forEach(c),Z=R(o),u=C(o,"DIV",{class:!0});var le=j(u);V(k.$$.fragment,le),le.forEach(c),pe=R(o),y=C(o,"DIV",{class:!0});var oe=j(y);V(L.$$.fragment,oe),oe.forEach(c),de=R(o),J=C(o,"DIV",{class:!0});var ie=j(J);V(A.$$.fragment,ie),ie.forEach(c),_e=R(o),K=C(o,"DIV",{class:!0});var ue=j(K);V(O.$$.fragment,ue),ue.forEach(c),ve=R(o),F=C(o,"BUTTON",{class:!0,form:!0,type:!0,"data-svelte-h":!0}),Ce(F)!=="svelte-1dkauk3"&&(F.textContent=Ie),o.forEach(c),this.h()},h(){w(a,"class","svelte-1rdjc50"),w(p,"class","svelte-1rdjc50"),w($,"class","svelte-1rdjc50"),w(B,"class","svelte-1rdjc50"),w(U,"class","svelte-1rdjc50"),w(u,"class","svelte-1rdjc50"),w(y,"class","svelte-1rdjc50"),w(J,"class","svelte-1rdjc50"),w(K,"class","svelte-1rdjc50"),w(F,"class","my-button svelte-1rdjc50"),w(F,"form","edit-recipe"),w(F,"type","submit"),w(e,"id","edit-recipe")},m(s,o){I(s,e,o),g&&g.m(e,null),v(e,t),v(e,a),H(n,a,null),v(e,f),v(e,p),H(i,p,null),v(e,d),v(e,$),H(l,$,null),v(e,_),v(e,B),H(b,B,null),v(e,X),v(e,U),H(S,U,null),v(e,Z),v(e,u),H(k,u,null),v(e,pe),v(e,y),H(L,y,null),v(e,de),v(e,J),H(A,J,null),v(e,_e),v(e,K),H(O,K,null),v(e,ve),v(e,F),fe=!0,he||(ke=Qe(e,"submit",Xe(r[9])),he=!0)},p(s,o){s[2]!==void 0?g?(g.p(s,o),o&4&&h(g,1)):(g=Ne(s),g.c(),h(g,1),g.m(e,t)):g&&(Oe(),E(g,1,1,()=>{g=null}),Ae());const te={};o&262144&&(te.$$scope={dirty:o,ctx:s}),n.$set(te);const ne={};!m&&o&8&&(m=!0,ne.value=s[3],q(()=>m=!1)),i.$set(ne);const se={};o&262144&&(se.$$scope={dirty:o,ctx:s}),l.$set(se);const ae={};!Q&&o&16&&(Q=!0,ae.value=s[4],q(()=>Q=!1)),b.$set(ae);const re={};!Y&&o&64&&(Y=!0,re.value=s[6],q(()=>Y=!1)),S.$set(re);const le={};!ee&&o&128&&(ee=!0,le.value=s[7],q(()=>ee=!1)),k.$set(le);const oe={};o&262144&&(oe.$$scope={dirty:o,ctx:s}),L.$set(oe);const ie={};!me&&o&32&&(me=!0,ie.value=s[5],q(()=>me=!1)),A.$set(ie);const ue={};!ge&&o&256&&(ge=!0,ue.value=s[8],q(()=>ge=!1)),O.$set(ue)},i(s){fe||(h(g),h(n.$$.fragment,s),h(i.$$.fragment,s),h(l.$$.fragment,s),h(b.$$.fragment,s),h(S.$$.fragment,s),h(k.$$.fragment,s),h(L.$$.fragment,s),h(A.$$.fragment,s),h(O.$$.fragment,s),fe=!0)},o(s){E(g),E(n.$$.fragment,s),E(i.$$.fragment,s),E(l.$$.fragment,s),E(b.$$.fragment,s),E(S.$$.fragment,s),E(k.$$.fragment,s),E(L.$$.fragment,s),E(A.$$.fragment,s),E(O.$$.fragment,s),fe=!1},d(s){s&&c(e),g&&g.d(),N(n),N(i),N(l),N(b),N(S),N(k),N(L),N(A),N(O),he=!1,ke()}}}function ct(r){let e,t="loading...";return{c(){e=T("p"),e.textContent=t},l(a){e=C(a,"P",{"data-svelte-h":!0}),Ce(e)!=="svelte-qeejp2"&&(e.textContent=t)},m(a,n){I(a,e,n)},p:G,i:G,o:G,d(a){a&&c(e)}}}function Ne(r){let e,t,a,n;function f(i){r[11](i)}let p={showAddButton:!1,allCoffeeBeans:r[1]};return r[2]!==void 0&&(p.selectedCoffeeBeans=r[2]),t=new rt({props:p}),W.push(()=>M(t,"selectedCoffeeBeans",f)),{c(){e=T("div"),D(t.$$.fragment),this.h()},l(i){e=C(i,"DIV",{class:!0});var m=j(e);V(t.$$.fragment,m),m.forEach(c),this.h()},h(){w(e,"class","svelte-1rdjc50")},m(i,m){I(i,e,m),H(t,e,null),n=!0},p(i,m){const d={};m&2&&(d.allCoffeeBeans=i[1]),!a&&m&4&&(a=!0,d.selectedCoffeeBeans=i[2],q(()=>a=!1)),t.$set(d)},i(i){n||(h(t.$$.fragment,i),n=!0)},o(i){E(t.$$.fragment,i),n=!1},d(i){i&&c(e),N(t)}}}function pt(r){let e=ce.recipe.recipeTarget+"",t,a;return{c(){t=z(e),a=z(":")},l(n){t=x(n,e),a=x(n,":")},m(n,f){I(n,t,f),I(n,a,f)},p:G,d(n){n&&(c(t),c(a))}}}function dt(r){let e=ce.recipe.recipeResult+"",t,a;return{c(){t=z(e),a=z(":")},l(n){t=x(n,e),a=x(n,":")},m(n,f){I(n,t,f),I(n,a,f)},p:G,d(n){n&&(c(t),c(a))}}}function mt(r){let e=ce.recipe.recipeThoughts+"",t,a;return{c(){t=z(e),a=z(":")},l(n){t=x(n,e),a=x(n,":")},m(n,f){I(n,t,f),I(n,a,f)},p:G,d(n){n&&(c(t),c(a))}}}function _t(r){let e,t,a,n,f,p,i;t=new Ye({props:{$$slots:{default:[it]},$$scope:{ctx:r}}});const m=[ct,ft,ut],d=[];function $(l,_){return l[0]===null?0:l[0]instanceof Fe?1:2}return n=$(r),f=d[n]=m[n](r),{c(){e=P(),D(t.$$.fragment),a=P(),f.c(),p=Ve(),this.h()},l(l){Ke("svelte-cc1fw0",document.head).forEach(c),e=R(l),V(t.$$.fragment,l),a=R(l),f.l(l),p=Ve(),this.h()},h(){document.title="Edit recipe - PourOverPotato app"},m(l,_){I(l,e,_),H(t,l,_),I(l,a,_),d[n].m(l,_),I(l,p,_),i=!0},p(l,[_]){const B={};_&262144&&(B.$$scope={dirty:_,ctx:l}),t.$set(B);let b=n;n=$(l),n===b?d[n].p(l,_):(Oe(),E(d[b],1,1,()=>{d[b]=null}),Ae(),f=d[n],f?f.p(l,_):(f=d[n]=m[n](l),f.c()),h(f,1),f.m(p.parentNode,p))},i(l){i||(h(t.$$.fragment,l),h(f),i=!0)},o(l){E(t.$$.fragment,l),E(f),i=!1},d(l){l&&(c(e),c(a),c(p)),N(t,l),d[n].d(l)}}}const Ee="recipe-target",gt="Example: 17 clicks, 15g + 260g. 5m boil.",we="recipe-result",vt="Example: 2m15s + 15s drip. 250g out.",Te="recipe-thoughts",ht="Example: Perfect balance. Perfect concentration. Flowery notes.",$t="out-weight",bt="rating";function Et(r,e,t){let{data:a}=e,n=null,f,p,i,m,d,$,l,_;xe(()=>{Ze(a.recipeId).then(u=>{t(0,n=u),u!==void 0&&(et().then(k=>{t(1,f=k),t(2,p=f==null?void 0:f.find(ee=>ee.id===u.coffeeBeansId))}),t(3,i=u.recipeTarget),t(4,m=u.recipeResult),t(5,d=u.recipeThoughts),t(6,$=u.outWeight),t(7,l=u.rating),t(8,_=st(u.timestamp)))})});async function B(){t(3,i=i.trim()),t(4,m=m.trim()),t(5,d=d.trim());const u=lt(_);if(n==null)throw new Error("Recipe was undefined or null somehow.");if(p===void 0)throw new Error("Please select the coffee beans.");const k=new Fe({coffeeBeansId:p.id,recipeTarget:i,recipeResult:m,recipeThoughts:d,outWeight:$,rating:l,timestamp:u},n.id);await tt(k),alert("We saved the recipe successfully."),window.location.replace(nt.coffeeBeansItem(p.name))}function b(u){p=u,t(2,p)}function Q(u){i=u,t(3,i)}function X(u){m=u,t(4,m)}function U(u){$=u,t(6,$)}function S(u){l=u,t(7,l)}function Y(u){d=u,t(5,d)}function Z(u){_=u,t(8,_)}return r.$$set=u=>{"data"in u&&t(10,a=u.data)},[n,f,p,i,m,d,$,l,_,B,a,b,Q,X,U,S,Y,Z]}class St extends ye{constructor(e){super(),Je(this,e,Et,_t,ze,{data:10})}}export{St as component,Bt as universal};
