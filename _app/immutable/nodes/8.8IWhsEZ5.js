import{s as Ae,o as Fe,b as M,a as N,n as K}from"../chunks/scheduler.vcOl-ZmV.js";import{S as Oe,i as ye,s as D,k as v,w as x,l as Ue,d as h,f as E,m as w,g as C,n as I,o as $,p as ke,q as g,r as T,u as Ce,t as Se,b as Be,v as A,e as Q,c as X,a as Re,z as G,y as re,h as F,A as Ge,B as He}from"../chunks/index.Otd-Ubpp.js";import{g as O}from"../chunks/entry.hnHDMe29.js";import{R as ee,b as We,g as qe,f as Le,d as he,c as je,e as ze,h as Ve,i as Je,p as Ke,u as Qe}from"../chunks/indexedDB.DSM7SfQo.js";import{n as Z}from"../chunks/naming.kUvCv0xb.js";import{r as y}from"../chunks/routes.gcsfaKJ0.js";import{C as Xe,N as be,T as Ye,p as ae}from"../chunks/NumberInput.Z6rPvgue.js";import{L as Ze}from"../chunks/Loading.ri7Tzl5F.js";import{F as xe,D as et,a as tt}from"../chunks/FlexRow.-V-t9yxY.js";import{T as oe}from"../chunks/Textarea.nT9hUE4u.js";import{D as nt}from"../chunks/DeleteConfirmationModal.2DG-rpuA.js";import{P as at}from"../chunks/PageHeadline.CNgB9f2m.js";function ot({params:r}){const e=Number.parseFloat(r.id);if(Number.isInteger(e)===!1)throw new Error("Non-integer route params are not allowed for this page. The matcher should have filtered outnon-integer values. Something is wrong with the code.");return{recipeId:e}}const Dt=Object.freeze(Object.defineProperty({__proto__:null,load:ot},Symbol.toStringTag,{value:"Module"}));function rt(r){let e;return{c(){e=Se("Edit recipe")},l(t){e=Be(t,"Edit recipe")},m(t,a){C(t,e,a)},d(t){t&&h(e)}}}function ve(r){let e,t,a,l;function o(s){r[16](s)}let n={$$slots:{modal:[it],button:[st]},$$scope:{ctx:r}};return r[1]!==void 0&&(n.setDropdownState=r[1]),t=new et({props:n}),M.push(()=>A(t,"setDropdownState",o)),{c(){e=Q("div"),v(t.$$.fragment),this.h()},l(s){e=X(s,"DIV",{class:!0});var p=Re(e);w(t.$$.fragment,p),p.forEach(h),this.h()},h(){G(e,"class","menu-container svelte-vb4cmr")},m(s,p){C(s,e,p),I(t,e,null),l=!0},p(s,p){const m={};p&16777219&&(m.$$scope={dirty:p,ctx:s}),!a&&p&2&&(a=!0,m.setDropdownState=s[1],N(()=>a=!1)),t.$set(m)},i(s){l||(g(t.$$.fragment,s),l=!0)},o(s){$(t.$$.fragment,s),l=!1},d(s){s&&h(e),T(t)}}}function st(r){let e,t;return e=new tt({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",r[15]),{c(){v(e.$$.fragment)},l(a){w(e.$$.fragment,a)},m(a,l){I(e,a,l),t=!0},p:K,i(a){t||(g(e.$$.fragment,a),t=!0)},o(a){$(e.$$.fragment,a),t=!1},d(a){T(e,a)}}}function lt(r){let e;return{c(){e=Se("Please confirm you want to delete this recipe")},l(t){e=Be(t,"Please confirm you want to delete this recipe")},m(t,a){C(t,e,a)},d(t){t&&h(e)}}}function it(r){let e,t,a;function l(n){r[14](n)}let o={slot:"modal",onDeleteClick:r[11],$$slots:{default:[lt]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.setModalState=r[0]),e=new nt({props:o}),M.push(()=>A(e,"setModalState",l)),{c(){v(e.$$.fragment)},l(n){w(e.$$.fragment,n)},m(n,s){I(e,n,s),a=!0},p(n,s){const p={};s&16777216&&(p.$$scope={dirty:s,ctx:n}),!t&&s&1&&(t=!0,p.setModalState=n[0],N(()=>t=!1)),e.$set(p)},i(n){a||(g(e.$$.fragment,n),a=!0)},o(n){$(e.$$.fragment,n),a=!1},d(n){T(e,n)}}}function ft(r){let e,t,a,l;e=new at({props:{$$slots:{default:[rt]},$$scope:{ctx:r}}});let o=r[2]instanceof ee&&ve(r);return{c(){v(e.$$.fragment),t=D(),o&&o.c(),a=x()},l(n){w(e.$$.fragment,n),t=E(n),o&&o.l(n),a=x()},m(n,s){I(e,n,s),C(n,t,s),o&&o.m(n,s),C(n,a,s),l=!0},p(n,s){const p={};s&16777216&&(p.$$scope={dirty:s,ctx:n}),e.$set(p),n[2]instanceof ee?o?(o.p(n,s),s&4&&g(o,1)):(o=ve(n),o.c(),g(o,1),o.m(a.parentNode,a)):o&&(Ce(),$(o,1,1,()=>{o=null}),ke())},i(n){l||(g(e.$$.fragment,n),g(o),l=!0)},o(n){$(e.$$.fragment,n),$(o),l=!1},d(n){n&&(h(t),h(a)),T(e,n),o&&o.d(n)}}}function ut(r){let e,t="404",a,l,o="Not Found";return{c(){e=Q("p"),e.textContent=t,a=D(),l=Q("p"),l.textContent=o},l(n){e=X(n,"P",{"data-svelte-h":!0}),re(e)!=="svelte-swq3p4"&&(e.textContent=t),a=E(n),l=X(n,"P",{"data-svelte-h":!0}),re(l)!=="svelte-14ywr5"&&(l.textContent=o)},m(n,s){C(n,e,s),C(n,a,s),C(n,l,s)},p:K,i:K,o:K,d(n){n&&(h(e),h(a),h(l))}}}function pt(r){let e,t,a,l,o,n,s,p,m,b,i,d,k,_,H,W,S,q,L,B,j,z,R,Y="Save changes",U,V,u;function P(f){r[17](f)}let J={allCoffeeBeans:r[3],showAddButton:!1};r[4]!==void 0&&(J.selectedCoffeeBeansId=r[4]),t=new Xe({props:J}),M.push(()=>A(t,"selectedCoffeeBeansId",P));function te(f){r[18](f)}let se={id:we,label:Z.recipe.recipeTarget+":",name:we,placeholder:ae.recipeTarget};r[5]!==void 0&&(se.value=r[5]),o=new oe({props:se}),M.push(()=>A(o,"value",te));function De(f){r[19](f)}let le={id:Ie,label:Z.recipe.recipeResult+":",name:Ie,placeholder:ae.recipeResult};r[6]!==void 0&&(le.value=r[6]),p=new oe({props:le}),M.push(()=>A(p,"value",De));function Ee(f){r[20](f)}let ie={labelText:Z.recipe.outWeight+" (g):",min:0,nameAttr:dt,step:5};r[8]!==void 0&&(ie.value=r[8]),i=new be({props:ie}),M.push(()=>A(i,"value",Ee));function Pe(f){r[21](f)}let fe={labelText:"Rating:",max:5,min:0,nameAttr:_t,step:.5};r[9]!==void 0&&(fe.value=r[9]),_=new be({props:fe}),M.push(()=>A(_,"value",Pe));function Me(f){r[22](f)}let ue={id:Te,label:Z.recipe.recipeThoughts+":",name:Te,placeholder:ae.recipeThoughts};r[7]!==void 0&&(ue.value=r[7]),S=new oe({props:ue}),M.push(()=>A(S,"value",Me));function Ne(f){r[23](f)}let pe={};return r[10]!==void 0&&(pe.value=r[10]),B=new Ye({props:pe}),M.push(()=>A(B,"value",Ne)),{c(){e=Q("form"),v(t.$$.fragment),l=D(),v(o.$$.fragment),s=D(),v(p.$$.fragment),b=D(),v(i.$$.fragment),k=D(),v(_.$$.fragment),W=D(),v(S.$$.fragment),L=D(),v(B.$$.fragment),z=D(),R=Q("button"),R.textContent=Y,this.h()},l(f){e=X(f,"FORM",{id:!0,class:!0});var c=Re(e);w(t.$$.fragment,c),l=E(c),w(o.$$.fragment,c),s=E(c),w(p.$$.fragment,c),b=E(c),w(i.$$.fragment,c),k=E(c),w(_.$$.fragment,c),W=E(c),w(S.$$.fragment,c),L=E(c),w(B.$$.fragment,c),z=E(c),R=X(c,"BUTTON",{class:!0,form:!0,type:!0,"data-svelte-h":!0}),re(R)!=="svelte-1dkauk3"&&(R.textContent=Y),c.forEach(h),this.h()},h(){G(R,"class","my-button svelte-vb4cmr"),G(R,"form","edit-recipe"),G(R,"type","submit"),G(e,"id","edit-recipe"),G(e,"class","svelte-vb4cmr")},m(f,c){C(f,e,c),I(t,e,null),F(e,l),I(o,e,null),F(e,s),I(p,e,null),F(e,b),I(i,e,null),F(e,k),I(_,e,null),F(e,W),I(S,e,null),F(e,L),I(B,e,null),F(e,z),F(e,R),U=!0,V||(u=Ge(e,"submit",He(r[12])),V=!0)},p(f,c){const ne={};c&8&&(ne.allCoffeeBeans=f[3]),!a&&c&16&&(a=!0,ne.selectedCoffeeBeansId=f[4],N(()=>a=!1)),t.$set(ne);const ce={};!n&&c&32&&(n=!0,ce.value=f[5],N(()=>n=!1)),o.$set(ce);const me={};!m&&c&64&&(m=!0,me.value=f[6],N(()=>m=!1)),p.$set(me);const de={};!d&&c&256&&(d=!0,de.value=f[8],N(()=>d=!1)),i.$set(de);const _e={};!H&&c&512&&(H=!0,_e.value=f[9],N(()=>H=!1)),_.$set(_e);const ge={};!q&&c&128&&(q=!0,ge.value=f[7],N(()=>q=!1)),S.$set(ge);const $e={};!j&&c&1024&&(j=!0,$e.value=f[10],N(()=>j=!1)),B.$set($e)},i(f){U||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(p.$$.fragment,f),g(i.$$.fragment,f),g(_.$$.fragment,f),g(S.$$.fragment,f),g(B.$$.fragment,f),U=!0)},o(f){$(t.$$.fragment,f),$(o.$$.fragment,f),$(p.$$.fragment,f),$(i.$$.fragment,f),$(_.$$.fragment,f),$(S.$$.fragment,f),$(B.$$.fragment,f),U=!1},d(f){f&&h(e),T(t),T(o),T(p),T(i),T(_),T(S),T(B),V=!1,u()}}}function ct(r){let e,t;return e=new Ze({}),{c(){v(e.$$.fragment)},l(a){w(e.$$.fragment,a)},m(a,l){I(e,a,l),t=!0},p:K,i(a){t||(g(e.$$.fragment,a),t=!0)},o(a){$(e.$$.fragment,a),t=!1},d(a){T(e,a)}}}function mt(r){let e,t,a,l,o,n,s;t=new xe({props:{$$slots:{default:[ft]},$$scope:{ctx:r}}});const p=[ct,pt,ut],m=[];function b(i,d){return i[2]===null?0:i[2]instanceof ee?1:2}return l=b(r),o=m[l]=p[l](r),{c(){e=D(),v(t.$$.fragment),a=D(),o.c(),n=x(),this.h()},l(i){Ue("svelte-cc1fw0",document.head).forEach(h),e=E(i),w(t.$$.fragment,i),a=E(i),o.l(i),n=x(),this.h()},h(){document.title="Edit recipe - PourOverPotato app"},m(i,d){C(i,e,d),I(t,i,d),C(i,a,d),m[l].m(i,d),C(i,n,d),s=!0},p(i,[d]){const k={};d&16777223&&(k.$$scope={dirty:d,ctx:i}),t.$set(k);let _=l;l=b(i),l===_?m[l].p(i,d):(Ce(),$(m[_],1,1,()=>{m[_]=null}),ke(),o=m[l],o?o.p(i,d):(o=m[l]=p[l](i),o.c()),g(o,1),o.m(n.parentNode,n))},i(i){s||(g(t.$$.fragment,i),g(o),s=!0)},o(i){$(t.$$.fragment,i),$(o),s=!1},d(i){i&&(h(e),h(a),h(n)),T(t,i),m[l].d(i)}}}const we="recipe-target",Ie="recipe-result",Te="recipe-thoughts",dt="out-weight",_t="rating";function gt(r,e,t){let{data:a}=e,l,o,n=null,s,p,m,b,i,d,k,_;Fe(()=>{We(a.recipeId).then(u=>{t(2,n=u),u!==void 0&&qe().then(P=>{t(3,s=P),t(4,p=u.coffeeBeansId),t(5,m=u.recipeTarget),t(6,b=u.recipeResult),t(7,i=u.recipeThoughts),t(8,d=u.outWeight),t(9,k=u.rating),t(10,_=Le(u.timestamp))})})});async function H(){if(n==null)return;const u=n;await he(u.id,!0,u);const P=await je(u.coffeeBeansId);ze("Recipe deleted.",async()=>{await Qe(u),O(y.home).then(()=>P?O(y.coffeeBeansItem(P.name)):O(y.home))},async()=>{await he(u.id)}),P?O(y.coffeeBeansItem(P.name)):O(y.home)}async function W(){t(5,m=m.trim()),t(6,b=b.trim()),t(7,i=i.trim());const u=Ke(_);if(p===void 0)throw new Error("Please select the coffee beans.");if(n==null)throw new Error("Recipe was undefined or null somehow.");const P=new ee({coffeeBeansId:p,recipeTarget:m,recipeResult:b,recipeThoughts:i,outWeight:d,rating:k,timestamp:u},n.id);await Ve(P),Je("Recipe changes saved.");const J=s==null?void 0:s.find(te=>te.id===p);if(J===void 0){O(y.home);return}O(y.coffeeBeansItem(J.name))}function S(u){l=u,t(0,l)}const q=()=>{o("closed"),l("open")};function L(u){o=u,t(1,o)}function B(u){p=u,t(4,p)}function j(u){m=u,t(5,m)}function z(u){b=u,t(6,b)}function R(u){d=u,t(8,d)}function Y(u){k=u,t(9,k)}function U(u){i=u,t(7,i)}function V(u){_=u,t(10,_)}return r.$$set=u=>{"data"in u&&t(13,a=u.data)},[l,o,n,s,p,m,b,i,d,k,_,H,W,a,S,q,L,B,j,z,R,Y,U,V]}class Et extends Oe{constructor(e){super(),ye(this,e,gt,mt,Ae,{data:13})}}export{Et as component,Dt as universal};
