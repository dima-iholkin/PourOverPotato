import{s as Pe,d as y,e as A,o as Oe}from"../chunks/scheduler.QZKnv3vM.js";import{S as Me,i as Ge,y as P,s as T,k as S,e as Ie,l as He,d as U,f as I,m as F,c as Be,a as Ue,z as je,x as V,g as ee,n as w,h as E,A as De,C as We,q as R,o as k,r as N,t as qe,b as ze}from"../chunks/index.CHfITGLb.js";import{f as Le,g as Ke,j as Ve,p as Je}from"../chunks/indexedDB.Q-EDKeWM.js";import{n as x}from"../chunks/naming.kUvCv0xb.js";import{r as Se}from"../chunks/routes.v8dFQnkq.js";import{C as Qe,N as Fe,T as Xe,p as re}from"../chunks/NumberInput.-GQxluvP.js";import{T as se}from"../chunks/Textarea.n51Q9fu7.js";import{P as Ye}from"../chunks/PageHeadline.dJVkQ42h.js";async function Ze({url:t}){return{coffeeBeansName:t.searchParams.get("coffee_beans_name")}}const lt=Object.freeze(Object.defineProperty({__proto__:null,load:Ze},Symbol.toStringTag,{value:"Module"}));function M(t,s,n){const m=oe(t,s);localStorage.setItem(m,n)}function G(t,s,n){const m=oe(t,s),a=localStorage.getItem(m);if(a===null)return null;if(n==="number"){const f=Number.parseFloat(a);return Number.isNaN(f)?null:f}return a}function H(t,s){const n=oe(t,s);localStorage.removeItem(n)}function oe(t,s){return`form_${t}_${s}`}function xe(t){let s;return{c(){s=qe("Add recipe")},l(n){s=ze(n,"Add recipe")},m(n,m){ee(n,s,m)},d(n){n&&U(s)}}}function et(t){let s,n,m,a,f,c,d,o,g,v,p,B,j,_,D,W,b,q,z,h,L,r,$,O,K,C,ue="Save",Y,ae,fe;n=new Ye({props:{$$slots:{default:[xe]},$$scope:{ctx:t}}});function we(e){t[12](e)}let le={allCoffeeBeans:t[7],onSavedCoffeeBeans:t[10],validationFailed:t[6]};t[0]!==void 0&&(le.selectedCoffeeBeansId=t[0]),f=new Qe({props:le}),y.push(()=>P(f,"selectedCoffeeBeansId",we));function Ee(e){t[13](e)}let pe={id:J,label:x.recipe.recipeTarget+":",name:J,placeholder:re.recipeTarget};t[1]!==void 0&&(pe.value=t[1]),o=new se({props:pe}),y.push(()=>P(o,"value",Ee));function Re(e){t[14](e)}let me={id:Q,label:x.recipe.recipeResult+":",name:Q,placeholder:re.recipeResult};t[2]!==void 0&&(me.value=t[2]),p=new se({props:me}),y.push(()=>P(p,"value",Re));function ke(e){t[15](e)}let ce={labelText:x.recipe.outWeight+" (g):",min:0,nameAttr:te,step:5};t[4]!==void 0&&(ce.value=t[4]),_=new Fe({props:ce}),y.push(()=>P(_,"value",ke));function Ne(e){t[16](e)}let de={labelText:"Rating:",max:5,min:0,nameAttr:ne,step:.5};t[5]!==void 0&&(de.value=t[5]),b=new Fe({props:de}),y.push(()=>P(b,"value",Ne));function ye(e){t[17](e)}let ge={id:X,label:x.recipe.recipeThoughts+":",name:X,placeholder:re.recipeThoughts,textLinesCount:4};t[3]!==void 0&&(ge.value=t[3]),h=new se({props:ge}),y.push(()=>P(h,"value",ye));function Ae(e){t[18](e)}let _e={};return t[8]!==void 0&&(_e.value=t[8]),$=new Xe({props:_e}),y.push(()=>P($,"value",Ae)),{c(){s=T(),S(n.$$.fragment),m=T(),a=Ie("form"),S(f.$$.fragment),d=T(),S(o.$$.fragment),v=T(),S(p.$$.fragment),j=T(),S(_.$$.fragment),W=T(),S(b.$$.fragment),z=T(),S(h.$$.fragment),r=T(),S($.$$.fragment),K=T(),C=Ie("button"),C.textContent=ue,this.h()},l(e){He("svelte-kogo9l",document.head).forEach(U),s=I(e),F(n.$$.fragment,e),m=I(e),a=Be(e,"FORM",{id:!0,class:!0});var i=Ue(a);F(f.$$.fragment,i),d=I(i),F(o.$$.fragment,i),v=I(i),F(p.$$.fragment,i),j=I(i),F(_.$$.fragment,i),W=I(i),F(b.$$.fragment,i),z=I(i),F(h.$$.fragment,i),r=I(i),F($.$$.fragment,i),K=I(i),C=Be(i,"BUTTON",{class:!0,form:!0,type:!0,"data-svelte-h":!0}),je(C)!=="svelte-1pg8oi4"&&(C.textContent=ue),i.forEach(U),this.h()},h(){document.title="Add recipe - PourOverPotato app",V(C,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded svelte-b37xp1"),V(C,"form","add-recipe"),V(C,"type","submit"),V(a,"id","add-recipe"),V(a,"class","svelte-b37xp1")},m(e,l){ee(e,s,l),w(n,e,l),ee(e,m,l),ee(e,a,l),w(f,a,null),E(a,d),w(o,a,null),E(a,v),w(p,a,null),E(a,j),w(_,a,null),E(a,W),w(b,a,null),E(a,z),w(h,a,null),E(a,r),w($,a,null),E(a,K),E(a,C),Y=!0,ae||(fe=De(a,"submit",We(t[9])),ae=!0)},p(e,[l]){const i={};l&524288&&(i.$$scope={dirty:l,ctx:e}),n.$set(i);const Z={};l&128&&(Z.allCoffeeBeans=e[7]),l&64&&(Z.validationFailed=e[6]),!c&&l&1&&(c=!0,Z.selectedCoffeeBeansId=e[0],A(()=>c=!1)),f.$set(Z);const be={};!g&&l&2&&(g=!0,be.value=e[1],A(()=>g=!1)),o.$set(be);const he={};!B&&l&4&&(B=!0,he.value=e[2],A(()=>B=!1)),p.$set(he);const ve={};!D&&l&16&&(D=!0,ve.value=e[4],A(()=>D=!1)),_.$set(ve);const $e={};!q&&l&32&&(q=!0,$e.value=e[5],A(()=>q=!1)),b.$set($e);const Ce={};!L&&l&8&&(L=!0,Ce.value=e[3],A(()=>L=!1)),h.$set(Ce);const Te={};!O&&l&256&&(O=!0,Te.value=e[8],A(()=>O=!1)),$.$set(Te)},i(e){Y||(R(n.$$.fragment,e),R(f.$$.fragment,e),R(o.$$.fragment,e),R(p.$$.fragment,e),R(_.$$.fragment,e),R(b.$$.fragment,e),R(h.$$.fragment,e),R($.$$.fragment,e),Y=!0)},o(e){k(n.$$.fragment,e),k(f.$$.fragment,e),k(o.$$.fragment,e),k(p.$$.fragment,e),k(_.$$.fragment,e),k(b.$$.fragment,e),k(h.$$.fragment,e),k($.$$.fragment,e),Y=!1},d(e){e&&(U(s),U(m),U(a)),N(n,e),N(f),N(o),N(p),N(_),N(b),N(h),N($),ae=!1,fe()}}}const J="recipe-target",Q="recipe-result",X="recipe-thoughts",te="out-weight",ne="rating",u="addRecipe",ie="coffee-beans";function tt(t,s,n){let m=!1,a=!1,f,c,d="",o="",g="",v=0,p=0,B=Le(new Date);Oe(()=>{Ke().then(r=>{n(7,f=r),n(0,c=G(u,ie,"number")??void 0),n(1,d=G(u,J,"string")??""),n(2,o=G(u,Q,"string")??""),n(3,g=G(u,X,"string")??""),n(4,v=G(u,te,"number")??0),n(5,p=G(u,ne,"number")??0),n(11,a=!0)})});async function j(){if(c===void 0){n(6,m=!0);return}n(1,d=d.trim()),n(2,o=o.trim()),n(3,g=g.trim());const r=Je(B);await Ve({coffeeBeansId:c,recipeTarget:d,recipeResult:o,recipeThoughts:g,outWeight:v,rating:p,timestamp:r}),H(u,ie),H(u,J),H(u,Q),H(u,X),H(u,te),H(u,ne),alert("Recipe saved.");const O=f.find(K=>K.id===c);if(O===void 0){window.location.replace(Se.home);return}window.location.replace(Se.coffeeBeansItem(O.name))}function _(r){f.push(r),n(0,c=r.id),n(6,m=!1)}function D(r){c=r,n(0,c)}function W(r){d=r,n(1,d)}function b(r){o=r,n(2,o)}function q(r){v=r,n(4,v)}function z(r){p=r,n(5,p)}function h(r){g=r,n(3,g)}function L(r){B=r,n(8,B)}return t.$$.update=()=>{t.$$.dirty&2049&&c!==void 0&&a&&M(u,ie,c),t.$$.dirty&2050&&a&&M(u,J,d),t.$$.dirty&2052&&a&&M(u,Q,o),t.$$.dirty&2056&&a&&M(u,X,g),t.$$.dirty&2064&&a&&M(u,te,v),t.$$.dirty&2080&&a&&M(u,ne,p)},[c,d,o,g,v,p,m,f,B,j,_,a,D,W,b,q,z,h,L]}class pt extends Me{constructor(s){super(),Ge(this,s,tt,et,Pe,{})}}export{pt as component,lt as universal};
