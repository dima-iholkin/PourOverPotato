import{s as Ge,o as He,b as U,a as A,n as x}from"../chunks/scheduler.Cw1-ZcKD.js";import{S as qe,i as Le,s as E,k as T,w as ie,l as ze,d as $,f as V,m as k,g as P,n as B,A as Me,o as h,p as Ne,q as g,r as C,u as Fe,t as be,b as ve,v as W,e as ee,c as te,a as $e,z as q,y as Se,h as F,B as Je}from"../chunks/index.DHsbL8_X.js";import{b as Ke,g as y}from"../chunks/entry.D9J3zD_q.js";import{g as Qe,b as Xe}from"../chunks/manageCoffeeBeans.E__Z0lQp.js";import{P as Ye,b as Ze,s as xe,e as et,h as tt,u as nt}from"../chunks/PageHeadline._rhYHzjV.js";import{n as re}from"../chunks/naming.DmthAWfq.js";import{r as G}from"../chunks/routes.BpU10NWl.js";import{C as at,p as ge,N as Re,F as ot,T as rt}from"../chunks/NumberInput.D6m4VG8d.js";import{g as se,h as it,a as st}from"../chunks/toastProvider.CA3wvqVI.js";import{f as le,p as lt}from"../chunks/dateHelpers.BAQsHIds.js";import{L as ft}from"../chunks/Loading.BjzKhRf5.js";import{F as ut,D as pt,a as mt}from"../chunks/FlexRow.kYR_1CSo.js";import{T as he}from"../chunks/Textarea.DN1j_bVF.js";import{D as ct}from"../chunks/DeleteConfirmationModal.C0krRx71.js";function dt({params:a}){const e=Number.parseFloat(a.id);if(Number.isInteger(e)===!1)throw new Error("Non-integer route params are not allowed for this page. The matcher should have filtered outnon-integer values. Something is wrong with the code.");return{recipeId:e}}const yt=Object.freeze(Object.defineProperty({__proto__:null,load:dt},Symbol.toStringTag,{value:"Module"}));function _t(a){let e;return{c(){e=be("Edit recipe")},l(t){e=ve(t,"Edit recipe")},m(t,r){P(t,e,r)},d(t){t&&$(e)}}}function De(a){let e,t,r,f;function i(s){a[19](s)}let n={$$slots:{modal:[$t],button:[gt]},$$scope:{ctx:a}};return a[10]!==void 0&&(n.setDropdownState=a[10]),t=new pt({props:n}),U.push(()=>W(t,"setDropdownState",i)),{c(){e=ee("div"),T(t.$$.fragment),this.h()},l(s){e=te(s,"DIV",{class:!0});var m=$e(e);k(t.$$.fragment,m),m.forEach($),this.h()},h(){q(e,"class","menu-container svelte-g5jv4v")},m(s,m){P(s,e,m),B(t,e,null),f=!0},p(s,m){const _={};m&536872448&&(_.$$scope={dirty:m,ctx:s}),!r&&m&1024&&(r=!0,_.setDropdownState=s[10],A(()=>r=!1)),t.$set(_)},i(s){f||(g(t.$$.fragment,s),f=!0)},o(s){h(t.$$.fragment,s),f=!1},d(s){s&&$(e),C(t)}}}function gt(a){let e,t;return e=new mt({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",a[18]),{c(){T(e.$$.fragment)},l(r){k(e.$$.fragment,r)},m(r,f){B(e,r,f),t=!0},p:x,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){h(e.$$.fragment,r),t=!1},d(r){C(e,r)}}}function ht(a){let e;return{c(){e=be("Please confirm you want to delete this recipe")},l(t){e=ve(t,"Please confirm you want to delete this recipe")},m(t,r){P(t,e,r)},d(t){t&&$(e)}}}function $t(a){let e,t,r;function f(n){a[17](n)}let i={slot:"modal",onDeleteClick:a[14],$$slots:{default:[ht]},$$scope:{ctx:a}};return a[9]!==void 0&&(i.setModalState=a[9]),e=new ct({props:i}),U.push(()=>W(e,"setModalState",f)),{c(){T(e.$$.fragment)},l(n){k(e.$$.fragment,n)},m(n,s){B(e,n,s),r=!0},p(n,s){const m={};s&536870912&&(m.$$scope={dirty:s,ctx:n}),!t&&s&512&&(t=!0,m.setModalState=n[9],A(()=>t=!1)),e.$set(m)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){h(e.$$.fragment,n),r=!1},d(n){C(e,n)}}}function bt(a){let e,t,r,f;e=new Ye({props:{$$slots:{default:[_t]},$$scope:{ctx:a}}});let i=a[0]instanceof se&&De(a);return{c(){T(e.$$.fragment),t=E(),i&&i.c(),r=ie()},l(n){k(e.$$.fragment,n),t=V(n),i&&i.l(n),r=ie()},m(n,s){B(e,n,s),P(n,t,s),i&&i.m(n,s),P(n,r,s),f=!0},p(n,s){const m={};s&536870912&&(m.$$scope={dirty:s,ctx:n}),e.$set(m),n[0]instanceof se?i?(i.p(n,s),s&1&&g(i,1)):(i=De(n),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(Fe(),h(i,1,1,()=>{i=null}),Ne())},i(n){f||(g(e.$$.fragment,n),g(i),f=!0)},o(n){h(e.$$.fragment,n),h(i),f=!1},d(n){n&&($(t),$(r)),C(e,n),i&&i.d(n)}}}function vt(a){let e,t="404",r,f,i="Not Found";return{c(){e=ee("p"),e.textContent=t,r=E(),f=ee("p"),f.textContent=i},l(n){e=te(n,"P",{"data-svelte-h":!0}),Se(e)!=="svelte-swq3p4"&&(e.textContent=t),r=V(n),f=te(n,"P",{"data-svelte-h":!0}),Se(f)!=="svelte-14ywr5"&&(f.textContent=i)},m(n,s){P(n,e,s),P(n,r,s),P(n,f,s)},p:x,i:x,o:x,d(n){n&&($(e),$(r),$(f))}}}function wt(a){let e,t,r,f,i,n,s,m,_,b,d,v,p,c,S,I,w,L,z,M,J,K,N,Q,X,R,Y,H,O,Z,ne;function l(o){a[20](o)}let D={allCoffeeBeans:a[11],initialCoffeeBeansId:a[0].coffeeBeansId,showAddButton:!1};a[1]!==void 0&&(D.selectedCoffeeBeansId=a[1]),t=new at({props:D}),U.push(()=>W(t,"selectedCoffeeBeansId",l));function ae(o){a[21](o)}let oe={id:Ee,initialValue:a[0].recipeTarget,label:re.recipe.recipeTarget+":",name:Ee,placeholder:ge.recipeTarget};a[2]!==void 0&&(oe.value=a[2]),i=new he({props:oe}),U.push(()=>W(i,"value",ae));function Ue(o){a[22](o)}let we={id:Ve,initialValue:a[0].recipeResult,label:re.recipe.recipeResult+":",name:Ve,placeholder:ge.recipeResult};a[3]!==void 0&&(we.value=a[3]),m=new he({props:we}),U.push(()=>W(m,"value",Ue));function Ae(o){a[23](o)}let Ie={initialValue:a[0].outWeight,labelText:re.recipe.outWeight+" (g):",min:0,nameAttr:kt,step:5};a[5]!==void 0&&(Ie.value=a[5]),d=new Re({props:Ie}),U.push(()=>W(d,"value",Ae));function We(o){a[24](o)}let Te={initialValue:a[0].rating,labelText:"Rating:",max:5,min:0,nameAttr:Bt,step:.5};a[6]!==void 0&&(Te.value=a[6]),c=new Re({props:Te}),U.push(()=>W(c,"value",We));function Oe(o){a[25](o)}let ke={initialValue:a[0].favorite};a[7]!==void 0&&(ke.value=a[7]),w=new ot({props:ke}),U.push(()=>W(w,"value",Oe));function je(o){a[26](o)}let Be={id:Pe,initialValue:a[0].recipeThoughts,label:re.recipe.recipeThoughts+":",name:Pe,placeholder:ge.recipeThoughts};a[4]!==void 0&&(Be.value=a[4]),M=new he({props:Be}),U.push(()=>W(M,"value",je));function ye(o){a[27](o)}let Ce={initialValue:le(a[0].timestamp)};return a[8]!==void 0&&(Ce.value=a[8]),N=new rt({props:Ce}),U.push(()=>W(N,"value",ye)),{c(){e=ee("form"),T(t.$$.fragment),f=E(),T(i.$$.fragment),s=E(),T(m.$$.fragment),b=E(),T(d.$$.fragment),p=E(),T(c.$$.fragment),I=E(),T(w.$$.fragment),z=E(),T(M.$$.fragment),K=E(),T(N.$$.fragment),X=E(),R=ee("button"),Y=be("Save changes"),this.h()},l(o){e=te(o,"FORM",{id:!0,class:!0});var u=$e(e);k(t.$$.fragment,u),f=V(u),k(i.$$.fragment,u),s=V(u),k(m.$$.fragment,u),b=V(u),k(d.$$.fragment,u),p=V(u),k(c.$$.fragment,u),I=V(u),k(w.$$.fragment,u),z=V(u),k(M.$$.fragment,u),K=V(u),k(N.$$.fragment,u),X=V(u),R=te(u,"BUTTON",{class:!0,form:!0,type:!0});var j=$e(R);Y=ve(j,"Save changes"),j.forEach($),u.forEach($),this.h()},h(){q(R,"class","my-button svelte-g5jv4v"),R.disabled=H=a[12]===!1,q(R,"form","edit-recipe"),q(R,"type","submit"),q(e,"id","edit-recipe"),q(e,"class","svelte-g5jv4v")},m(o,u){P(o,e,u),B(t,e,null),F(e,f),B(i,e,null),F(e,s),B(m,e,null),F(e,b),B(d,e,null),F(e,p),B(c,e,null),F(e,I),B(w,e,null),F(e,z),B(M,e,null),F(e,K),B(N,e,null),F(e,X),F(e,R),F(R,Y),O=!0,Z||(ne=Me(e,"submit",Je(a[15])),Z=!0)},p(o,u){const j={};u&2048&&(j.allCoffeeBeans=o[11]),u&1&&(j.initialCoffeeBeansId=o[0].coffeeBeansId),!r&&u&2&&(r=!0,j.selectedCoffeeBeansId=o[1],A(()=>r=!1)),t.$set(j);const fe={};u&1&&(fe.initialValue=o[0].recipeTarget),!n&&u&4&&(n=!0,fe.value=o[2],A(()=>n=!1)),i.$set(fe);const ue={};u&1&&(ue.initialValue=o[0].recipeResult),!_&&u&8&&(_=!0,ue.value=o[3],A(()=>_=!1)),m.$set(ue);const pe={};u&1&&(pe.initialValue=o[0].outWeight),!v&&u&32&&(v=!0,pe.value=o[5],A(()=>v=!1)),d.$set(pe);const me={};u&1&&(me.initialValue=o[0].rating),!S&&u&64&&(S=!0,me.value=o[6],A(()=>S=!1)),c.$set(me);const ce={};u&1&&(ce.initialValue=o[0].favorite),!L&&u&128&&(L=!0,ce.value=o[7],A(()=>L=!1)),w.$set(ce);const de={};u&1&&(de.initialValue=o[0].recipeThoughts),!J&&u&16&&(J=!0,de.value=o[4],A(()=>J=!1)),M.$set(de);const _e={};u&1&&(_e.initialValue=le(o[0].timestamp)),!Q&&u&256&&(Q=!0,_e.value=o[8],A(()=>Q=!1)),N.$set(_e),(!O||u&4096&&H!==(H=o[12]===!1))&&(R.disabled=H)},i(o){O||(g(t.$$.fragment,o),g(i.$$.fragment,o),g(m.$$.fragment,o),g(d.$$.fragment,o),g(c.$$.fragment,o),g(w.$$.fragment,o),g(M.$$.fragment,o),g(N.$$.fragment,o),O=!0)},o(o){h(t.$$.fragment,o),h(i.$$.fragment,o),h(m.$$.fragment,o),h(d.$$.fragment,o),h(c.$$.fragment,o),h(w.$$.fragment,o),h(M.$$.fragment,o),h(N.$$.fragment,o),O=!1},d(o){o&&$(e),C(t),C(i),C(m),C(d),C(c),C(w),C(M),C(N),Z=!1,ne()}}}function It(a){let e,t;return e=new ft({}),{c(){T(e.$$.fragment)},l(r){k(e.$$.fragment,r)},m(r,f){B(e,r,f),t=!0},p:x,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){h(e.$$.fragment,r),t=!1},d(r){C(e,r)}}}function Tt(a){let e,t,r,f,i,n,s,m,_;t=new ut({props:{$$slots:{default:[bt]},$$scope:{ctx:a}}});const b=[It,wt,vt],d=[];function v(p,c){return p[0]===null?0:p[0]instanceof se?1:2}return f=v(a),i=d[f]=b[f](a),{c(){e=E(),T(t.$$.fragment),r=E(),i.c(),n=ie(),this.h()},l(p){ze("svelte-cc1fw0",document.head).forEach($),e=V(p),k(t.$$.fragment,p),r=V(p),i.l(p),n=ie(),this.h()},h(){document.title="Edit recipe - PourOverPotato app"},m(p,c){P(p,e,c),B(t,p,c),P(p,r,c),d[f].m(p,c),P(p,n,c),s=!0,m||(_=Me(window,"beforeunload",a[13]),m=!0)},p(p,[c]){const S={};c&536872449&&(S.$$scope={dirty:c,ctx:p}),t.$set(S);let I=f;f=v(p),f===I?d[f].p(p,c):(Fe(),h(d[I],1,1,()=>{d[I]=null}),Ne(),i=d[f],i?i.p(p,c):(i=d[f]=b[f](p),i.c()),g(i,1),i.m(n.parentNode,n))},i(p){s||(g(t.$$.fragment,p),g(i),s=!0)},o(p){h(t.$$.fragment,p),h(i),s=!1},d(p){p&&($(e),$(r),$(n)),C(t,p),d[f].d(p),m=!1,_()}}}const Ee="recipe-target",Ve="recipe-result",Pe="recipe-thoughts",kt="out-weight",Bt="rating";function Ct(a,e,t){let{data:r}=e,f,i,n=null,s,m=!1,_,b,d,v,p,c,S=!1,I,w=!1;Ke(l=>{l.willUnload===!1&&m===!1&&w&&confirm("Do you want to navigate away and lose unsaved changes?")===!1&&l.cancel()}),He(()=>{Ze(r.recipeId).then(l=>{t(0,n=l),l!==void 0&&Qe().then(D=>{t(11,s=D),t(1,_=l.coffeeBeansId),t(2,b=l.recipeTarget),t(3,d=l.recipeResult),t(4,v=l.recipeThoughts),t(5,p=l.outWeight),t(6,c=l.rating),t(7,S=l.favorite),t(8,I=le(l.timestamp))})})});function L(l){if(m===!1&&w)return l.preventDefault(),l.returnValue="","Are you sure you want to navigate away?"}async function z(){if(n==null)return;const l=n;await xe(l.id);const D=await Xe(l.coffeeBeansId);it("Recipe deleted.",async()=>{await nt(l.id),y(G.home).then(()=>D?y(G.coffeeBeansItem(D.name)):y(G.home))},async()=>{await tt(l.id)}),m=!0,D?y(G.coffeeBeansItem(D.name)):y(G.home)}async function M(){t(2,b=b.trim()),t(3,d=d.trim()),t(4,v=v.trim());const l=lt(I);if(_===void 0)throw new Error("Please select the coffee beans.");if(n==null)throw new Error("Recipe was undefined or null somehow.");const D=new se({id:n.id,coffeeBeansId:_,recipeTarget:b,recipeResult:d,recipeThoughts:v,outWeight:p,rating:c,favorite:S,timestamp:l});await et(D),st("Recipe modified."),m=!0;const ae=s==null?void 0:s.find(oe=>oe.id===_);if(ae===void 0){y(G.home);return}y(G.coffeeBeansItem(ae.name))}function J(l){f=l,t(9,f)}const K=()=>{i("closed"),f("open")};function N(l){i=l,t(10,i)}function Q(l){_=l,t(1,_)}function X(l){b=l,t(2,b)}function R(l){d=l,t(3,d)}function Y(l){p=l,t(5,p)}function H(l){c=l,t(6,c)}function O(l){S=l,t(7,S)}function Z(l){v=l,t(4,v)}function ne(l){I=l,t(8,I)}return a.$$set=l=>{"data"in l&&t(16,r=l.data)},a.$$.update=()=>{a.$$.dirty&511&&(n&&_===n.coffeeBeansId&&b===n.recipeTarget&&d===n.recipeResult&&v===n.recipeThoughts&&p===n.outWeight&&c===n.rating&&S===n.favorite&&I===le(n.timestamp)?t(12,w=!1):t(12,w=!0))},[n,_,b,d,v,p,c,S,I,f,i,s,w,L,z,M,r,J,K,N,Q,X,R,Y,H,O,Z,ne]}class Gt extends qe{constructor(e){super(),Le(this,e,Ct,Tt,Ge,{data:16})}}export{Gt as component,yt as universal};
