import{s as V,d as Y,u as Z,g as x,e as ee,o as te,n as U}from"../chunks/scheduler.vcOl-ZmV.js";import{S as j,i as F,k as P,m as y,n as E,q as g,o as b,r as I,e as A,t as S,s as B,c as z,a as D,b as T,d as m,f as w,z as R,g as d,h as v,j as L,l as se,p as W,u as X,w as M}from"../chunks/index.Otd-Ubpp.js";import{e as J,u as ne,o as ae}from"../chunks/each.dJ2YfOui.js";import{g as re,k as oe}from"../chunks/indexedDB.DSM7SfQo.js";import{C as le,A as fe,s as ie,a as ce}from"../chunks/NoItemsYetP.qJ361ElG.js";import{r as N}from"../chunks/routes.gcsfaKJ0.js";import{L as ue}from"../chunks/Loading.ri7Tzl5F.js";import{A as me}from"../chunks/AddDemoCoffeeBeans_PageBlock.3KDFbWOr.js";import{P as pe}from"../chunks/PageHeadline.CNgB9f2m.js";function _e(i){let t,s,e,a=i[0].name+"",n,l,c,_,o,r=i[1]===1?"recipe":"recipes",p,f,u,k=i[0].description+"",C;return{c(){t=A("div"),s=A("div"),e=A("h5"),n=S(a),l=B(),c=A("p"),_=S(i[1]),o=B(),p=S(r),f=B(),u=A("p"),C=S(k),this.h()},l($){t=z($,"DIV",{class:!0});var h=D(t);s=z(h,"DIV",{class:!0});var q=D(s);e=z(q,"H5",{class:!0});var O=D(e);n=T(O,a),O.forEach(m),l=w(q),c=z(q,"P",{class:!0});var H=D(c);_=T(H,i[1]),o=w(H),p=T(H,r),H.forEach(m),q.forEach(m),h.forEach(m),f=w($),u=z($,"P",{class:!0});var G=D(u);C=T(G,k),G.forEach(m),this.h()},h(){R(e,"class","svelte-1a3o24z"),R(c,"class","recipes-count svelte-1a3o24z"),R(s,"class","flex-card-row svelte-1a3o24z"),R(t,"class","flex-row svelte-1a3o24z"),R(u,"class","content svelte-1a3o24z")},m($,h){d($,t,h),v(t,s),v(s,e),v(e,n),v(s,l),v(s,c),v(c,_),v(c,o),v(c,p),d($,f,h),d($,u,h),v(u,C)},p($,h){h&1&&a!==(a=$[0].name+"")&&L(n,a),h&2&&L(_,$[1]),h&2&&r!==(r=$[1]===1?"recipe":"recipes")&&L(p,r),h&1&&k!==(k=$[0].description+"")&&L(C,k)},d($){$&&(m(t),m(f),m(u))}}}function $e(i){let t,s;return t=new le({props:{href:i[2],$$slots:{default:[_e]},$$scope:{ctx:i}}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p(e,[a]){const n={};a&4&&(n.href=e[2]),a&11&&(n.$$scope={dirty:a,ctx:e}),t.$set(n)},i(e){s||(g(t.$$.fragment,e),s=!0)},o(e){b(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function de(i,t,s){let{item:e}=t,{recipeCount:a=0}=t,{href:n}=t;return i.$$set=l=>{"item"in l&&s(0,e=l.item),"recipeCount"in l&&s(1,a=l.recipeCount),"href"in l&&s(2,n=l.href)},[e,a,n]}class he extends j{constructor(t){super(),F(this,t,de,$e,V,{item:0,recipeCount:1,href:2})}}function ge(i){let t,s;const e=i[1].default,a=Y(e,i,i[0],null);return{c(){t=A("p"),a&&a.c(),this.h()},l(n){t=z(n,"P",{class:!0});var l=D(t);a&&a.l(l),l.forEach(m),this.h()},h(){R(t,"class","svelte-72hp0w")},m(n,l){d(n,t,l),a&&a.m(t,null),s=!0},p(n,[l]){a&&a.p&&(!s||l&1)&&Z(a,e,n,n[0],s?ee(e,n[0],l,null):x(n[0]),null)},i(n){s||(g(a,n),s=!0)},o(n){b(a,n),s=!1},d(n){n&&m(t),a&&a.d(n)}}}function be(i,t,s){let{$$slots:e={},$$scope:a}=t;return i.$$set=n=>{"$$scope"in n&&s(0,a=n.$$scope)},[a,e]}class ve extends j{constructor(t){super(),F(this,t,be,ge,V,{})}}function K(i,t,s){const e=i.slice();return e[3]=t[s],e}function ke(i){let t;return{c(){t=S("Coffee beans")},l(s){t=T(s,"Coffee beans")},m(s,e){d(s,t,e)},d(s){s&&m(t)}}}function Ce(i){let t,s,e=[],a=new Map,n,l;t=new ve({props:{$$slots:{default:[Pe]},$$scope:{ctx:i}}});let c=J(i[0]);const _=o=>o[3].id;for(let o=0;o<c.length;o+=1){let r=K(i,c,o),p=_(r);a.set(p,e[o]=Q(p,r))}return{c(){P(t.$$.fragment),s=B();for(let o=0;o<e.length;o+=1)e[o].c();n=M()},l(o){y(t.$$.fragment,o),s=w(o);for(let r=0;r<e.length;r+=1)e[r].l(o);n=M()},m(o,r){E(t,o,r),d(o,s,r);for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,r);d(o,n,r),l=!0},p(o,r){const p={};r&64&&(p.$$scope={dirty:r,ctx:o}),t.$set(p),r&1&&(c=J(o[0]),X(),e=ne(e,r,_,1,o,c,a,n.parentNode,ae,Q,n,K),W())},i(o){if(!l){g(t.$$.fragment,o);for(let r=0;r<c.length;r+=1)g(e[r]);l=!0}},o(o){b(t.$$.fragment,o);for(let r=0;r<e.length;r+=1)b(e[r]);l=!1},d(o){o&&(m(s),m(n)),I(t,o);for(let r=0;r<e.length;r+=1)e[r].d(o)}}}function Be(i){let t,s;return t=new me({props:{onAddDemoEntities:i[2]}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p:U,i(e){s||(g(t.$$.fragment,e),s=!0)},o(e){b(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function we(i){let t,s;return t=new ue({}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,a){E(t,e,a),s=!0},p:U,i(e){s||(g(t.$$.fragment,e),s=!0)},o(e){b(t.$$.fragment,e),s=!1},d(e){I(t,e)}}}function Pe(i){let t;return{c(){t=S("Sorted by latest recipe date")},l(s){t=T(s,"Sorted by latest recipe date")},m(s,e){d(s,t,e)},d(s){s&&m(t)}}}function Q(i,t){let s,e,a;return e=new he({props:{href:N.coffeeBeansItem(t[3].name),item:t[3],recipeCount:t[3].recipeCount}}),{key:i,first:null,c(){s=M(),P(e.$$.fragment),this.h()},l(n){s=M(),y(e.$$.fragment,n),this.h()},h(){this.first=s},m(n,l){d(n,s,l),E(e,n,l),a=!0},p(n,l){t=n;const c={};l&1&&(c.href=N.coffeeBeansItem(t[3].name)),l&1&&(c.item=t[3]),l&1&&(c.recipeCount=t[3].recipeCount),e.$set(c)},i(n){a||(g(e.$$.fragment,n),a=!0)},o(n){b(e.$$.fragment,n),a=!1},d(n){n&&m(s),I(e,n)}}}function ye(i){let t,s,e,a,n,l,c,_;s=new pe({props:{$$slots:{default:[ke]},$$scope:{ctx:i}}});const o=[we,Be,Ce],r=[];function p(f,u){return f[0]===void 0?0:f[0].length===0?1:2}return a=p(i),n=r[a]=o[a](i),c=new fe({props:{href:N.addRecipe()}}),{c(){t=B(),P(s.$$.fragment),e=B(),n.c(),l=B(),P(c.$$.fragment),this.h()},l(f){se("svelte-n9a09p",document.head).forEach(m),t=w(f),y(s.$$.fragment,f),e=w(f),n.l(f),l=w(f),y(c.$$.fragment,f),this.h()},h(){document.title="PourOverPotato app"},m(f,u){d(f,t,u),E(s,f,u),d(f,e,u),r[a].m(f,u),d(f,l,u),E(c,f,u),_=!0},p(f,[u]){const k={};u&64&&(k.$$scope={dirty:u,ctx:f}),s.$set(k);let C=a;a=p(f),a===C?r[a].p(f,u):(X(),b(r[C],1,1,()=>{r[C]=null}),W(),n=r[a],n?n.p(f,u):(n=r[a]=o[a](f),n.c()),g(n,1),n.m(l.parentNode,l))},i(f){_||(g(s.$$.fragment,f),g(n),g(c.$$.fragment,f),_=!0)},o(f){b(s.$$.fragment,f),b(n),b(c.$$.fragment,f),_=!1},d(f){f&&(m(t),m(e),m(l)),I(s,f),r[a].d(f),I(c,f)}}}function Ee(i,t,s){let e;te(()=>{a()});async function a(){const l=await re(),c=await Promise.all(l.map(async _=>{const o=await oe(_.id);return{..._,recipeCount:o.length,latestRecipeTimestamp:o.length>0?o.sort(ie)[0].timestamp:void 0}}));s(0,e=c.sort(ce))}return[e,a,()=>a()]}class Le extends j{constructor(t){super(),F(this,t,Ee,ye,V,{})}}export{Le as component};
