import{s as Le,o as je,b as F,a as U,n as Y}from"../chunks/scheduler.Cw1-ZcKD.js";import{S as ye,i as ze,s as R,k as T,w as oe,l as Je,d as v,f as D,m as I,g as E,n as k,A as Pe,o as h,p as Me,q as g,r as C,u as Ne,t as Fe,b as Ue,v as A,e as Z,c as x,a as Ae,z as q,y as he,h as W,B as Ke}from"../chunks/index.DHsbL8_X.js";import{b as Qe,g as O}from"../chunks/entry.DRGciIfZ.js";import{R as re,b as Xe,g as Ye,f as $e,d as Ce,c as Ze,e as xe,h as et,i as tt,p as Be,u as nt}from"../chunks/indexedDB.9t1uuO4e.js";import{n as ae}from"../chunks/naming.DmthAWfq.js";import{r as G}from"../chunks/routes.BYcm90ft.js";import{C as at,p as _e,N as Se,F as ot,T as rt}from"../chunks/NumberInput.DywvbsEd.js";import{L as it}from"../chunks/Loading.BjzKhRf5.js";import{F as st,D as lt,a as ft}from"../chunks/FlexRow.GoYR74vG.js";import{T as ge}from"../chunks/Textarea.DSVAmZwN.js";import{D as ut}from"../chunks/DeleteConfirmationModal.58vAVeVc.js";import{P as pt}from"../chunks/PageHeadline.BeVZTrZl.js";function ct({params:a}){const e=Number.parseFloat(a.id);if(Number.isInteger(e)===!1)throw new Error("Non-integer route params are not allowed for this page. The matcher should have filtered outnon-integer values. Something is wrong with the code.");return{recipeId:e}}const At=Object.freeze(Object.defineProperty({__proto__:null,load:ct},Symbol.toStringTag,{value:"Module"}));function mt(a){let e;return{c(){e=Fe("Edit recipe")},l(t){e=Ue(t,"Edit recipe")},m(t,o){E(t,e,o)},d(t){t&&v(e)}}}function Re(a){let e,t,o,f;function i(l){a[18](l)}let n={$$slots:{modal:[gt],button:[dt]},$$scope:{ctx:a}};return a[1]!==void 0&&(n.setDropdownState=a[1]),t=new lt({props:n}),F.push(()=>A(t,"setDropdownState",i)),{c(){e=Z("div"),T(t.$$.fragment),this.h()},l(l){e=x(l,"DIV",{class:!0});var c=Ae(e);I(t.$$.fragment,c),c.forEach(v),this.h()},h(){q(e,"class","menu-container svelte-vb4cmr")},m(l,c){E(l,e,c),k(t,e,null),f=!0},p(l,c){const _={};c&536870915&&(_.$$scope={dirty:c,ctx:l}),!o&&c&2&&(o=!0,_.setDropdownState=l[1],U(()=>o=!1)),t.$set(_)},i(l){f||(g(t.$$.fragment,l),f=!0)},o(l){h(t.$$.fragment,l),f=!1},d(l){l&&v(e),C(t)}}}function dt(a){let e,t;return e=new ft({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",a[17]),{c(){T(e.$$.fragment)},l(o){I(e.$$.fragment,o)},m(o,f){k(e,o,f),t=!0},p:Y,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){C(e,o)}}}function _t(a){let e;return{c(){e=Fe("Please confirm you want to delete this recipe")},l(t){e=Ue(t,"Please confirm you want to delete this recipe")},m(t,o){E(t,e,o)},d(t){t&&v(e)}}}function gt(a){let e,t,o;function f(n){a[16](n)}let i={slot:"modal",onDeleteClick:a[13],$$slots:{default:[_t]},$$scope:{ctx:a}};return a[0]!==void 0&&(i.setModalState=a[0]),e=new ut({props:i}),F.push(()=>A(e,"setModalState",f)),{c(){T(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,l){k(e,n,l),o=!0},p(n,l){const c={};l&536870912&&(c.$$scope={dirty:l,ctx:n}),!t&&l&1&&(t=!0,c.setModalState=n[0],U(()=>t=!1)),e.$set(c)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){h(e.$$.fragment,n),o=!1},d(n){C(e,n)}}}function ht(a){let e,t,o,f;e=new pt({props:{$$slots:{default:[mt]},$$scope:{ctx:a}}});let i=a[2]instanceof re&&Re(a);return{c(){T(e.$$.fragment),t=R(),i&&i.c(),o=oe()},l(n){I(e.$$.fragment,n),t=D(n),i&&i.l(n),o=oe()},m(n,l){k(e,n,l),E(n,t,l),i&&i.m(n,l),E(n,o,l),f=!0},p(n,l){const c={};l&536870912&&(c.$$scope={dirty:l,ctx:n}),e.$set(c),n[2]instanceof re?i?(i.p(n,l),l&4&&g(i,1)):(i=Re(n),i.c(),g(i,1),i.m(o.parentNode,o)):i&&(Ne(),h(i,1,1,()=>{i=null}),Me())},i(n){f||(g(e.$$.fragment,n),g(i),f=!0)},o(n){h(e.$$.fragment,n),h(i),f=!1},d(n){n&&(v(t),v(o)),C(e,n),i&&i.d(n)}}}function $t(a){let e,t="404",o,f,i="Not Found";return{c(){e=Z("p"),e.textContent=t,o=R(),f=Z("p"),f.textContent=i},l(n){e=x(n,"P",{"data-svelte-h":!0}),he(e)!=="svelte-swq3p4"&&(e.textContent=t),o=D(n),f=x(n,"P",{"data-svelte-h":!0}),he(f)!=="svelte-14ywr5"&&(f.textContent=i)},m(n,l){E(n,e,l),E(n,o,l),E(n,f,l)},p:Y,i:Y,o:Y,d(n){n&&(v(e),v(o),v(f))}}}function bt(a){let e,t,o,f,i,n,l,c,_,$,d,b,u,m,B,w,V,L,j,S,y,z,P,J,K,M,ee="Save changes",H,Q,te;function ie(r){a[19](r)}let s={allCoffeeBeans:a[3],initialCoffeeBeansId:a[2].coffeeBeansId,showAddButton:!1};a[4]!==void 0&&(s.selectedCoffeeBeansId=a[4]),t=new at({props:s}),F.push(()=>A(t,"selectedCoffeeBeansId",ie));function N(r){a[20](r)}let X={id:De,initialValue:a[2].recipeTarget,label:ae.recipe.recipeTarget+":",name:De,placeholder:_e.recipeTarget};a[5]!==void 0&&(X.value=a[5]),i=new ge({props:X}),F.push(()=>A(i,"value",N));function se(r){a[21](r)}let be={id:Ee,initialValue:a[2].recipeResult,label:ae.recipe.recipeResult+":",name:Ee,placeholder:_e.recipeResult};a[6]!==void 0&&(be.value=a[6]),c=new ge({props:be}),F.push(()=>A(c,"value",se));function We(r){a[22](r)}let ve={initialValue:a[2].outWeight,labelText:ae.recipe.outWeight+" (g):",min:0,nameAttr:Tt,step:5};a[8]!==void 0&&(ve.value=a[8]),d=new Se({props:ve}),F.push(()=>A(d,"value",We));function Oe(r){a[23](r)}let we={initialValue:a[2].rating,labelText:"Rating:",max:5,min:0,nameAttr:It,step:.5};a[9]!==void 0&&(we.value=a[9]),m=new Se({props:we}),F.push(()=>A(m,"value",Oe));function Ge(r){a[24](r)}let Te={initialValue:a[2].favorite};a[10]!==void 0&&(Te.value=a[10]),V=new ot({props:Te}),F.push(()=>A(V,"value",Ge));function He(r){a[25](r)}let Ie={id:Ve,initialValue:a[2].recipeThoughts,label:ae.recipe.recipeThoughts+":",name:Ve,placeholder:_e.recipeThoughts};a[7]!==void 0&&(Ie.value=a[7]),S=new ge({props:Ie}),F.push(()=>A(S,"value",He));function qe(r){a[26](r)}let ke={initialValue:$e(a[2].timestamp)};return a[11]!==void 0&&(ke.value=a[11]),P=new rt({props:ke}),F.push(()=>A(P,"value",qe)),{c(){e=Z("form"),T(t.$$.fragment),f=R(),T(i.$$.fragment),l=R(),T(c.$$.fragment),$=R(),T(d.$$.fragment),u=R(),T(m.$$.fragment),w=R(),T(V.$$.fragment),j=R(),T(S.$$.fragment),z=R(),T(P.$$.fragment),K=R(),M=Z("button"),M.textContent=ee,this.h()},l(r){e=x(r,"FORM",{id:!0,class:!0});var p=Ae(e);I(t.$$.fragment,p),f=D(p),I(i.$$.fragment,p),l=D(p),I(c.$$.fragment,p),$=D(p),I(d.$$.fragment,p),u=D(p),I(m.$$.fragment,p),w=D(p),I(V.$$.fragment,p),j=D(p),I(S.$$.fragment,p),z=D(p),I(P.$$.fragment,p),K=D(p),M=x(p,"BUTTON",{class:!0,form:!0,type:!0,"data-svelte-h":!0}),he(M)!=="svelte-1dkauk3"&&(M.textContent=ee),p.forEach(v),this.h()},h(){q(M,"class","my-button svelte-vb4cmr"),q(M,"form","edit-recipe"),q(M,"type","submit"),q(e,"id","edit-recipe"),q(e,"class","svelte-vb4cmr")},m(r,p){E(r,e,p),k(t,e,null),W(e,f),k(i,e,null),W(e,l),k(c,e,null),W(e,$),k(d,e,null),W(e,u),k(m,e,null),W(e,w),k(V,e,null),W(e,j),k(S,e,null),W(e,z),k(P,e,null),W(e,K),W(e,M),H=!0,Q||(te=Pe(e,"submit",Ke(a[14])),Q=!0)},p(r,p){const ne={};p&8&&(ne.allCoffeeBeans=r[3]),p&4&&(ne.initialCoffeeBeansId=r[2].coffeeBeansId),!o&&p&16&&(o=!0,ne.selectedCoffeeBeansId=r[4],U(()=>o=!1)),t.$set(ne);const le={};p&4&&(le.initialValue=r[2].recipeTarget),!n&&p&32&&(n=!0,le.value=r[5],U(()=>n=!1)),i.$set(le);const fe={};p&4&&(fe.initialValue=r[2].recipeResult),!_&&p&64&&(_=!0,fe.value=r[6],U(()=>_=!1)),c.$set(fe);const ue={};p&4&&(ue.initialValue=r[2].outWeight),!b&&p&256&&(b=!0,ue.value=r[8],U(()=>b=!1)),d.$set(ue);const pe={};p&4&&(pe.initialValue=r[2].rating),!B&&p&512&&(B=!0,pe.value=r[9],U(()=>B=!1)),m.$set(pe);const ce={};p&4&&(ce.initialValue=r[2].favorite),!L&&p&1024&&(L=!0,ce.value=r[10],U(()=>L=!1)),V.$set(ce);const me={};p&4&&(me.initialValue=r[2].recipeThoughts),!y&&p&128&&(y=!0,me.value=r[7],U(()=>y=!1)),S.$set(me);const de={};p&4&&(de.initialValue=$e(r[2].timestamp)),!J&&p&2048&&(J=!0,de.value=r[11],U(()=>J=!1)),P.$set(de)},i(r){H||(g(t.$$.fragment,r),g(i.$$.fragment,r),g(c.$$.fragment,r),g(d.$$.fragment,r),g(m.$$.fragment,r),g(V.$$.fragment,r),g(S.$$.fragment,r),g(P.$$.fragment,r),H=!0)},o(r){h(t.$$.fragment,r),h(i.$$.fragment,r),h(c.$$.fragment,r),h(d.$$.fragment,r),h(m.$$.fragment,r),h(V.$$.fragment,r),h(S.$$.fragment,r),h(P.$$.fragment,r),H=!1},d(r){r&&v(e),C(t),C(i),C(c),C(d),C(m),C(V),C(S),C(P),Q=!1,te()}}}function vt(a){let e,t;return e=new it({}),{c(){T(e.$$.fragment)},l(o){I(e.$$.fragment,o)},m(o,f){k(e,o,f),t=!0},p:Y,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){C(e,o)}}}function wt(a){let e,t,o,f,i,n,l,c,_;t=new st({props:{$$slots:{default:[ht]},$$scope:{ctx:a}}});const $=[vt,bt,$t],d=[];function b(u,m){return u[2]===null?0:u[2]instanceof re?1:2}return f=b(a),i=d[f]=$[f](a),{c(){e=R(),T(t.$$.fragment),o=R(),i.c(),n=oe(),this.h()},l(u){Je("svelte-cc1fw0",document.head).forEach(v),e=D(u),I(t.$$.fragment,u),o=D(u),i.l(u),n=oe(),this.h()},h(){document.title="Edit recipe - PourOverPotato app"},m(u,m){E(u,e,m),k(t,u,m),E(u,o,m),d[f].m(u,m),E(u,n,m),l=!0,c||(_=Pe(window,"beforeunload",a[12]),c=!0)},p(u,[m]){const B={};m&536870919&&(B.$$scope={dirty:m,ctx:u}),t.$set(B);let w=f;f=b(u),f===w?d[f].p(u,m):(Ne(),h(d[w],1,1,()=>{d[w]=null}),Me(),i=d[f],i?i.p(u,m):(i=d[f]=$[f](u),i.c()),g(i,1),i.m(n.parentNode,n))},i(u){l||(g(t.$$.fragment,u),g(i),l=!0)},o(u){h(t.$$.fragment,u),h(i),l=!1},d(u){u&&(v(e),v(o),v(n)),C(t,u),d[f].d(u),c=!1,_()}}}const De="recipe-target",Ee="recipe-result",Ve="recipe-thoughts",Tt="out-weight",It="rating";function kt(a,e,t){let{data:o}=e,f,i,n=null,l,c=!1,_,$,d,b,u,m,B,w;Qe(s=>{s.willUnload===!1&&c===!1&&S()&&confirm("Do you want to navigate away and lose unsaved changes?")===!1&&s.cancel()}),je(()=>{Xe(o.recipeId).then(s=>{t(2,n=s),s!==void 0&&Ye().then(N=>{t(3,l=N),t(4,_=s.coffeeBeansId),t(5,$=s.recipeTarget),t(6,d=s.recipeResult),t(7,b=s.recipeThoughts),t(8,u=s.outWeight),t(9,m=s.rating),t(10,B=s.favorite),t(11,w=$e(s.timestamp))})})});function V(s){if(c===!1&&S())return s.preventDefault(),s.returnValue="","Are you sure you want to navigate away?"}async function L(){if(n==null)return;const s=n;await Ce(s.id,!0,s);const N=await Ze(s.coffeeBeansId);xe("Recipe deleted.",async()=>{await nt(s),O(G.home).then(()=>N?O(G.coffeeBeansItem(N.name)):O(G.home))},async()=>{await Ce(s.id)}),c=!0,N?O(G.coffeeBeansItem(N.name)):O(G.home)}async function j(){t(5,$=$.trim()),t(6,d=d.trim()),t(7,b=b.trim());const s=Be(w);if(_===void 0)throw new Error("Please select the coffee beans.");if(n==null)throw new Error("Recipe was undefined or null somehow.");const N=new re({coffeeBeansId:_,recipeTarget:$,recipeResult:d,recipeThoughts:b,outWeight:u,rating:m,favorite:B,timestamp:s},n.id);await et(N),tt("Recipe changes saved."),c=!0;const X=l==null?void 0:l.find(se=>se.id===_);if(X===void 0){O(G.home);return}O(G.coffeeBeansItem(X.name))}function S(){return n.coffeeBeansId!==_||n.recipeTarget!==$||n.recipeResult!==d||n.recipeThoughts!==b||n.outWeight!==u||n.rating!==m||n.favorite!==B||n.timestamp.getTime()!==Be(w).getTime()}function y(s){f=s,t(0,f)}const z=()=>{i("closed"),f("open")};function P(s){i=s,t(1,i)}function J(s){_=s,t(4,_)}function K(s){$=s,t(5,$)}function M(s){d=s,t(6,d)}function ee(s){u=s,t(8,u)}function H(s){m=s,t(9,m)}function Q(s){B=s,t(10,B)}function te(s){b=s,t(7,b)}function ie(s){w=s,t(11,w)}return a.$$set=s=>{"data"in s&&t(15,o=s.data)},[f,i,n,l,_,$,d,b,u,m,B,w,V,L,j,o,y,z,P,J,K,M,ee,H,Q,te,ie]}class Wt extends ye{constructor(e){super(),ze(this,e,kt,wt,Le,{data:15})}}export{Wt as component,At as universal};
