import{s as ce,d as A,e as J,f as se,r as $e,n as N}from"../chunks/scheduler.FewvdMMF.js";import{S as me,i as pe,y as Q,k as I,m as P,n as R,q as S,o as B,r as T,e as F,s as O,t as x,c as j,a as U,f as L,b as ee,d as b,z as Z,x as C,g as M,h as E,D as le,A as X,B as he,j as te,v as z,l as ge,p as ne,u as ae}from"../chunks/index.Czz-Se56.js";import{e as re,u as be,o as ve}from"../chunks/each.WAMKkCCB.js";import{g as G}from"../chunks/entry.odFJkewz.js";import{C as we,l as ke,m as Ce,i as Se,n as Be,k as De,o as ie,q as fe,e as Me,r as ye,s as Ne}from"../chunks/indexedDB.DSM7SfQo.js";import{s as Ee,A as Ie,N as Pe}from"../chunks/NoItemsYetP.I_dZVXBA.js";import{r as q}from"../chunks/routes.oDD19Cll.js";import{S as Re,R as Te}from"../chunks/SortRecipesSelect.3w3ZFPG5.js";import{L as _e}from"../chunks/Loading.SseRikTI.js";import{D as Fe,a as je}from"../chunks/DropdownMenuItem.3DGY3XXe.js";import{F as Oe}from"../chunks/FlexRow.dGmwZcxd.js";import{D as Le}from"../chunks/DeleteConfirmationModal.6e0xusxk.js";import{P as Ve}from"../chunks/PageHeadline.eGc9cHDC.js";import{L as qe,T as ze}from"../chunks/Textarea.SiInVkMs.js";import{M as Ae}from"../chunks/Modal.Bg1Fh3fb.js";function He({params:a}){return{coffeeBeansName:a.name}}const Mt=Object.freeze(Object.defineProperty({__proto__:null,load:He},Symbol.toStringTag,{value:"Module"}));function Ke(a){let e;return{c(){e=x("Coffee beans name:")},l(n){e=ee(n,"Coffee beans name:")},m(n,t){M(n,e,t)},d(n){n&&b(e)}}}function Ue(a){let e,n,t,o,s,l,r,c,i,f,_,v,u,k,d,g,p,D="Save",m,w,H;t=new qe({props:{for_:"name",valid:!a[0],$$slots:{default:[Ke]},$$scope:{ctx:a}}});function K(h){a[16](h)}function $(h){a[17](h)}let W={id:"description",label:"Description:",name:"description",placeholder:Ye};return a[3]!==void 0&&(W.this_=a[3]),a[6]!==void 0&&(W.value=a[6]),u=new ze({props:W}),A.push(()=>Q(u,"this_",K)),A.push(()=>Q(u,"value",$)),u.$on("keydown",a[9]),{c(){e=F("form"),n=F("div"),I(t.$$.fragment),o=O(),s=F("input"),c=O(),i=F("p"),f=x(a[7]),_=O(),v=F("div"),I(u.$$.fragment),g=O(),p=F("button"),p.textContent=D,this.h()},l(h){e=j(h,"FORM",{class:!0});var y=U(e);n=j(y,"DIV",{class:!0});var V=U(n);P(t.$$.fragment,V),o=L(V),s=j(V,"INPUT",{id:!0,autocomplete:!0,class:!0,name:!0,placeholder:!0,type:!0}),c=L(V),i=j(V,"P",{class:!0});var Y=U(i);f=ee(Y,a[7]),Y.forEach(b),V.forEach(b),_=L(y),v=j(y,"DIV",{class:!0});var oe=U(v);P(u.$$.fragment,oe),oe.forEach(b),g=L(y),p=j(y,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Z(p)!=="svelte-j4uhei"&&(p.textContent=D),y.forEach(b),this.h()},h(){C(s,"id","name"),C(s,"autocomplete","off"),C(s,"class",l=se(a[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"),C(s,"name","name"),C(s,"placeholder",r=a[0]?"":"Example: Rwanda Mabanza"),C(s,"type","text"),C(i,"class","mt-2 text-sm text-red-600 dark:text-red-500"),C(n,"class","mb-5"),C(v,"class","my-div mb-5 svelte-15jwmuc"),C(p,"class","button-submit svelte-15jwmuc"),C(p,"type","submit"),C(e,"class","mx-auto")},m(h,y){M(h,e,y),E(e,n),R(t,n,null),E(n,o),E(n,s),a[14](s),le(s,a[5]),E(n,c),E(n,i),E(i,f),E(e,_),E(e,v),R(u,v,null),E(e,g),E(e,p),a[18](e),m=!0,w||(H=[X(s,"input",a[15]),X(s,"input",a[11]),X(s,"keydown",a[8]),X(e,"submit",he(a[10]))],w=!0)},p(h,y){const V={};y&1&&(V.valid=!h[0]),y&1048576&&(V.$$scope={dirty:y,ctx:h}),t.$set(V),(!m||y&1&&l!==(l=se(h[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"))&&C(s,"class",l),(!m||y&1&&r!==(r=h[0]?"":"Example: Rwanda Mabanza"))&&C(s,"placeholder",r),y&32&&s.value!==h[5]&&le(s,h[5]),(!m||y&128)&&te(f,h[7]);const Y={};!k&&y&8&&(k=!0,Y.this_=h[3],J(()=>k=!1)),!d&&y&64&&(d=!0,Y.value=h[6],J(()=>d=!1)),u.$set(Y)},i(h){m||(S(t.$$.fragment,h),S(u.$$.fragment,h),m=!0)},o(h){B(t.$$.fragment,h),B(u.$$.fragment,h),m=!1},d(h){h&&b(e),T(t),a[14](null),T(u),a[18](null),w=!1,$e(H)}}}function We(a){let e,n,t;function o(l){a[19](l)}let s={title:"Edit coffee beans",$$slots:{default:[Ue]},$$scope:{ctx:a}};return a[1]!==void 0&&(s.setState=a[1]),e=new Ae({props:s}),A.push(()=>Q(e,"setState",o)),{c(){I(e.$$.fragment)},l(l){P(e.$$.fragment,l)},m(l,r){R(e,l,r),t=!0},p(l,[r]){const c={};r&1048829&&(c.$$scope={dirty:r,ctx:l}),!n&&r&2&&(n=!0,c.setState=l[1],J(()=>n=!1)),e.$set(c)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}const Ye="Example: Washed process. Notes: plum, cherry.";function Ge(a,e,n){const t=$=>{s($)};let{item:o}=e,s,l,r,c,i=o.name??"",f=o.description??"",_="",v=!1;function u($){$.key==="Enter"&&($.preventDefault(),r.focus())}function k($){$.key==="Enter"&&($.metaKey||$.ctrlKey)&&($.preventDefault(),c.requestSubmit())}async function d(){const $=new we({name:i,description:f},o.id),W=ke.create($);if(W==="ValidationFailed_NameMustBeAtLeast3CharsLong"){n(0,v=!0),n(7,_="Name must be at least 3 characters long.");return}const h=await Ce(W);if(h==="Failure_NameAlreadyExist"){n(0,v=!0),n(7,_="Coffee beans with this name exist already.");return}Se(`Coffee beans "${h.name}" changes saved.`),n(12,o=h),s("closed"),G(q.coffeeBeansItem(h.name))}function g(){v&&(n(0,v=!1),n(7,_=""))}function p($){A[$?"unshift":"push"](()=>{l=$,n(2,l)})}function D(){i=this.value,n(5,i)}function m($){r=$,n(3,r)}function w($){f=$,n(6,f)}function H($){A[$?"unshift":"push"](()=>{c=$,n(4,c)})}function K($){s=$,n(1,s)}return a.$$set=$=>{"item"in $&&n(12,o=$.item)},a.$$.update=()=>{a.$$.dirty&1&&v===!1&&n(7,_="")},[v,s,l,r,c,i,f,_,u,k,d,g,o,t,p,D,m,w,H,K]}class Je extends me{constructor(e){super(),pe(this,e,Ge,We,ce,{setModalState:13,item:12})}get setModalState(){return this.$$.ctx[13]}}function ue(a,e,n){const t=a.slice();return t[14]=e[n],t}function Qe(a){return document.title=a[3].name+" - PourOverPotato app",{c:N,l:N,m:N,d:N}}function Xe(a){return{c(){this.h()},l(e){this.h()},h(){document.title="404 Not Found - PourOverPotato app"},m:N,d:N}}function Ze(a){return{c(){this.h()},l(e){this.h()},h(){document.title="loading... - PourOverPotato app"},m:N,d:N}}function xe(a){let e,n,t,o=a[3].description+"",s,l,r,c,i,f,_;e=new Oe({props:{$$slots:{default:[lt]},$$scope:{ctx:a}}});const v=[ft,it,rt],u=[];function k(d,g){return d[4]===void 0?0:d[4].length===0?1:2}return r=k(a),c=u[r]=v[r](a),f=new Ie({props:{href:q.addRecipe(a[3].name)}}),{c(){I(e.$$.fragment),n=O(),t=F("p"),s=x(o),l=O(),c.c(),i=O(),I(f.$$.fragment),this.h()},l(d){P(e.$$.fragment,d),n=L(d),t=j(d,"P",{class:!0});var g=U(t);s=ee(g,o),g.forEach(b),l=L(d),c.l(d),i=L(d),P(f.$$.fragment,d),this.h()},h(){C(t,"class","coffee-beans-description svelte-1vu3dn8")},m(d,g){R(e,d,g),M(d,n,g),M(d,t,g),E(t,s),M(d,l,g),u[r].m(d,g),M(d,i,g),R(f,d,g),_=!0},p(d,g){const p={};g&131087&&(p.$$scope={dirty:g,ctx:d}),e.$set(p),(!_||g&8)&&o!==(o=d[3].description+"")&&te(s,o);let D=r;r=k(d),r===D?u[r].p(d,g):(ae(),B(u[D],1,1,()=>{u[D]=null}),ne(),c=u[r],c?c.p(d,g):(c=u[r]=v[r](d),c.c()),S(c,1),c.m(i.parentNode,i));const m={};g&8&&(m.href=q.addRecipe(d[3].name)),f.$set(m)},i(d){_||(S(e.$$.fragment,d),S(c),S(f.$$.fragment,d),_=!0)},o(d){B(e.$$.fragment,d),B(c),B(f.$$.fragment,d),_=!1},d(d){d&&(b(n),b(t),b(l),b(i)),T(e,d),u[r].d(d),T(f,d)}}}function et(a){let e,n="<h1>404</h1> <p>Coffee beans not found.</p>";return{c(){e=F("div"),e.innerHTML=n,this.h()},l(t){e=j(t,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-akmamj"&&(e.innerHTML=n),this.h()},h(){C(e,"class","loading-position svelte-1vu3dn8")},m(t,o){M(t,e,o)},p:N,i:N,o:N,d(t){t&&b(e)}}}function tt(a){let e,n,t;return n=new _e({}),{c(){e=F("div"),I(n.$$.fragment),this.h()},l(o){e=j(o,"DIV",{class:!0});var s=U(e);P(n.$$.fragment,s),s.forEach(b),this.h()},h(){C(e,"class","loading-position svelte-1vu3dn8")},m(o,s){M(o,e,s),R(n,e,null),t=!0},p:N,i(o){t||(S(n.$$.fragment,o),t=!0)},o(o){B(n.$$.fragment,o),t=!1},d(o){o&&b(e),T(n)}}}function nt(a){let e=a[3].name+"",n;return{c(){n=x(e)},l(t){n=ee(t,e)},m(t,o){M(t,n,o)},p(t,o){o&8&&e!==(e=t[3].name+"")&&te(n,e)},d(t){t&&b(n)}}}function at(a){let e,n;return e=new je({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",a[11]),{c(){I(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){R(e,t,o),n=!0},p:N,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ot(a){let e,n="Please confirm you want to delete these coffee beans.",t,o,s="The dependent recipes will be deleted too.";return{c(){e=F("p"),e.textContent=n,t=O(),o=F("p"),o.textContent=s},l(l){e=j(l,"P",{"data-svelte-h":!0}),Z(e)!=="svelte-jtslft"&&(e.textContent=n),t=L(l),o=j(l,"P",{"data-svelte-h":!0}),Z(o)!=="svelte-puw9d7"&&(o.textContent=s)},m(l,r){M(l,e,r),M(l,t,r),M(l,o,r)},p:N,d(l){l&&(b(e),b(t),b(o))}}}function st(a){let e,n,t;function o(l){a[10](l)}let s={slot:"modal",onDeleteClick:a[5],$$slots:{default:[ot]},$$scope:{ctx:a}};return a[0]!==void 0&&(s.setModalState=a[0]),e=new Le({props:s}),A.push(()=>Q(e,"setModalState",o)),{c(){I(e.$$.fragment)},l(l){P(e.$$.fragment,l)},m(l,r){R(e,l,r),t=!0},p(l,r){const c={};r&131072&&(c.$$scope={dirty:r,ctx:l}),!n&&r&1&&(n=!0,c.setModalState=l[0],J(()=>n=!1)),e.$set(c)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function lt(a){let e,n,t,o,s="Edit",l,r,c,i,f,_,v,u,k;e=new Ve({props:{$$slots:{default:[nt]},$$scope:{ctx:a}}});function d(m){a[9](m)}let g={item:a[3]};a[2]!==void 0&&(g.setModalState=a[2]),r=new Je({props:g}),A.push(()=>Q(r,"setModalState",d));function p(m){a[12](m)}let D={$$slots:{modal:[st],button:[at]},$$scope:{ctx:a}};return a[1]!==void 0&&(D.setDropdownState=a[1]),f=new Fe({props:D}),A.push(()=>Q(f,"setDropdownState",p)),{c(){I(e.$$.fragment),n=O(),t=F("div"),o=F("button"),o.textContent=s,l=O(),I(r.$$.fragment),i=O(),I(f.$$.fragment),this.h()},l(m){P(e.$$.fragment,m),n=L(m),t=j(m,"DIV",{class:!0});var w=U(t);o=j(w,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Z(o)!=="svelte-gleq7e"&&(o.textContent=s),l=L(w),P(r.$$.fragment,w),i=L(w),P(f.$$.fragment,w),w.forEach(b),this.h()},h(){C(o,"class","edit-button svelte-1vu3dn8"),C(o,"type","button"),C(t,"class","menu-container svelte-1vu3dn8")},m(m,w){R(e,m,w),M(m,n,w),M(m,t,w),E(t,o),E(t,l),R(r,t,null),E(t,i),R(f,t,null),v=!0,u||(k=X(o,"click",a[8]),u=!0)},p(m,w){const H={};w&131080&&(H.$$scope={dirty:w,ctx:m}),e.$set(H);const K={};w&8&&(K.item=m[3]),!c&&w&4&&(c=!0,K.setModalState=m[2],J(()=>c=!1)),r.$set(K);const $={};w&131075&&($.$$scope={dirty:w,ctx:m}),!_&&w&2&&(_=!0,$.setDropdownState=m[1],J(()=>_=!1)),f.$set($)},i(m){v||(S(e.$$.fragment,m),S(r.$$.fragment,m),S(f.$$.fragment,m),v=!0)},o(m){B(e.$$.fragment,m),B(r.$$.fragment,m),B(f.$$.fragment,m),v=!1},d(m){m&&(b(n),b(t)),T(e,m),T(r),T(f),u=!1,k()}}}function rt(a){let e,n,t=[],o=new Map,s,l;e=new Re({props:{onChange:a[6],pageName:"coffeebeans_recipes"}});let r=re(a[4]);const c=i=>i[14].id;for(let i=0;i<r.length;i+=1){let f=ue(a,r,i),_=c(f);o.set(_,t[i]=de(_,f))}return{c(){I(e.$$.fragment),n=O();for(let i=0;i<t.length;i+=1)t[i].c();s=z()},l(i){P(e.$$.fragment,i),n=L(i);for(let f=0;f<t.length;f+=1)t[f].l(i);s=z()},m(i,f){R(e,i,f),M(i,n,f);for(let _=0;_<t.length;_+=1)t[_]&&t[_].m(i,f);M(i,s,f),l=!0},p(i,f){f&24&&(r=re(i[4]),ae(),t=be(t,f,c,1,i,r,o,s.parentNode,ve,de,s,ue),ne())},i(i){if(!l){S(e.$$.fragment,i);for(let f=0;f<r.length;f+=1)S(t[f]);l=!0}},o(i){B(e.$$.fragment,i);for(let f=0;f<t.length;f+=1)B(t[f]);l=!1},d(i){i&&(b(n),b(s)),T(e,i);for(let f=0;f<t.length;f+=1)t[f].d(i)}}}function it(a){let e,n;return e=new Pe({}),{c(){I(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){R(e,t,o),n=!0},p:N,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ft(a){let e,n;return e=new _e({}),{c(){I(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){R(e,t,o),n=!0},p:N,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function de(a,e){let n,t,o;return t=new Te({props:{coffeeBeansName:e[3].name,href:q.recipeItem(e[14].id),recipe:e[14]}}),{key:a,first:null,c(){n=z(),I(t.$$.fragment),this.h()},l(s){n=z(),P(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,l){M(s,n,l),R(t,s,l),o=!0},p(s,l){e=s;const r={};l&8&&(r.coffeeBeansName=e[3].name),l&16&&(r.href=q.recipeItem(e[14].id)),l&16&&(r.recipe=e[14]),t.$set(r)},i(s){o||(S(t.$$.fragment,s),o=!0)},o(s){B(t.$$.fragment,s),o=!1},d(s){s&&b(n),T(t,s)}}}function ut(a){let e,n,t,o,s,l;function r(u,k){return u[3]===void 0?Ze:u[3]==="CoffeeBeansNotFound"?Xe:Qe}let c=r(a),i=c(a);const f=[tt,et,xe],_=[];function v(u,k){return u[3]===void 0?0:u[3]==="CoffeeBeansNotFound"?1:2}return t=v(a),o=_[t]=f[t](a),{c(){i.c(),e=z(),n=O(),o.c(),s=z()},l(u){const k=ge("svelte-1xzg8rg",document.head);i.l(k),e=z(),k.forEach(b),n=L(u),o.l(u),s=z()},m(u,k){i.m(document.head,null),E(document.head,e),M(u,n,k),_[t].m(u,k),M(u,s,k),l=!0},p(u,[k]){c!==(c=r(u))&&(i.d(1),i=c(u),i&&(i.c(),i.m(e.parentNode,e)));let d=t;t=v(u),t===d?_[t].p(u,k):(ae(),B(_[d],1,1,()=>{_[d]=null}),ne(),o=_[t],o?o.p(u,k):(o=_[t]=f[t](u),o.c()),S(o,1),o.m(s.parentNode,s))},i(u){l||(S(o),l=!0)},o(u){B(o),l=!1},d(u){u&&(b(n),b(s)),i.d(u),b(e),_[t].d(u)}}}function dt(a,e,n){let{data:t}=e,o,s,l,r,c;async function i(){if(r===void 0||r==="CoffeeBeansNotFound")return;const p=r,D=await ie(p.id,!0);await fe(p.id,!0,p),G(q.home);const m=D===1?"recipe":"recipes",w=D>0?` and ${D} ${m}`:"";Me(`Coffee beans "${p.name}"`+w+" deleted.",async()=>{await ye(p),await Ne(p.id),G(q.coffeeBeansItem(p.name)).then(()=>G(q.home))},async()=>{await ie(p.id),await fe(p.id),G(q.coffeeBeansItem(p.name)).then(()=>G(q.home))})}function f(p,D){n(4,c=c.sort(D))}async function _(){const p=await Be(t.coffeeBeansName);if(p===void 0){n(3,r="CoffeeBeansNotFound");return}n(3,r=p);const D=await De(r.id);n(4,c=D.sort(Ee))}const v=()=>l("open");function u(p){l=p,n(2,l)}function k(p){o=p,n(0,o)}const d=()=>{o("open"),s("closed")};function g(p){s=p,n(1,s)}return a.$$set=p=>{"data"in p&&n(7,t=p.data)},a.$$.update=()=>{a.$$.dirty&128&&window.indexedDB&&_()},[o,s,l,r,c,i,f,t,v,u,k,d,g]}class yt extends me{constructor(e){super(),pe(this,e,dt,ut,ce,{data:7})}}export{yt as component,Mt as universal};
