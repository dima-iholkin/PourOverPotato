import{s as me,b as A,a as W,f as se,r as he,n as N}from"../chunks/scheduler.vcOl-ZmV.js";import{S as pe,i as _e,v as Y,k as I,m as P,n as R,q as S,o as B,r as T,e as O,s as V,t as x,c as F,a as U,f as j,b as ee,d as w,z as Z,y as C,g as D,h as E,D as re,A as X,B as ge,j as te,w as H,l as be,p as ne,u as ae}from"../chunks/index.RQKtCNd3.js";import{e as le,u as ve,o as we}from"../chunks/each.bu9aILCH.js";import{g as Q}from"../chunks/entry.JHbxsuVv.js";import{C as ke,l as Ce,m as Se,i as Be,n as De,k as Me,o as ie,q as fe,e as ye,r as Ne,s as Ee}from"../chunks/indexedDB.DSM7SfQo.js";import{s as ue,A as Ie,N as Pe}from"../chunks/NoItemsYetP.VQBBPxGQ.js";import{r as q}from"../chunks/routes.NzlGtMX8.js";import{S as Re,R as Te}from"../chunks/SortRecipesSelect.DWyTRy_k.js";import{L as $e}from"../chunks/Loading.3xbXJbHv.js";import{D as Oe,a as Fe}from"../chunks/DropdownMenuItem.gErSQe7c.js";import{F as Ve}from"../chunks/FlexRow.aOHB5zeL.js";import{D as je}from"../chunks/DeleteConfirmationModal.2AGYsWO6.js";import{P as Le}from"../chunks/PageHeadline.YBCxUrY5.js";import{L as qe,T as ze}from"../chunks/Textarea.BJcN6Qbw.js";import{M as Ae}from"../chunks/Modal.3YvdGFbT.js";function He({params:o}){return{coffeeBeansName:o.name}}const Mt=Object.freeze(Object.defineProperty({__proto__:null,load:He},Symbol.toStringTag,{value:"Module"}));function Ke(o){let e;return{c(){e=x("Coffee beans name:")},l(n){e=ee(n,"Coffee beans name:")},m(n,t){D(n,e,t)},d(n){n&&w(e)}}}function Ue(o){let e,n,t,a,l,r,i,c,m,p,h,f,s,_,u,v,y,$="Save",d,k,z;t=new qe({props:{for_:"name",valid:!o[0],$$slots:{default:[Ke]},$$scope:{ctx:o}}});function K(b){o[16](b)}function g(b){o[17](b)}let G={id:"description",label:"Description:",name:"description",placeholder:Ye};return o[3]!==void 0&&(G.this_=o[3]),o[6]!==void 0&&(G.value=o[6]),s=new ze({props:G}),A.push(()=>Y(s,"this_",K)),A.push(()=>Y(s,"value",g)),s.$on("keydown",o[9]),{c(){e=O("form"),n=O("div"),I(t.$$.fragment),a=V(),l=O("input"),c=V(),m=O("p"),p=x(o[7]),h=V(),f=O("div"),I(s.$$.fragment),v=V(),y=O("button"),y.textContent=$,this.h()},l(b){e=F(b,"FORM",{class:!0});var M=U(e);n=F(M,"DIV",{class:!0});var L=U(n);P(t.$$.fragment,L),a=j(L),l=F(L,"INPUT",{id:!0,autocomplete:!0,class:!0,name:!0,placeholder:!0,type:!0}),c=j(L),m=F(L,"P",{class:!0});var J=U(m);p=ee(J,o[7]),J.forEach(w),L.forEach(w),h=j(M),f=F(M,"DIV",{class:!0});var oe=U(f);P(s.$$.fragment,oe),oe.forEach(w),v=j(M),y=F(M,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Z(y)!=="svelte-j4uhei"&&(y.textContent=$),M.forEach(w),this.h()},h(){C(l,"id","name"),C(l,"autocomplete","off"),C(l,"class",r=se(o[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"),C(l,"name","name"),C(l,"placeholder",i=o[0]?"":"Example: Rwanda Mabanza"),C(l,"type","text"),C(m,"class","mt-2 text-sm text-red-600 dark:text-red-500"),C(n,"class","mb-5"),C(f,"class","my-div mb-5 svelte-15jwmuc"),C(y,"class","button-submit svelte-15jwmuc"),C(y,"type","submit"),C(e,"class","mx-auto")},m(b,M){D(b,e,M),E(e,n),R(t,n,null),E(n,a),E(n,l),o[14](l),re(l,o[5]),E(n,c),E(n,m),E(m,p),E(e,h),E(e,f),R(s,f,null),E(e,v),E(e,y),o[18](e),d=!0,k||(z=[X(l,"input",o[15]),X(l,"input",o[11]),X(l,"keydown",o[8]),X(e,"submit",ge(o[10]))],k=!0)},p(b,M){const L={};M&1&&(L.valid=!b[0]),M&1048576&&(L.$$scope={dirty:M,ctx:b}),t.$set(L),(!d||M&1&&r!==(r=se(b[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"))&&C(l,"class",r),(!d||M&1&&i!==(i=b[0]?"":"Example: Rwanda Mabanza"))&&C(l,"placeholder",i),M&32&&l.value!==b[5]&&re(l,b[5]),(!d||M&128)&&te(p,b[7]);const J={};!_&&M&8&&(_=!0,J.this_=b[3],W(()=>_=!1)),!u&&M&64&&(u=!0,J.value=b[6],W(()=>u=!1)),s.$set(J)},i(b){d||(S(t.$$.fragment,b),S(s.$$.fragment,b),d=!0)},o(b){B(t.$$.fragment,b),B(s.$$.fragment,b),d=!1},d(b){b&&w(e),T(t),o[14](null),T(s),o[18](null),k=!1,he(z)}}}function We(o){let e,n,t;function a(r){o[19](r)}let l={title:"Edit coffee beans",$$slots:{default:[Ue]},$$scope:{ctx:o}};return o[1]!==void 0&&(l.setState=o[1]),e=new Ae({props:l}),A.push(()=>Y(e,"setState",a)),{c(){I(e.$$.fragment)},l(r){P(e.$$.fragment,r)},m(r,i){R(e,r,i),t=!0},p(r,[i]){const c={};i&1048829&&(c.$$scope={dirty:i,ctx:r}),!n&&i&2&&(n=!0,c.setState=r[1],W(()=>n=!1)),e.$set(c)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}const Ye="Example: Washed process. Notes: plum, cherry.";function Ge(o,e,n){const t=g=>{l(g)};let{item:a}=e,l,r,i,c,m=a.name??"",p=a.description??"",h="",f=!1;function s(g){g.key==="Enter"&&(g.preventDefault(),i.focus())}function _(g){g.key==="Enter"&&(g.metaKey||g.ctrlKey)&&(g.preventDefault(),c.requestSubmit())}async function u(){const g=new ke({name:m,description:p},a.id),G=Ce.create(g);if(G==="ValidationFailed_NameMustBeAtLeast3CharsLong"){n(0,f=!0),n(7,h="Name must be at least 3 characters long.");return}const b=await Se(G);if(b==="Failure_NameAlreadyExist"){n(0,f=!0),n(7,h="Coffee beans with this name exist already.");return}Be(`Coffee beans "${b.name}" changes saved.`),n(12,a=b),l("closed"),Q(q.coffeeBeansItem(b.name))}function v(){f&&(n(0,f=!1),n(7,h=""))}function y(g){A[g?"unshift":"push"](()=>{r=g,n(2,r)})}function $(){m=this.value,n(5,m)}function d(g){i=g,n(3,i)}function k(g){p=g,n(6,p)}function z(g){A[g?"unshift":"push"](()=>{c=g,n(4,c)})}function K(g){l=g,n(1,l)}return o.$$set=g=>{"item"in g&&n(12,a=g.item)},o.$$.update=()=>{o.$$.dirty&1&&f===!1&&n(7,h="")},[f,l,r,i,c,m,p,h,s,_,u,v,a,t,y,$,d,k,z,K]}class Je extends pe{constructor(e){super(),_e(this,e,Ge,We,me,{setModalState:13,item:12})}get setModalState(){return this.$$.ctx[13]}}function de(o,e,n){const t=o.slice();return t[15]=e[n],t}function Qe(o){return document.title=o[5].name+" - PourOverPotato app",{c:N,l:N,m:N,d:N}}function Xe(o){return{c(){this.h()},l(e){this.h()},h(){document.title="404 Not Found - PourOverPotato app"},m:N,d:N}}function Ze(o){return{c(){this.h()},l(e){this.h()},h(){document.title="loading... - PourOverPotato app"},m:N,d:N}}function xe(o){let e,n,t,a=o[5].description+"",l,r,i,c,m,p,h;e=new Ve({props:{$$slots:{default:[rt]},$$scope:{ctx:o}}});const f=[ft,it,lt],s=[];function _(u,v){return u[0]===void 0?0:u[0].length===0?1:2}return i=_(o),c=s[i]=f[i](o),p=new Ie({props:{href:q.addRecipe(o[5].name)}}),{c(){I(e.$$.fragment),n=V(),t=O("p"),l=x(a),r=V(),c.c(),m=V(),I(p.$$.fragment),this.h()},l(u){P(e.$$.fragment,u),n=j(u),t=F(u,"P",{class:!0});var v=U(t);l=ee(v,a),v.forEach(w),r=j(u),c.l(u),m=j(u),P(p.$$.fragment,u),this.h()},h(){C(t,"class","coffee-beans-description svelte-1vu3dn8")},m(u,v){R(e,u,v),D(u,n,v),D(u,t,v),E(t,l),D(u,r,v),s[i].m(u,v),D(u,m,v),R(p,u,v),h=!0},p(u,v){const y={};v&262204&&(y.$$scope={dirty:v,ctx:u}),e.$set(y),(!h||v&32)&&a!==(a=u[5].description+"")&&te(l,a);let $=i;i=_(u),i===$?s[i].p(u,v):(ae(),B(s[$],1,1,()=>{s[$]=null}),ne(),c=s[i],c?c.p(u,v):(c=s[i]=f[i](u),c.c()),S(c,1),c.m(m.parentNode,m));const d={};v&32&&(d.href=q.addRecipe(u[5].name)),p.$set(d)},i(u){h||(S(e.$$.fragment,u),S(c),S(p.$$.fragment,u),h=!0)},o(u){B(e.$$.fragment,u),B(c),B(p.$$.fragment,u),h=!1},d(u){u&&(w(n),w(t),w(r),w(m)),T(e,u),s[i].d(u),T(p,u)}}}function et(o){let e,n="<h1>404</h1> <p>Coffee beans not found.</p>";return{c(){e=O("div"),e.innerHTML=n,this.h()},l(t){e=F(t,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-akmamj"&&(e.innerHTML=n),this.h()},h(){C(e,"class","loading-position svelte-1vu3dn8")},m(t,a){D(t,e,a)},p:N,i:N,o:N,d(t){t&&w(e)}}}function tt(o){let e,n,t;return n=new $e({}),{c(){e=O("div"),I(n.$$.fragment),this.h()},l(a){e=F(a,"DIV",{class:!0});var l=U(e);P(n.$$.fragment,l),l.forEach(w),this.h()},h(){C(e,"class","loading-position svelte-1vu3dn8")},m(a,l){D(a,e,l),R(n,e,null),t=!0},p:N,i(a){t||(S(n.$$.fragment,a),t=!0)},o(a){B(n.$$.fragment,a),t=!1},d(a){a&&w(e),T(n)}}}function nt(o){let e=o[5].name+"",n;return{c(){n=x(e)},l(t){n=ee(t,e)},m(t,a){D(t,n,a)},p(t,a){a&32&&e!==(e=t[5].name+"")&&te(n,e)},d(t){t&&w(n)}}}function at(o){let e,n;return e=new Fe({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",o[11]),{c(){I(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){R(e,t,a),n=!0},p:N,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ot(o){let e,n="Please confirm you want to delete these coffee beans.",t,a,l="The dependent recipes will be deleted too.";return{c(){e=O("p"),e.textContent=n,t=V(),a=O("p"),a.textContent=l},l(r){e=F(r,"P",{"data-svelte-h":!0}),Z(e)!=="svelte-jtslft"&&(e.textContent=n),t=j(r),a=F(r,"P",{"data-svelte-h":!0}),Z(a)!=="svelte-puw9d7"&&(a.textContent=l)},m(r,i){D(r,e,i),D(r,t,i),D(r,a,i)},p:N,d(r){r&&(w(e),w(t),w(a))}}}function st(o){let e,n,t;function a(r){o[10](r)}let l={slot:"modal",onDeleteClick:o[6],$$slots:{default:[ot]},$$scope:{ctx:o}};return o[2]!==void 0&&(l.setModalState=o[2]),e=new je({props:l}),A.push(()=>Y(e,"setModalState",a)),{c(){I(e.$$.fragment)},l(r){P(e.$$.fragment,r)},m(r,i){R(e,r,i),t=!0},p(r,i){const c={};i&262144&&(c.$$scope={dirty:i,ctx:r}),!n&&i&4&&(n=!0,c.setModalState=r[2],W(()=>n=!1)),e.$set(c)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function rt(o){let e,n,t,a,l="Edit",r,i,c,m,p,h,f,s,_;e=new Le({props:{$$slots:{default:[nt]},$$scope:{ctx:o}}});function u(d){o[9](d)}let v={item:o[5]};o[4]!==void 0&&(v.setModalState=o[4]),i=new Je({props:v}),A.push(()=>Y(i,"setModalState",u));function y(d){o[12](d)}let $={$$slots:{modal:[st],button:[at]},$$scope:{ctx:o}};return o[3]!==void 0&&($.setDropdownState=o[3]),p=new Oe({props:$}),A.push(()=>Y(p,"setDropdownState",y)),{c(){I(e.$$.fragment),n=V(),t=O("div"),a=O("button"),a.textContent=l,r=V(),I(i.$$.fragment),m=V(),I(p.$$.fragment),this.h()},l(d){P(e.$$.fragment,d),n=j(d),t=F(d,"DIV",{class:!0});var k=U(t);a=F(k,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Z(a)!=="svelte-gleq7e"&&(a.textContent=l),r=j(k),P(i.$$.fragment,k),m=j(k),P(p.$$.fragment,k),k.forEach(w),this.h()},h(){C(a,"class","edit-button svelte-1vu3dn8"),C(a,"type","button"),C(t,"class","menu-container svelte-1vu3dn8")},m(d,k){R(e,d,k),D(d,n,k),D(d,t,k),E(t,a),E(t,r),R(i,t,null),E(t,m),R(p,t,null),f=!0,s||(_=X(a,"click",o[8]),s=!0)},p(d,k){const z={};k&262176&&(z.$$scope={dirty:k,ctx:d}),e.$set(z);const K={};k&32&&(K.item=d[5]),!c&&k&16&&(c=!0,K.setModalState=d[4],W(()=>c=!1)),i.$set(K);const g={};k&262156&&(g.$$scope={dirty:k,ctx:d}),!h&&k&8&&(h=!0,g.setDropdownState=d[3],W(()=>h=!1)),p.$set(g)},i(d){f||(S(e.$$.fragment,d),S(i.$$.fragment,d),S(p.$$.fragment,d),f=!0)},o(d){B(e.$$.fragment,d),B(i.$$.fragment,d),B(p.$$.fragment,d),f=!1},d(d){d&&(w(n),w(t)),T(e,d),T(i),T(p),s=!1,_()}}}function lt(o){let e,n,t,a=[],l=new Map,r,i;function c(f){o[13](f)}let m={pageName:"coffeebeans_recipes"};o[1]!==void 0&&(m.sortOrderValue=o[1]),e=new Re({props:m}),A.push(()=>Y(e,"sortOrderValue",c));let p=le(o[0]);const h=f=>f[15].id;for(let f=0;f<p.length;f+=1){let s=de(o,p,f),_=h(s);l.set(_,a[f]=ce(_,s))}return{c(){I(e.$$.fragment),t=V();for(let f=0;f<a.length;f+=1)a[f].c();r=H()},l(f){P(e.$$.fragment,f),t=j(f);for(let s=0;s<a.length;s+=1)a[s].l(f);r=H()},m(f,s){R(e,f,s),D(f,t,s);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(f,s);D(f,r,s),i=!0},p(f,s){const _={};!n&&s&2&&(n=!0,_.sortOrderValue=f[1],W(()=>n=!1)),e.$set(_),s&33&&(p=le(f[0]),ae(),a=ve(a,s,h,1,f,p,l,r.parentNode,we,ce,r,de),ne())},i(f){if(!i){S(e.$$.fragment,f);for(let s=0;s<p.length;s+=1)S(a[s]);i=!0}},o(f){B(e.$$.fragment,f);for(let s=0;s<a.length;s+=1)B(a[s]);i=!1},d(f){f&&(w(t),w(r)),T(e,f);for(let s=0;s<a.length;s+=1)a[s].d(f)}}}function it(o){let e,n;return e=new Pe({}),{c(){I(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){R(e,t,a),n=!0},p:N,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ft(o){let e,n;return e=new $e({}),{c(){I(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){R(e,t,a),n=!0},p:N,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ce(o,e){let n,t,a;return t=new Te({props:{coffeeBeansName:e[5].name,href:q.recipeItem(e[15].id),recipe:e[15]}}),{key:o,first:null,c(){n=H(),I(t.$$.fragment),this.h()},l(l){n=H(),P(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,r){D(l,n,r),R(t,l,r),a=!0},p(l,r){e=l;const i={};r&32&&(i.coffeeBeansName=e[5].name),r&1&&(i.href=q.recipeItem(e[15].id)),r&1&&(i.recipe=e[15]),t.$set(i)},i(l){a||(S(t.$$.fragment,l),a=!0)},o(l){B(t.$$.fragment,l),a=!1},d(l){l&&w(n),T(t,l)}}}function ut(o){let e,n,t,a,l,r;function i(s,_){return s[5]===void 0?Ze:s[5]==="CoffeeBeansNotFound"?Xe:Qe}let c=i(o),m=c(o);const p=[tt,et,xe],h=[];function f(s,_){return s[5]===void 0?0:s[5]==="CoffeeBeansNotFound"?1:2}return t=f(o),a=h[t]=p[t](o),{c(){m.c(),e=H(),n=V(),a.c(),l=H()},l(s){const _=be("svelte-1xzg8rg",document.head);m.l(_),e=H(),_.forEach(w),n=j(s),a.l(s),l=H()},m(s,_){m.m(document.head,null),E(document.head,e),D(s,n,_),h[t].m(s,_),D(s,l,_),r=!0},p(s,[_]){c!==(c=i(s))&&(m.d(1),m=c(s),m&&(m.c(),m.m(e.parentNode,e)));let u=t;t=f(s),t===u?h[t].p(s,_):(ae(),B(h[u],1,1,()=>{h[u]=null}),ne(),a=h[t],a?a.p(s,_):(a=h[t]=p[t](s),a.c()),S(a,1),a.m(l.parentNode,l))},i(s){r||(S(a),r=!0)},o(s){B(a),r=!1},d(s){s&&(w(n),w(l)),m.d(s),w(e),h[t].d(s)}}}function dt(o,e,n){let{data:t}=e,a,l,r,i,c,m;async function p(){if(i===void 0||i==="CoffeeBeansNotFound")return;const $=i,d=await ie($.id,!0);await fe($.id,!0,$),Q(q.home);const k=d===1?"recipe":"recipes",z=d>0?` and ${d} ${k}`:"";ye(`Coffee beans "${$.name}"`+z+" deleted.",async()=>{await Ne($),await Ee($.id),Q(q.coffeeBeansItem($.name)).then(()=>Q(q.home))},async()=>{await ie($.id),await fe($.id),Q(q.coffeeBeansItem($.name)).then(()=>Q(q.home))})}async function h(){const $=await De(t.coffeeBeansName);if($===void 0){n(5,i="CoffeeBeansNotFound");return}n(5,i=$);const d=await Me(i.id);n(0,c=d.sort(ue))}const f=()=>r("open");function s($){r=$,n(4,r)}function _($){a=$,n(2,a)}const u=()=>{a("open"),l("closed")};function v($){l=$,n(3,l)}function y($){m=$,n(1,m)}return o.$$set=$=>{"data"in $&&n(7,t=$.data)},o.$$.update=()=>{o.$$.dirty&3&&c&&n(0,c=c.sort((m==null?void 0:m.sortOrderFunc)??ue)),o.$$.dirty&128&&window.indexedDB&&h()},[c,m,a,l,r,i,p,t,f,s,_,u,v,y]}class yt extends pe{constructor(e){super(),_e(this,e,dt,ut,me,{data:7})}}export{yt as component,Mt as universal};
