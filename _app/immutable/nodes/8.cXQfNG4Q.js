import{s as De,o as Me,d as D,e as M,n as V}from"../chunks/scheduler.QZKnv3vM.js";import{S as Ne,i as He,s as B,k as w,v as Z,l as Ae,d as h,f as P,m as v,g as k,n as C,o as $,p as ve,q as g,r as I,u as Ce,t as Ie,b as Te,y as N,e as J,c as K,a as ke,x as F,z as ae,h as H,A as Fe,C as Oe}from"../chunks/index.CHfITGLb.js";import{R as x,c as Ge,g as Ue,d as ye,e as Le,f as We}from"../chunks/indexedDB.vUzQvWEJ.js";import{f as qe,p as je,n as X}from"../chunks/dateHelpers.s53s9lsh.js";import{r as Y}from"../chunks/routes.z25Z1unV.js";import{C as ze,N as ge,T as Ve}from"../chunks/NumberInput.f7AY_Max.js";import{L as Je}from"../chunks/Loading.EgPeQWTv.js";import{D as Ke,a as Qe}from"../chunks/DropdownMenuItem.xrmB63Tw.js";import{F as Xe}from"../chunks/FlexRow.Y4rk8yok.js";import{T as ne}from"../chunks/Textarea.YwjDPZYz.js";import{D as Ye}from"../chunks/DeleteConfirmationModal.1I05kU_m.js";import{P as Ze}from"../chunks/PageHeadline.dJVkQ42h.js";function xe({params:r}){const e=Number.parseFloat(r.id);if(Number.isInteger(e)===!1)throw new Error("Non-integer route params are not allowed for this page. The matcher should have filtered outnon-integer values. Something is wrong with the code.");return{recipeId:e}}const St=Object.freeze(Object.defineProperty({__proto__:null,load:xe},Symbol.toStringTag,{value:"Module"}));function et(r){let e;return{c(){e=Ie("Edit recipe")},l(t){e=Te(t,"Edit recipe")},m(t,a){k(t,e,a)},d(t){t&&h(e)}}}function $e(r){let e,t,a,l;function o(s){r[16](s)}let n={$$slots:{modal:[at],button:[tt]},$$scope:{ctx:r}};return r[1]!==void 0&&(n.setDropdownState=r[1]),t=new Ke({props:n}),D.push(()=>N(t,"setDropdownState",o)),{c(){e=J("div"),w(t.$$.fragment),this.h()},l(s){e=K(s,"DIV",{class:!0});var p=ke(e);v(t.$$.fragment,p),p.forEach(h),this.h()},h(){F(e,"class","menu-container svelte-vb4cmr")},m(s,p){k(s,e,p),C(t,e,null),l=!0},p(s,p){const m={};p&16777219&&(m.$$scope={dirty:p,ctx:s}),!a&&p&2&&(a=!0,m.setDropdownState=s[1],M(()=>a=!1)),t.$set(m)},i(s){l||(g(t.$$.fragment,s),l=!0)},o(s){$(t.$$.fragment,s),l=!1},d(s){s&&h(e),I(t)}}}function tt(r){let e,t;return e=new Qe({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",r[15]),{c(){w(e.$$.fragment)},l(a){v(e.$$.fragment,a)},m(a,l){C(e,a,l),t=!0},p:V,i(a){t||(g(e.$$.fragment,a),t=!0)},o(a){$(e.$$.fragment,a),t=!1},d(a){I(e,a)}}}function nt(r){let e;return{c(){e=Ie("Please confirm you want to delete this recipe")},l(t){e=Te(t,"Please confirm you want to delete this recipe")},m(t,a){k(t,e,a)},d(t){t&&h(e)}}}function at(r){let e,t,a;function l(n){r[14](n)}let o={slot:"modal",onDeleteClick:r[11],$$slots:{default:[nt]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.setModalState=r[0]),e=new Ye({props:o}),D.push(()=>N(e,"setModalState",l)),{c(){w(e.$$.fragment)},l(n){v(e.$$.fragment,n)},m(n,s){C(e,n,s),a=!0},p(n,s){const p={};s&16777216&&(p.$$scope={dirty:s,ctx:n}),!t&&s&1&&(t=!0,p.setModalState=n[0],M(()=>t=!1)),e.$set(p)},i(n){a||(g(e.$$.fragment,n),a=!0)},o(n){$(e.$$.fragment,n),a=!1},d(n){I(e,n)}}}function ot(r){let e,t,a,l;e=new Ze({props:{$$slots:{default:[et]},$$scope:{ctx:r}}});let o=r[2]instanceof x&&$e(r);return{c(){w(e.$$.fragment),t=B(),o&&o.c(),a=Z()},l(n){v(e.$$.fragment,n),t=P(n),o&&o.l(n),a=Z()},m(n,s){C(e,n,s),k(n,t,s),o&&o.m(n,s),k(n,a,s),l=!0},p(n,s){const p={};s&16777216&&(p.$$scope={dirty:s,ctx:n}),e.$set(p),n[2]instanceof x?o?(o.p(n,s),s&4&&g(o,1)):(o=$e(n),o.c(),g(o,1),o.m(a.parentNode,a)):o&&(Ce(),$(o,1,1,()=>{o=null}),ve())},i(n){l||(g(e.$$.fragment,n),g(o),l=!0)},o(n){$(e.$$.fragment,n),$(o),l=!1},d(n){n&&(h(t),h(a)),I(e,n),o&&o.d(n)}}}function rt(r){let e,t="404",a,l,o="Not Found";return{c(){e=J("p"),e.textContent=t,a=B(),l=J("p"),l.textContent=o},l(n){e=K(n,"P",{"data-svelte-h":!0}),ae(e)!=="svelte-swq3p4"&&(e.textContent=t),a=P(n),l=K(n,"P",{"data-svelte-h":!0}),ae(l)!=="svelte-14ywr5"&&(l.textContent=o)},m(n,s){k(n,e,s),k(n,a,s),k(n,l,s)},p:V,i:V,o:V,d(n){n&&(h(e),h(a),h(l))}}}function st(r){let e,t,a,l,o,n,s,p,m,b,i,d,T,_,O,G,E,U,y,S,L,W,R,Q="Save changes",A,q,u;function j(f){r[17](f)}let z={allCoffeeBeans:r[3],showAddButton:!1};r[4]!==void 0&&(z.selectedCoffeeBeansId=r[4]),t=new ze({props:z}),D.push(()=>N(t,"selectedCoffeeBeansId",j));function ee(f){r[18](f)}let oe={id:he,label:X.recipe.recipeTarget+":",name:he,placeholder:ft};r[5]!==void 0&&(oe.value=r[5]),o=new ne({props:oe}),D.push(()=>N(o,"value",ee));function Ee(f){r[19](f)}let re={id:be,label:X.recipe.recipeResult+":",name:be,placeholder:ut};r[6]!==void 0&&(re.value=r[6]),p=new ne({props:re}),D.push(()=>N(p,"value",Ee));function Se(f){r[20](f)}let se={labelText:X.recipe.outWeight+" (g):",min:0,nameAttr:ct,step:5};r[8]!==void 0&&(se.value=r[8]),i=new ge({props:se}),D.push(()=>N(i,"value",Se));function Re(f){r[21](f)}let le={labelText:"Rating:",max:5,min:0,nameAttr:mt,step:.5};r[9]!==void 0&&(le.value=r[9]),_=new ge({props:le}),D.push(()=>N(_,"value",Re));function Be(f){r[22](f)}let ie={id:we,label:X.recipe.recipeThoughts+":",name:we,placeholder:pt,textLinesCount:4};r[7]!==void 0&&(ie.value=r[7]),E=new ne({props:ie}),D.push(()=>N(E,"value",Be));function Pe(f){r[23](f)}let fe={};return r[10]!==void 0&&(fe.value=r[10]),S=new Ve({props:fe}),D.push(()=>N(S,"value",Pe)),{c(){e=J("form"),w(t.$$.fragment),l=B(),w(o.$$.fragment),s=B(),w(p.$$.fragment),b=B(),w(i.$$.fragment),T=B(),w(_.$$.fragment),G=B(),w(E.$$.fragment),y=B(),w(S.$$.fragment),W=B(),R=J("button"),R.textContent=Q,this.h()},l(f){e=K(f,"FORM",{id:!0,class:!0});var c=ke(e);v(t.$$.fragment,c),l=P(c),v(o.$$.fragment,c),s=P(c),v(p.$$.fragment,c),b=P(c),v(i.$$.fragment,c),T=P(c),v(_.$$.fragment,c),G=P(c),v(E.$$.fragment,c),y=P(c),v(S.$$.fragment,c),W=P(c),R=K(c,"BUTTON",{class:!0,form:!0,type:!0,"data-svelte-h":!0}),ae(R)!=="svelte-1dkauk3"&&(R.textContent=Q),c.forEach(h),this.h()},h(){F(R,"class","my-button svelte-vb4cmr"),F(R,"form","edit-recipe"),F(R,"type","submit"),F(e,"id","edit-recipe"),F(e,"class","svelte-vb4cmr")},m(f,c){k(f,e,c),C(t,e,null),H(e,l),C(o,e,null),H(e,s),C(p,e,null),H(e,b),C(i,e,null),H(e,T),C(_,e,null),H(e,G),C(E,e,null),H(e,y),C(S,e,null),H(e,W),H(e,R),A=!0,q||(u=Fe(e,"submit",Oe(r[12])),q=!0)},p(f,c){const te={};c&8&&(te.allCoffeeBeans=f[3]),!a&&c&16&&(a=!0,te.selectedCoffeeBeansId=f[4],M(()=>a=!1)),t.$set(te);const ue={};!n&&c&32&&(n=!0,ue.value=f[5],M(()=>n=!1)),o.$set(ue);const pe={};!m&&c&64&&(m=!0,pe.value=f[6],M(()=>m=!1)),p.$set(pe);const ce={};!d&&c&256&&(d=!0,ce.value=f[8],M(()=>d=!1)),i.$set(ce);const me={};!O&&c&512&&(O=!0,me.value=f[9],M(()=>O=!1)),_.$set(me);const de={};!U&&c&128&&(U=!0,de.value=f[7],M(()=>U=!1)),E.$set(de);const _e={};!L&&c&1024&&(L=!0,_e.value=f[10],M(()=>L=!1)),S.$set(_e)},i(f){A||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(p.$$.fragment,f),g(i.$$.fragment,f),g(_.$$.fragment,f),g(E.$$.fragment,f),g(S.$$.fragment,f),A=!0)},o(f){$(t.$$.fragment,f),$(o.$$.fragment,f),$(p.$$.fragment,f),$(i.$$.fragment,f),$(_.$$.fragment,f),$(E.$$.fragment,f),$(S.$$.fragment,f),A=!1},d(f){f&&h(e),I(t),I(o),I(p),I(i),I(_),I(E),I(S),q=!1,u()}}}function lt(r){let e,t;return e=new Je({}),{c(){w(e.$$.fragment)},l(a){v(e.$$.fragment,a)},m(a,l){C(e,a,l),t=!0},p:V,i(a){t||(g(e.$$.fragment,a),t=!0)},o(a){$(e.$$.fragment,a),t=!1},d(a){I(e,a)}}}function it(r){let e,t,a,l,o,n,s;t=new Xe({props:{$$slots:{default:[ot]},$$scope:{ctx:r}}});const p=[lt,st,rt],m=[];function b(i,d){return i[2]===null?0:i[2]instanceof x?1:2}return l=b(r),o=m[l]=p[l](r),{c(){e=B(),w(t.$$.fragment),a=B(),o.c(),n=Z(),this.h()},l(i){Ae("svelte-cc1fw0",document.head).forEach(h),e=P(i),v(t.$$.fragment,i),a=P(i),o.l(i),n=Z(),this.h()},h(){document.title="Edit recipe - PourOverPotato app"},m(i,d){k(i,e,d),C(t,i,d),k(i,a,d),m[l].m(i,d),k(i,n,d),s=!0},p(i,[d]){const T={};d&16777223&&(T.$$scope={dirty:d,ctx:i}),t.$set(T);let _=l;l=b(i),l===_?m[l].p(i,d):(Ce(),$(m[_],1,1,()=>{m[_]=null}),ve(),o=m[l],o?o.p(i,d):(o=m[l]=p[l](i),o.c()),g(o,1),o.m(n.parentNode,n))},i(i){s||(g(t.$$.fragment,i),g(o),s=!0)},o(i){$(t.$$.fragment,i),$(o),s=!1},d(i){i&&(h(e),h(a),h(n)),I(t,i),m[l].d(i)}}}const he="recipe-target",ft="Example: 17 clicks, 15g + 260g. 5m boil.",be="recipe-result",ut="Example: 2m15s + 15s drip. 250g out.",we="recipe-thoughts",pt="Example: Perfect balance. Perfect concentration. Flowery notes.",ct="out-weight",mt="rating";function dt(r,e,t){let{data:a}=e,l,o,n=null,s,p,m,b,i,d,T,_;Me(()=>{Ge(a.recipeId).then(u=>{t(2,n=u),u!==void 0&&Ue().then(j=>{t(3,s=j),t(4,p=u.coffeeBeansId),t(5,m=u.recipeTarget),t(6,b=u.recipeResult),t(7,i=u.recipeThoughts),t(8,d=u.outWeight),t(9,T=u.rating),t(10,_=qe(u.timestamp))})})});async function O(){await ye(n.id),alert("Recipe deleted.");const u=await Le(n.coffeeBeansId);if(u===void 0){window.location.replace(Y.home);return}window.location.replace(Y.coffeeBeansItem(u.name))}async function G(){t(5,m=m.trim()),t(6,b=b.trim()),t(7,i=i.trim());const u=je(_);if(p===void 0)throw new Error("Please select the coffee beans.");if(n==null)throw new Error("Recipe was undefined or null somehow.");const j=new x({coffeeBeansId:p,recipeTarget:m,recipeResult:b,recipeThoughts:i,outWeight:d,rating:T,timestamp:u},n.id);await We(j),alert("Recipe saved.");const z=s==null?void 0:s.find(ee=>ee.id===p);if(z===void 0){window.location.replace(Y.home);return}window.location.replace(Y.coffeeBeansItem(z.name))}function E(u){l=u,t(0,l)}const U=()=>{o("closed"),l("open")};function y(u){o=u,t(1,o)}function S(u){p=u,t(4,p)}function L(u){m=u,t(5,m)}function W(u){b=u,t(6,b)}function R(u){d=u,t(8,d)}function Q(u){T=u,t(9,T)}function A(u){i=u,t(7,i)}function q(u){_=u,t(10,_)}return r.$$set=u=>{"data"in u&&t(13,a=u.data)},[l,o,n,s,p,m,b,i,d,T,_,O,G,a,E,U,y,S,L,W,R,Q,A,q]}class Rt extends Ne{constructor(e){super(),He(this,e,dt,it,De,{data:13})}}export{Rt as component,St as universal};
