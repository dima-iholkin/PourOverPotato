import{s as Oe,d as y,e as A,o as Me}from"../chunks/scheduler.c6D-u3vw.js";import{S as Ge,i as He,y as P,s as T,k as S,e as Ie,l as Ue,d as U,f as I,m as F,c as Be,a as De,z as We,x as V,g as ee,n as E,h as R,A as je,C as qe,q as k,o as w,r as N,t as ze,b as Le}from"../chunks/index.uR5eFXUy.js";import{g as Se}from"../chunks/entry.rkIKpWki.js";import{f as Ke,g as Ve,k as Je,h as Qe,p as Xe}from"../chunks/indexedDB.Q_ZGv_fi.js";import{n as x}from"../chunks/naming.kUvCv0xb.js";import{r as Fe}from"../chunks/routes.bM4H9LUV.js";import{C as Ye,N as Ee,T as Ze,p as re}from"../chunks/NumberInput.pZINh_Hw.js";import{T as se}from"../chunks/Textarea.pD-sxuTV.js";import{P as xe}from"../chunks/PageHeadline.F2eDUn1P.js";async function et({url:t}){return{coffeeBeansName:t.searchParams.get("coffee_beans_name")}}const ct=Object.freeze(Object.defineProperty({__proto__:null,load:et},Symbol.toStringTag,{value:"Module"}));function M(t,s,n){const m=oe(t,s);localStorage.setItem(m,n)}function G(t,s,n){const m=oe(t,s),a=localStorage.getItem(m);if(a===null)return null;if(n==="number"){const f=Number.parseFloat(a);return Number.isNaN(f)?null:f}return a}function H(t,s){const n=oe(t,s);localStorage.removeItem(n)}function oe(t,s){return`form_${t}_${s}`}function tt(t){let s;return{c(){s=ze("Add recipe")},l(n){s=Le(n,"Add recipe")},m(n,m){ee(n,s,m)},d(n){n&&U(s)}}}function nt(t){let s,n,m,a,f,c,d,o,g,v,p,B,D,_,W,j,b,q,z,h,L,r,$,O,K,C,ue="Save",Y,ae,fe;n=new xe({props:{$$slots:{default:[tt]},$$scope:{ctx:t}}});function Re(e){t[12](e)}let le={allCoffeeBeans:t[7],onSavedCoffeeBeans:t[10],validationFailed:t[6]};t[0]!==void 0&&(le.selectedCoffeeBeansId=t[0]),f=new Ye({props:le}),y.push(()=>P(f,"selectedCoffeeBeansId",Re));function ke(e){t[13](e)}let pe={id:J,label:x.recipe.recipeTarget+":",name:J,placeholder:re.recipeTarget};t[1]!==void 0&&(pe.value=t[1]),o=new se({props:pe}),y.push(()=>P(o,"value",ke));function we(e){t[14](e)}let me={id:Q,label:x.recipe.recipeResult+":",name:Q,placeholder:re.recipeResult};t[2]!==void 0&&(me.value=t[2]),p=new se({props:me}),y.push(()=>P(p,"value",we));function Ne(e){t[15](e)}let ce={labelText:x.recipe.outWeight+" (g):",min:0,nameAttr:te,step:5};t[4]!==void 0&&(ce.value=t[4]),_=new Ee({props:ce}),y.push(()=>P(_,"value",Ne));function ye(e){t[16](e)}let de={labelText:"Rating:",max:5,min:0,nameAttr:ne,step:.5};t[5]!==void 0&&(de.value=t[5]),b=new Ee({props:de}),y.push(()=>P(b,"value",ye));function Ae(e){t[17](e)}let ge={id:X,label:x.recipe.recipeThoughts+":",name:X,placeholder:re.recipeThoughts,textLinesCount:4};t[3]!==void 0&&(ge.value=t[3]),h=new se({props:ge}),y.push(()=>P(h,"value",Ae));function Pe(e){t[18](e)}let _e={};return t[8]!==void 0&&(_e.value=t[8]),$=new Ze({props:_e}),y.push(()=>P($,"value",Pe)),{c(){s=T(),S(n.$$.fragment),m=T(),a=Ie("form"),S(f.$$.fragment),d=T(),S(o.$$.fragment),v=T(),S(p.$$.fragment),D=T(),S(_.$$.fragment),j=T(),S(b.$$.fragment),z=T(),S(h.$$.fragment),r=T(),S($.$$.fragment),K=T(),C=Ie("button"),C.textContent=ue,this.h()},l(e){Ue("svelte-kogo9l",document.head).forEach(U),s=I(e),F(n.$$.fragment,e),m=I(e),a=Be(e,"FORM",{id:!0,class:!0});var i=De(a);F(f.$$.fragment,i),d=I(i),F(o.$$.fragment,i),v=I(i),F(p.$$.fragment,i),D=I(i),F(_.$$.fragment,i),j=I(i),F(b.$$.fragment,i),z=I(i),F(h.$$.fragment,i),r=I(i),F($.$$.fragment,i),K=I(i),C=Be(i,"BUTTON",{class:!0,form:!0,type:!0,"data-svelte-h":!0}),We(C)!=="svelte-1pg8oi4"&&(C.textContent=ue),i.forEach(U),this.h()},h(){document.title="Add recipe - PourOverPotato app",V(C,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded svelte-b37xp1"),V(C,"form","add-recipe"),V(C,"type","submit"),V(a,"id","add-recipe"),V(a,"class","svelte-b37xp1")},m(e,l){ee(e,s,l),E(n,e,l),ee(e,m,l),ee(e,a,l),E(f,a,null),R(a,d),E(o,a,null),R(a,v),E(p,a,null),R(a,D),E(_,a,null),R(a,j),E(b,a,null),R(a,z),E(h,a,null),R(a,r),E($,a,null),R(a,K),R(a,C),Y=!0,ae||(fe=je(a,"submit",qe(t[9])),ae=!0)},p(e,[l]){const i={};l&524288&&(i.$$scope={dirty:l,ctx:e}),n.$set(i);const Z={};l&128&&(Z.allCoffeeBeans=e[7]),l&64&&(Z.validationFailed=e[6]),!c&&l&1&&(c=!0,Z.selectedCoffeeBeansId=e[0],A(()=>c=!1)),f.$set(Z);const be={};!g&&l&2&&(g=!0,be.value=e[1],A(()=>g=!1)),o.$set(be);const he={};!B&&l&4&&(B=!0,he.value=e[2],A(()=>B=!1)),p.$set(he);const ve={};!W&&l&16&&(W=!0,ve.value=e[4],A(()=>W=!1)),_.$set(ve);const $e={};!q&&l&32&&(q=!0,$e.value=e[5],A(()=>q=!1)),b.$set($e);const Ce={};!L&&l&8&&(L=!0,Ce.value=e[3],A(()=>L=!1)),h.$set(Ce);const Te={};!O&&l&256&&(O=!0,Te.value=e[8],A(()=>O=!1)),$.$set(Te)},i(e){Y||(k(n.$$.fragment,e),k(f.$$.fragment,e),k(o.$$.fragment,e),k(p.$$.fragment,e),k(_.$$.fragment,e),k(b.$$.fragment,e),k(h.$$.fragment,e),k($.$$.fragment,e),Y=!0)},o(e){w(n.$$.fragment,e),w(f.$$.fragment,e),w(o.$$.fragment,e),w(p.$$.fragment,e),w(_.$$.fragment,e),w(b.$$.fragment,e),w(h.$$.fragment,e),w($.$$.fragment,e),Y=!1},d(e){e&&(U(s),U(m),U(a)),N(n,e),N(f),N(o),N(p),N(_),N(b),N(h),N($),ae=!1,fe()}}}const J="recipe-target",Q="recipe-result",X="recipe-thoughts",te="out-weight",ne="rating",u="addRecipe",ie="coffee-beans";function at(t,s,n){let m=!1,a=!1,f,c,d="",o="",g="",v=0,p=0,B=Ke(new Date);Me(()=>{Ve().then(r=>{n(7,f=r),n(0,c=G(u,ie,"number")??void 0),n(1,d=G(u,J,"string")??""),n(2,o=G(u,Q,"string")??""),n(3,g=G(u,X,"string")??""),n(4,v=G(u,te,"number")??0),n(5,p=G(u,ne,"number")??0),n(11,a=!0)})});async function D(){if(c===void 0){n(6,m=!0);return}n(1,d=d.trim()),n(2,o=o.trim()),n(3,g=g.trim());const r=Xe(B);await Je({coffeeBeansId:c,recipeTarget:d,recipeResult:o,recipeThoughts:g,outWeight:v,rating:p,timestamp:r}),H(u,ie),H(u,J),H(u,Q),H(u,X),H(u,te),H(u,ne),Qe("Recipe created.");const O=f.find(K=>K.id===c);if(O===void 0){Se(Fe.home);return}Se(Fe.coffeeBeansItem(O.name))}function _(r){f.push(r),n(0,c=r.id),n(6,m=!1)}function W(r){c=r,n(0,c)}function j(r){d=r,n(1,d)}function b(r){o=r,n(2,o)}function q(r){v=r,n(4,v)}function z(r){p=r,n(5,p)}function h(r){g=r,n(3,g)}function L(r){B=r,n(8,B)}return t.$$.update=()=>{t.$$.dirty&2049&&c!==void 0&&a&&M(u,ie,c),t.$$.dirty&2050&&a&&M(u,J,d),t.$$.dirty&2052&&a&&M(u,Q,o),t.$$.dirty&2056&&a&&M(u,X,g),t.$$.dirty&2064&&a&&M(u,te,v),t.$$.dirty&2080&&a&&M(u,ne,p)},[c,d,o,g,v,p,m,f,B,D,_,a,W,j,b,q,z,h,L]}class dt extends Ge{constructor(s){super(),He(this,s,at,nt,Oe,{})}}export{dt as component,ct as universal};
