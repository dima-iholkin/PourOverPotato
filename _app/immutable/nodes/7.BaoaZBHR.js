import{s as De,b as S,a as F,o as Ge}from"../chunks/scheduler.vcOl-ZmV.js";import{S as He,i as Ue,v as O,s as T,k as E,e as Be,l as je,d as H,f as C,m as R,c as Se,a as We,y as qe,z as J,g as te,n as k,h as w,A as ze,B as Ke,q as M,o as N,r as A,t as Le,b as Ve}from"../chunks/index.Otd-Ubpp.js";import{g as Fe}from"../chunks/entry.hnHDMe29.js";import{f as Je,g as Qe,j as Xe,i as Ye,p as Ze}from"../chunks/indexedDB.DSM7SfQo.js";import{n as ee}from"../chunks/naming.kUvCv0xb.js";import{r as Oe}from"../chunks/routes.gcsfaKJ0.js";import{C as xe,N as Ee,T as et,p as ie}from"../chunks/NumberInput.Z6rPvgue.js";import{T as oe}from"../chunks/Textarea.nT9hUE4u.js";import{P as tt}from"../chunks/PageHeadline.CNgB9f2m.js";async function nt({url:t}){return{coffeeBeansName:t.searchParams.get("coffee_beans_name")}}const gt=Object.freeze(Object.defineProperty({__proto__:null,load:nt},Symbol.toStringTag,{value:"Module"}));function y(t,i,n){const m=fe(t,i);localStorage.setItem(m,n)}function D(t,i,n){const m=fe(t,i),s=localStorage.getItem(m);if(s===null)return null;if(n==="number"){const r=Number.parseFloat(s);return Number.isNaN(r)?null:r}return s}function G(t,i){const n=fe(t,i);localStorage.removeItem(n)}function fe(t,i){return`form_${t}_${i}`}function at(t){let i;return{c(){i=Le("Add recipe")},l(n){i=Ve(n,"Add recipe")},m(n,m){te(n,i,m)},d(n){n&&H(i)}}}function st(t){let i,n,m,s,r,I,c,d,u,g,$,p,B,U,_,j,W,b,q,z,h,K,L,a,Z,P,v,le="Save",x,se,pe;n=new tt({props:{$$slots:{default:[at]},$$scope:{ctx:t}}});function Re(e){t[13](e)}function ke(e){t[14](e)}let re={allCoffeeBeans:t[8],onSavedCoffeeBeans:t[11],validationFailed:t[7]};t[6]!==void 0&&(re.selectDOM=t[6]),t[0]!==void 0&&(re.selectedCoffeeBeansId=t[0]),r=new xe({props:re}),S.push(()=>O(r,"selectDOM",Re)),S.push(()=>O(r,"selectedCoffeeBeansId",ke));function we(e){t[15](e)}let me={id:Q,label:ee.recipe.recipeTarget+":",name:Q,placeholder:ie.recipeTarget};t[1]!==void 0&&(me.value=t[1]),u=new oe({props:me}),S.push(()=>O(u,"value",we));function Me(e){t[16](e)}let ce={id:X,label:ee.recipe.recipeResult+":",name:X,placeholder:ie.recipeResult};t[2]!==void 0&&(ce.value=t[2]),p=new oe({props:ce}),S.push(()=>O(p,"value",Me));function Ne(e){t[17](e)}let de={labelText:ee.recipe.outWeight+" (g):",min:0,nameAttr:ne,step:5};t[4]!==void 0&&(de.value=t[4]),_=new Ee({props:de}),S.push(()=>O(_,"value",Ne));function Ae(e){t[18](e)}let ge={labelText:"Rating:",max:5,min:0,nameAttr:ae,step:.5};t[5]!==void 0&&(ge.value=t[5]),b=new Ee({props:ge}),S.push(()=>O(b,"value",Ae));function Pe(e){t[19](e)}let _e={id:Y,label:ee.recipe.recipeThoughts+":",name:Y,placeholder:ie.recipeThoughts};t[3]!==void 0&&(_e.value=t[3]),h=new oe({props:_e}),S.push(()=>O(h,"value",Pe));function ye(e){t[20](e)}let be={};return t[9]!==void 0&&(be.value=t[9]),a=new et({props:be}),S.push(()=>O(a,"value",ye)),{c(){i=T(),E(n.$$.fragment),m=T(),s=Be("form"),E(r.$$.fragment),d=T(),E(u.$$.fragment),$=T(),E(p.$$.fragment),U=T(),E(_.$$.fragment),W=T(),E(b.$$.fragment),z=T(),E(h.$$.fragment),L=T(),E(a.$$.fragment),P=T(),v=Be("button"),v.textContent=le,this.h()},l(e){je("svelte-kogo9l",document.head).forEach(H),i=C(e),R(n.$$.fragment,e),m=C(e),s=Se(e,"FORM",{id:!0,class:!0});var o=We(s);R(r.$$.fragment,o),d=C(o),R(u.$$.fragment,o),$=C(o),R(p.$$.fragment,o),U=C(o),R(_.$$.fragment,o),W=C(o),R(b.$$.fragment,o),z=C(o),R(h.$$.fragment,o),L=C(o),R(a.$$.fragment,o),P=C(o),v=Se(o,"BUTTON",{class:!0,form:!0,type:!0,"data-svelte-h":!0}),qe(v)!=="svelte-1pg8oi4"&&(v.textContent=le),o.forEach(H),this.h()},h(){document.title="Add recipe - PourOverPotato app",J(v,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded svelte-b37xp1"),J(v,"form","add-recipe"),J(v,"type","submit"),J(s,"id","add-recipe"),J(s,"class","svelte-b37xp1")},m(e,f){te(e,i,f),k(n,e,f),te(e,m,f),te(e,s,f),k(r,s,null),w(s,d),k(u,s,null),w(s,$),k(p,s,null),w(s,U),k(_,s,null),w(s,W),k(b,s,null),w(s,z),k(h,s,null),w(s,L),k(a,s,null),w(s,P),w(s,v),x=!0,se||(pe=ze(s,"submit",Ke(t[10])),se=!0)},p(e,[f]){const o={};f&2097152&&(o.$$scope={dirty:f,ctx:e}),n.$set(o);const V={};f&256&&(V.allCoffeeBeans=e[8]),f&128&&(V.validationFailed=e[7]),!I&&f&64&&(I=!0,V.selectDOM=e[6],F(()=>I=!1)),!c&&f&1&&(c=!0,V.selectedCoffeeBeansId=e[0],F(()=>c=!1)),r.$set(V);const he={};!g&&f&2&&(g=!0,he.value=e[1],F(()=>g=!1)),u.$set(he);const ve={};!B&&f&4&&(B=!0,ve.value=e[2],F(()=>B=!1)),p.$set(ve);const $e={};!j&&f&16&&(j=!0,$e.value=e[4],F(()=>j=!1)),_.$set($e);const Te={};!q&&f&32&&(q=!0,Te.value=e[5],F(()=>q=!1)),b.$set(Te);const Ce={};!K&&f&8&&(K=!0,Ce.value=e[3],F(()=>K=!1)),h.$set(Ce);const Ie={};!Z&&f&512&&(Z=!0,Ie.value=e[9],F(()=>Z=!1)),a.$set(Ie)},i(e){x||(M(n.$$.fragment,e),M(r.$$.fragment,e),M(u.$$.fragment,e),M(p.$$.fragment,e),M(_.$$.fragment,e),M(b.$$.fragment,e),M(h.$$.fragment,e),M(a.$$.fragment,e),x=!0)},o(e){N(n.$$.fragment,e),N(r.$$.fragment,e),N(u.$$.fragment,e),N(p.$$.fragment,e),N(_.$$.fragment,e),N(b.$$.fragment,e),N(h.$$.fragment,e),N(a.$$.fragment,e),x=!1},d(e){e&&(H(i),H(m),H(s)),A(n,e),A(r),A(u),A(p),A(_),A(b),A(h),A(a),se=!1,pe()}}}const Q="recipe-target",X="recipe-result",Y="recipe-thoughts",ne="out-weight",ae="rating",l="addRecipe",ue="coffee-beans";function rt(t,i,n){let m,s=!1,r=!1,I,c,d="",u="",g="",$=0,p=0,B=Je(new Date);Ge(()=>{Qe().then(a=>{n(8,I=a),n(0,c=D(l,ue,"number")??void 0),n(1,d=D(l,Q,"string")??""),n(2,u=D(l,X,"string")??""),n(3,g=D(l,Y,"string")??""),n(4,$=D(l,ne,"number")??0),n(5,p=D(l,ae,"number")??0),n(12,r=!0)})});async function U(){if(c===void 0){n(7,s=!0);return}n(1,d=d.trim()),n(2,u=u.trim()),n(3,g=g.trim());const a=Ze(B);await Xe({coffeeBeansId:c,recipeTarget:d,recipeResult:u,recipeThoughts:g,outWeight:$,rating:p,timestamp:a}),G(l,ue),G(l,Q),G(l,X),G(l,Y),G(l,ne),G(l,ae),Ye("Recipe created.");const P=I.find(v=>v.id===c);if(P===void 0){Fe(Oe.home);return}Fe(Oe.coffeeBeansItem(P.name))}function _(a){I.push(a),n(0,c=a.id),n(7,s=!1)}function j(a){m=a,n(6,m)}function W(a){c=a,n(0,c)}function b(a){d=a,n(1,d)}function q(a){u=a,n(2,u)}function z(a){$=a,n(4,$)}function h(a){p=a,n(5,p)}function K(a){g=a,n(3,g)}function L(a){B=a,n(9,B)}return t.$$.update=()=>{t.$$.dirty&4097&&c!==void 0&&r&&y(l,ue,c),t.$$.dirty&4098&&r&&y(l,Q,d),t.$$.dirty&4100&&r&&y(l,X,u),t.$$.dirty&4104&&r&&y(l,Y,g),t.$$.dirty&4112&&r&&y(l,ne,$),t.$$.dirty&4128&&r&&y(l,ae,p)},[c,d,u,g,$,p,m,s,I,B,U,_,r,j,W,b,q,z,h,K,L]}class _t extends He{constructor(i){super(),Ue(this,i,rt,st,De,{})}}export{_t as component,gt as universal};
