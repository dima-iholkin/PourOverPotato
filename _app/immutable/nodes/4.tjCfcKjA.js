import{s as fe,d as A,e as Y,f as oe,r as pe,o as _e,n as D}from"../chunks/scheduler.QZKnv3vM.js";import{S as ue,i as de,y as G,k as N,m as P,n as I,q as w,o as S,r as R,e as T,s as z,t as Z,c as F,a as K,f as O,b as x,d as g,z as X,x as M,g as C,h as E,E as se,A as Q,C as $e,j as ee,v as V,l as he,p as te,u as ne}from"../chunks/index.CHfITGLb.js";import{P as ge,e as le,u as be,o as ke}from"../chunks/PageHeadline.dJVkQ42h.js";import{C as ce,j as ve,k as we,l as Se,b as Ce,m as Me,n as ye}from"../chunks/indexedDB.vUzQvWEJ.js";import{s as De,A as Be,S as Ee,N as Ne}from"../chunks/NoItemsYetP.54nxMtoY.js";import{r as J}from"../chunks/routes.gnrRTyxF.js";import{R as Pe}from"../chunks/RecipeCard.2AdfGzCc.js";import{L as me}from"../chunks/Loading.EgPeQWTv.js";import{D as Ie,a as Re}from"../chunks/DropdownMenuItem.tFyMqAGr.js";import{F as Te}from"../chunks/FlexRow.Y4rk8yok.js";import{D as Fe}from"../chunks/DeleteConfirmationModal._7B3sccE.js";import{L as ze,T as Oe}from"../chunks/Textarea.n51Q9fu7.js";import{M as Le}from"../chunks/Modal.hNvwfpKp.js";function je({params:a}){return{coffeeBeansName:a.name}}const wt=Object.freeze(Object.defineProperty({__proto__:null,load:je},Symbol.toStringTag,{value:"Module"}));function Ve(a){let e;return{c(){e=Z("Coffee beans name:")},l(n){e=x(n,"Coffee beans name:")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function Ae(a){let e,n,t,o,l,s,r,c,i,u,m,b,d,k,f,$,B,L="Save",p,v,q;t=new ze({props:{for_:"name",valid:!a[0],$$slots:{default:[Ve]},$$scope:{ctx:a}}});function H(h){a[16](h)}function _(h){a[17](h)}let U={id:"description",label:"Description:",name:"description",placeholder:He};return a[3]!==void 0&&(U.this_=a[3]),a[6]!==void 0&&(U.value=a[6]),d=new Oe({props:U}),A.push(()=>G(d,"this_",H)),A.push(()=>G(d,"value",_)),d.$on("keydown",a[9]),{c(){e=T("form"),n=T("div"),N(t.$$.fragment),o=z(),l=T("input"),c=z(),i=T("p"),u=Z(a[7]),m=z(),b=T("div"),N(d.$$.fragment),$=z(),B=T("button"),B.textContent=L,this.h()},l(h){e=F(h,"FORM",{class:!0});var y=K(e);n=F(y,"DIV",{class:!0});var j=K(n);P(t.$$.fragment,j),o=O(j),l=F(j,"INPUT",{id:!0,class:!0,name:!0,placeholder:!0,type:!0}),c=O(j),i=F(j,"P",{class:!0});var W=K(i);u=x(W,a[7]),W.forEach(g),j.forEach(g),m=O(y),b=F(y,"DIV",{class:!0});var ae=K(b);P(d.$$.fragment,ae),ae.forEach(g),$=O(y),B=F(y,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),X(B)!=="svelte-j4uhei"&&(B.textContent=L),y.forEach(g),this.h()},h(){M(l,"id","name"),M(l,"class",s=oe(a[0]?"input-name-validation-failed":"input-name")+" svelte-vzks07"),M(l,"name","name"),M(l,"placeholder",r=a[0]?"":"Example: Rwanda Mabanza"),M(l,"type","text"),M(i,"class","mt-2 text-sm text-red-600 dark:text-red-500"),M(n,"class","mb-5"),M(b,"class","my-div mb-5 svelte-vzks07"),M(B,"class","button-submit svelte-vzks07"),M(B,"type","submit"),M(e,"class","mx-auto")},m(h,y){C(h,e,y),E(e,n),I(t,n,null),E(n,o),E(n,l),a[14](l),se(l,a[5]),E(n,c),E(n,i),E(i,u),E(e,m),E(e,b),I(d,b,null),E(e,$),E(e,B),a[18](e),p=!0,v||(q=[Q(l,"input",a[15]),Q(l,"input",a[11]),Q(l,"keydown",a[8]),Q(e,"submit",$e(a[10]))],v=!0)},p(h,y){const j={};y&1&&(j.valid=!h[0]),y&1048576&&(j.$$scope={dirty:y,ctx:h}),t.$set(j),(!p||y&1&&s!==(s=oe(h[0]?"input-name-validation-failed":"input-name")+" svelte-vzks07"))&&M(l,"class",s),(!p||y&1&&r!==(r=h[0]?"":"Example: Rwanda Mabanza"))&&M(l,"placeholder",r),y&32&&l.value!==h[5]&&se(l,h[5]),(!p||y&128)&&ee(u,h[7]);const W={};!k&&y&8&&(k=!0,W.this_=h[3],Y(()=>k=!1)),!f&&y&64&&(f=!0,W.value=h[6],Y(()=>f=!1)),d.$set(W)},i(h){p||(w(t.$$.fragment,h),w(d.$$.fragment,h),p=!0)},o(h){S(t.$$.fragment,h),S(d.$$.fragment,h),p=!1},d(h){h&&g(e),R(t),a[14](null),R(d),a[18](null),v=!1,pe(q)}}}function qe(a){let e,n,t;function o(s){a[19](s)}let l={title:"Edit coffee beans",$$slots:{default:[Ae]},$$scope:{ctx:a}};return a[1]!==void 0&&(l.setState=a[1]),e=new Le({props:l}),A.push(()=>G(e,"setState",o)),{c(){N(e.$$.fragment)},l(s){P(e.$$.fragment,s)},m(s,r){I(e,s,r),t=!0},p(s,[r]){const c={};r&1048829&&(c.$$scope={dirty:r,ctx:s}),!n&&r&2&&(n=!0,c.setState=s[1],Y(()=>n=!1)),e.$set(c)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){R(e,s)}}}const He="Example: Washed process. Notes: plum, cherry.";function Ke(a,e,n){const t=_=>{l(_)};let{item:o}=e,l,s,r,c,i=o.name??"",u=o.description??"",m="",b=!1;function d(_){_.key==="Enter"&&(_.preventDefault(),r.focus())}function k(_){_.key==="Enter"&&(_.metaKey||_.ctrlKey)&&(_.preventDefault(),c.requestSubmit())}async function f(){const _=new ce({name:i,description:u},o.id),U=ve.create(_);if(U==="ValidationFailed_NameMustBeAtLeast3CharsLong"){n(0,b=!0),n(7,m="Name must be at least 3 characters long.");return}const h=await we(U);if(h==="Failure_NameAlreadyExist"){n(0,b=!0),n(7,m="Coffee beans with this name exist already.");return}alert("Coffee beans saved."),n(12,o=h),l("closed"),window.location.replace(J.coffeeBeansItem(h.name))}function $(){b&&(n(0,b=!1),n(7,m=""))}function B(_){A[_?"unshift":"push"](()=>{s=_,n(2,s)})}function L(){i=this.value,n(5,i)}function p(_){r=_,n(3,r)}function v(_){u=_,n(6,u)}function q(_){A[_?"unshift":"push"](()=>{c=_,n(4,c)})}function H(_){l=_,n(1,l)}return a.$$set=_=>{"item"in _&&n(12,o=_.item)},a.$$.update=()=>{a.$$.dirty&1&&b===!1&&n(7,m="")},[b,l,s,r,c,i,u,m,d,k,f,$,o,t,B,L,p,v,q,H]}class Ue extends ue{constructor(e){super(),de(this,e,Ke,qe,fe,{setModalState:13,item:12})}get setModalState(){return this.$$.ctx[13]}}function re(a,e,n){const t=a.slice();return t[12]=e[n],t}function We(a){return document.title=a[3].name+" - PourOverPotato app",{c:D,l:D,m:D,d:D}}function Ye(a){return{c(){this.h()},l(e){this.h()},h(){document.title="404 Not Found - PourOverPotato app"},m:D,d:D}}function Ge(a){return{c(){this.h()},l(e){this.h()},h(){document.title="loading... - PourOverPotato app"},m:D,d:D}}function Je(a){let e,n,t,o=a[3].description+"",l,s,r,c,i,u,m;e=new Te({props:{$$slots:{default:[nt]},$$scope:{ctx:a}}});const b=[st,ot,at],d=[];function k(f,$){return f[4]===void 0?0:f[4].length===0?1:2}return r=k(a),c=d[r]=b[r](a),u=new Be({props:{href:J.addRecipe(a[3].name)}}),{c(){N(e.$$.fragment),n=z(),t=T("p"),l=Z(o),s=z(),c.c(),i=z(),N(u.$$.fragment),this.h()},l(f){P(e.$$.fragment,f),n=O(f),t=F(f,"P",{class:!0});var $=K(t);l=x($,o),$.forEach(g),s=O(f),c.l(f),i=O(f),P(u.$$.fragment,f),this.h()},h(){M(t,"class","coffee-beans-description svelte-1kf2puf")},m(f,$){I(e,f,$),C(f,n,$),C(f,t,$),E(t,l),C(f,s,$),d[r].m(f,$),C(f,i,$),I(u,f,$),m=!0},p(f,$){const B={};$&32783&&(B.$$scope={dirty:$,ctx:f}),e.$set(B),(!m||$&8)&&o!==(o=f[3].description+"")&&ee(l,o);let L=r;r=k(f),r===L?d[r].p(f,$):(ne(),S(d[L],1,1,()=>{d[L]=null}),te(),c=d[r],c?c.p(f,$):(c=d[r]=b[r](f),c.c()),w(c,1),c.m(i.parentNode,i));const p={};$&8&&(p.href=J.addRecipe(f[3].name)),u.$set(p)},i(f){m||(w(e.$$.fragment,f),w(c),w(u.$$.fragment,f),m=!0)},o(f){S(e.$$.fragment,f),S(c),S(u.$$.fragment,f),m=!1},d(f){f&&(g(n),g(t),g(s),g(i)),R(e,f),d[r].d(f),R(u,f)}}}function Qe(a){let e,n="<h1>404</h1> <p>Coffee beans not found.</p>";return{c(){e=T("div"),e.innerHTML=n,this.h()},l(t){e=F(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-akmamj"&&(e.innerHTML=n),this.h()},h(){M(e,"class","loading-position svelte-1kf2puf")},m(t,o){C(t,e,o)},p:D,i:D,o:D,d(t){t&&g(e)}}}function Xe(a){let e,n,t;return n=new me({}),{c(){e=T("div"),N(n.$$.fragment),this.h()},l(o){e=F(o,"DIV",{class:!0});var l=K(e);P(n.$$.fragment,l),l.forEach(g),this.h()},h(){M(e,"class","loading-position svelte-1kf2puf")},m(o,l){C(o,e,l),I(n,e,null),t=!0},p:D,i(o){t||(w(n.$$.fragment,o),t=!0)},o(o){S(n.$$.fragment,o),t=!1},d(o){o&&g(e),R(n)}}}function Ze(a){let e=a[3].name+"",n;return{c(){n=Z(e)},l(t){n=x(t,e)},m(t,o){C(t,n,o)},p(t,o){o&8&&e!==(e=t[3].name+"")&&ee(n,e)},d(t){t&&g(n)}}}function xe(a){let e,n;return e=new Re({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",a[10]),{c(){N(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){I(e,t,o),n=!0},p:D,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function et(a){let e,n="Please confirm you want to delete these coffee beans.",t,o,l="The dependent recipes will be deleted too.";return{c(){e=T("p"),e.textContent=n,t=z(),o=T("p"),o.textContent=l},l(s){e=F(s,"P",{"data-svelte-h":!0}),X(e)!=="svelte-jtslft"&&(e.textContent=n),t=O(s),o=F(s,"P",{"data-svelte-h":!0}),X(o)!=="svelte-puw9d7"&&(o.textContent=l)},m(s,r){C(s,e,r),C(s,t,r),C(s,o,r)},p:D,d(s){s&&(g(e),g(t),g(o))}}}function tt(a){let e,n,t;function o(s){a[9](s)}let l={slot:"modal",onDeleteClick:a[5],$$slots:{default:[et]},$$scope:{ctx:a}};return a[0]!==void 0&&(l.setModalState=a[0]),e=new Fe({props:l}),A.push(()=>G(e,"setModalState",o)),{c(){N(e.$$.fragment)},l(s){P(e.$$.fragment,s)},m(s,r){I(e,s,r),t=!0},p(s,r){const c={};r&32768&&(c.$$scope={dirty:r,ctx:s}),!n&&r&1&&(n=!0,c.setModalState=s[0],Y(()=>n=!1)),e.$set(c)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){R(e,s)}}}function nt(a){let e,n,t,o,l="Edit",s,r,c,i,u,m,b,d,k;e=new ge({props:{$$slots:{default:[Ze]},$$scope:{ctx:a}}});function f(p){a[8](p)}let $={item:a[3]};a[2]!==void 0&&($.setModalState=a[2]),r=new Ue({props:$}),A.push(()=>G(r,"setModalState",f));function B(p){a[11](p)}let L={$$slots:{modal:[tt],button:[xe]},$$scope:{ctx:a}};return a[1]!==void 0&&(L.setDropdownState=a[1]),u=new Ie({props:L}),A.push(()=>G(u,"setDropdownState",B)),{c(){N(e.$$.fragment),n=z(),t=T("div"),o=T("button"),o.textContent=l,s=z(),N(r.$$.fragment),i=z(),N(u.$$.fragment),this.h()},l(p){P(e.$$.fragment,p),n=O(p),t=F(p,"DIV",{class:!0});var v=K(t);o=F(v,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),X(o)!=="svelte-gleq7e"&&(o.textContent=l),s=O(v),P(r.$$.fragment,v),i=O(v),P(u.$$.fragment,v),v.forEach(g),this.h()},h(){M(o,"class","edit-button svelte-1kf2puf"),M(o,"type","button"),M(t,"class","menu-container svelte-1kf2puf")},m(p,v){I(e,p,v),C(p,n,v),C(p,t,v),E(t,o),E(t,s),I(r,t,null),E(t,i),I(u,t,null),b=!0,d||(k=Q(o,"click",a[7]),d=!0)},p(p,v){const q={};v&32776&&(q.$$scope={dirty:v,ctx:p}),e.$set(q);const H={};v&8&&(H.item=p[3]),!c&&v&4&&(c=!0,H.setModalState=p[2],Y(()=>c=!1)),r.$set(H);const _={};v&32771&&(_.$$scope={dirty:v,ctx:p}),!m&&v&2&&(m=!0,_.setDropdownState=p[1],Y(()=>m=!1)),u.$set(_)},i(p){b||(w(e.$$.fragment,p),w(r.$$.fragment,p),w(u.$$.fragment,p),b=!0)},o(p){S(e.$$.fragment,p),S(r.$$.fragment,p),S(u.$$.fragment,p),b=!1},d(p){p&&(g(n),g(t)),R(e,p),R(r),R(u),d=!1,k()}}}function at(a){let e,n,t=[],o=new Map,l,s;e=new Ee({props:{$$slots:{default:[lt]},$$scope:{ctx:a}}});let r=le(a[4]);const c=i=>i[12].id;for(let i=0;i<r.length;i+=1){let u=re(a,r,i),m=c(u);o.set(m,t[i]=ie(m,u))}return{c(){N(e.$$.fragment),n=z();for(let i=0;i<t.length;i+=1)t[i].c();l=V()},l(i){P(e.$$.fragment,i),n=O(i);for(let u=0;u<t.length;u+=1)t[u].l(i);l=V()},m(i,u){I(e,i,u),C(i,n,u);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(i,u);C(i,l,u),s=!0},p(i,u){const m={};u&32768&&(m.$$scope={dirty:u,ctx:i}),e.$set(m),u&24&&(r=le(i[4]),ne(),t=be(t,u,c,1,i,r,o,l.parentNode,ke,ie,l,re),te())},i(i){if(!s){w(e.$$.fragment,i);for(let u=0;u<r.length;u+=1)w(t[u]);s=!0}},o(i){S(e.$$.fragment,i);for(let u=0;u<t.length;u+=1)S(t[u]);s=!1},d(i){i&&(g(n),g(l)),R(e,i);for(let u=0;u<t.length;u+=1)t[u].d(i)}}}function ot(a){let e,n;return e=new Ne({}),{c(){N(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){I(e,t,o),n=!0},p:D,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function st(a){let e,n;return e=new me({}),{c(){N(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,o){I(e,t,o),n=!0},p:D,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function lt(a){let e;return{c(){e=Z("Sorted by latest recipe date")},l(n){e=x(n,"Sorted by latest recipe date")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function ie(a,e){let n,t,o;return t=new Pe({props:{coffeeBeansName:e[3].name,href:J.recipeItem(e[12].id),recipe:e[12]}}),{key:a,first:null,c(){n=V(),N(t.$$.fragment),this.h()},l(l){n=V(),P(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,s){C(l,n,s),I(t,l,s),o=!0},p(l,s){e=l;const r={};s&8&&(r.coffeeBeansName=e[3].name),s&16&&(r.href=J.recipeItem(e[12].id)),s&16&&(r.recipe=e[12]),t.$set(r)},i(l){o||(w(t.$$.fragment,l),o=!0)},o(l){S(t.$$.fragment,l),o=!1},d(l){l&&g(n),R(t,l)}}}function rt(a){let e,n,t,o,l,s;function r(d,k){return d[3]===void 0?Ge:d[3]==="CoffeeBeansNotFound"?Ye:We}let c=r(a),i=c(a);const u=[Xe,Qe,Je],m=[];function b(d,k){return d[3]===void 0?0:d[3]==="CoffeeBeansNotFound"?1:2}return t=b(a),o=m[t]=u[t](a),{c(){i.c(),e=V(),n=z(),o.c(),l=V()},l(d){const k=he("svelte-1xzg8rg",document.head);i.l(k),e=V(),k.forEach(g),n=O(d),o.l(d),l=V()},m(d,k){i.m(document.head,null),E(document.head,e),C(d,n,k),m[t].m(d,k),C(d,l,k),s=!0},p(d,[k]){c!==(c=r(d))&&(i.d(1),i=c(d),i&&(i.c(),i.m(e.parentNode,e)));let f=t;t=b(d),t===f?m[t].p(d,k):(ne(),S(m[f],1,1,()=>{m[f]=null}),te(),o=m[t],o?o.p(d,k):(o=m[t]=u[t](d),o.c()),w(o,1),o.m(l.parentNode,l))},i(d){s||(w(o),s=!0)},o(d){S(o),s=!1},d(d){d&&(g(n),g(l)),i.d(d),g(e),m[t].d(d)}}}function it(a,e,n){let{data:t}=e,o,l,s,r,c;_e(()=>{Se(t.coffeeBeansName).then(async f=>{if(f===void 0){n(3,r="CoffeeBeansNotFound");return}n(3,r=f);const $=await Ce(r.id);n(4,c=$.sort(De))})});async function i(){if(r instanceof ce){const f=await Me(r.id);await ye(r.id),window.location.replace(J.home),alert(`Coffee beans and ${f} recipes deleted.`)}}const u=()=>s("open");function m(f){s=f,n(2,s)}function b(f){o=f,n(0,o)}const d=()=>{o("open"),l("closed")};function k(f){l=f,n(1,l)}return a.$$set=f=>{"data"in f&&n(6,t=f.data)},[o,l,s,r,c,i,t,u,m,b,d,k]}class St extends ue{constructor(e){super(),de(this,e,it,rt,fe,{data:6})}}export{St as component,wt as universal};
