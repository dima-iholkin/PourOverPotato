import{s as He,o as We,b as N,a as F,n as Q}from"../chunks/scheduler.vcOl-ZmV.js";import{S as qe,i as Le,s as C,k as v,w as ne,l as je,d as h,f as S,m as w,g as B,n as k,o as $,p as Re,q as g,r as I,u as De,t as Ee,b as Pe,v as A,e as X,c as Y,a as Me,z as W,y as le,h as y,A as ze,B as Ve}from"../chunks/index.Otd-Ubpp.js";import{g as U}from"../chunks/entry.nU6hbqEA.js";import{R as ae,b as Je,g as Ke,f as Qe,d as ke,c as Xe,e as Ye,h as Ze,i as xe,p as et,u as tt}from"../chunks/indexedDB.omaGZViy.js";import{n as te}from"../chunks/naming.kUvCv0xb.js";import{r as G}from"../chunks/routes.YvKwRVQK.js";import{C as nt,N as Ie,F as at,T as ot,p as re}from"../chunks/NumberInput.1ThxPj5S.js";import{L as rt}from"../chunks/Loading.ri7Tzl5F.js";import{F as st,D as lt,a as it}from"../chunks/FlexRow.NDLEsJUg.js";import{T as se}from"../chunks/Textarea.nT9hUE4u.js";import{D as ft}from"../chunks/DeleteConfirmationModal.Z7cGPoB9.js";import{P as ut}from"../chunks/PageHeadline.CNgB9f2m.js";function pt({params:o}){const e=Number.parseFloat(o.id);if(Number.isInteger(e)===!1)throw new Error("Non-integer route params are not allowed for this page. The matcher should have filtered outnon-integer values. Something is wrong with the code.");return{recipeId:e}}const Ot=Object.freeze(Object.defineProperty({__proto__:null,load:pt},Symbol.toStringTag,{value:"Module"}));function ct(o){let e;return{c(){e=Ee("Edit recipe")},l(t){e=Pe(t,"Edit recipe")},m(t,a){B(t,e,a)},d(t){t&&h(e)}}}function Te(o){let e,t,a,i;function r(s){o[17](s)}let n={$$slots:{modal:[_t],button:[mt]},$$scope:{ctx:o}};return o[1]!==void 0&&(n.setDropdownState=o[1]),t=new lt({props:n}),N.push(()=>A(t,"setDropdownState",r)),{c(){e=X("div"),v(t.$$.fragment),this.h()},l(s){e=Y(s,"DIV",{class:!0});var p=Me(e);w(t.$$.fragment,p),p.forEach(h),this.h()},h(){W(e,"class","menu-container svelte-vb4cmr")},m(s,p){B(s,e,p),k(t,e,null),i=!0},p(s,p){const m={};p&67108867&&(m.$$scope={dirty:p,ctx:s}),!a&&p&2&&(a=!0,m.setDropdownState=s[1],F(()=>a=!1)),t.$set(m)},i(s){i||(g(t.$$.fragment,s),i=!0)},o(s){$(t.$$.fragment,s),i=!1},d(s){s&&h(e),I(t)}}}function mt(o){let e,t;return e=new it({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",o[16]),{c(){v(e.$$.fragment)},l(a){w(e.$$.fragment,a)},m(a,i){k(e,a,i),t=!0},p:Q,i(a){t||(g(e.$$.fragment,a),t=!0)},o(a){$(e.$$.fragment,a),t=!1},d(a){I(e,a)}}}function dt(o){let e;return{c(){e=Ee("Please confirm you want to delete this recipe")},l(t){e=Pe(t,"Please confirm you want to delete this recipe")},m(t,a){B(t,e,a)},d(t){t&&h(e)}}}function _t(o){let e,t,a;function i(n){o[15](n)}let r={slot:"modal",onDeleteClick:o[12],$$slots:{default:[dt]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.setModalState=o[0]),e=new ft({props:r}),N.push(()=>A(e,"setModalState",i)),{c(){v(e.$$.fragment)},l(n){w(e.$$.fragment,n)},m(n,s){k(e,n,s),a=!0},p(n,s){const p={};s&67108864&&(p.$$scope={dirty:s,ctx:n}),!t&&s&1&&(t=!0,p.setModalState=n[0],F(()=>t=!1)),e.$set(p)},i(n){a||(g(e.$$.fragment,n),a=!0)},o(n){$(e.$$.fragment,n),a=!1},d(n){I(e,n)}}}function gt(o){let e,t,a,i;e=new ut({props:{$$slots:{default:[ct]},$$scope:{ctx:o}}});let r=o[2]instanceof ae&&Te(o);return{c(){v(e.$$.fragment),t=C(),r&&r.c(),a=ne()},l(n){w(e.$$.fragment,n),t=S(n),r&&r.l(n),a=ne()},m(n,s){k(e,n,s),B(n,t,s),r&&r.m(n,s),B(n,a,s),i=!0},p(n,s){const p={};s&67108864&&(p.$$scope={dirty:s,ctx:n}),e.$set(p),n[2]instanceof ae?r?(r.p(n,s),s&4&&g(r,1)):(r=Te(n),r.c(),g(r,1),r.m(a.parentNode,a)):r&&(De(),$(r,1,1,()=>{r=null}),Re())},i(n){i||(g(e.$$.fragment,n),g(r),i=!0)},o(n){$(e.$$.fragment,n),$(r),i=!1},d(n){n&&(h(t),h(a)),I(e,n),r&&r.d(n)}}}function $t(o){let e,t="404",a,i,r="Not Found";return{c(){e=X("p"),e.textContent=t,a=C(),i=X("p"),i.textContent=r},l(n){e=Y(n,"P",{"data-svelte-h":!0}),le(e)!=="svelte-swq3p4"&&(e.textContent=t),a=S(n),i=Y(n,"P",{"data-svelte-h":!0}),le(i)!=="svelte-14ywr5"&&(i.textContent=r)},m(n,s){B(n,e,s),B(n,a,s),B(n,i,s)},p:Q,i:Q,o:Q,d(n){n&&(h(e),h(a),h(i))}}}function ht(o){let e,t,a,i,r,n,s,p,m,b,f,d,T,_,O,q,R,L,j,D,z,V,E,J,K,P,Z="Save changes",H,u,M;function x(l){o[18](l)}let ee={allCoffeeBeans:o[3],showAddButton:!1};o[4]!==void 0&&(ee.selectedCoffeeBeansId=o[4]),t=new nt({props:ee}),N.push(()=>A(t,"selectedCoffeeBeansId",x));function Ne(l){o[19](l)}let ie={id:Ce,label:te.recipe.recipeTarget+":",name:Ce,placeholder:re.recipeTarget};o[5]!==void 0&&(ie.value=o[5]),r=new se({props:ie}),N.push(()=>A(r,"value",Ne));function Fe(l){o[20](l)}let fe={id:Se,label:te.recipe.recipeResult+":",name:Se,placeholder:re.recipeResult};o[6]!==void 0&&(fe.value=o[6]),p=new se({props:fe}),N.push(()=>A(p,"value",Fe));function Ae(l){o[21](l)}let ue={labelText:te.recipe.outWeight+" (g):",min:0,nameAttr:wt,step:5};o[8]!==void 0&&(ue.value=o[8]),f=new Ie({props:ue}),N.push(()=>A(f,"value",Ae));function Oe(l){o[22](l)}let pe={labelText:"Rating:",max:5,min:0,nameAttr:kt,step:.5};o[9]!==void 0&&(pe.value=o[9]),_=new Ie({props:pe}),N.push(()=>A(_,"value",Oe));function ye(l){o[23](l)}let ce={};o[10]!==void 0&&(ce.value=o[10]),R=new at({props:ce}),N.push(()=>A(R,"value",ye));function Ue(l){o[24](l)}let me={id:Be,label:te.recipe.recipeThoughts+":",name:Be,placeholder:re.recipeThoughts};o[7]!==void 0&&(me.value=o[7]),D=new se({props:me}),N.push(()=>A(D,"value",Ue));function Ge(l){o[25](l)}let de={};return o[11]!==void 0&&(de.value=o[11]),E=new ot({props:de}),N.push(()=>A(E,"value",Ge)),{c(){e=X("form"),v(t.$$.fragment),i=C(),v(r.$$.fragment),s=C(),v(p.$$.fragment),b=C(),v(f.$$.fragment),T=C(),v(_.$$.fragment),q=C(),v(R.$$.fragment),j=C(),v(D.$$.fragment),V=C(),v(E.$$.fragment),K=C(),P=X("button"),P.textContent=Z,this.h()},l(l){e=Y(l,"FORM",{id:!0,class:!0});var c=Me(e);w(t.$$.fragment,c),i=S(c),w(r.$$.fragment,c),s=S(c),w(p.$$.fragment,c),b=S(c),w(f.$$.fragment,c),T=S(c),w(_.$$.fragment,c),q=S(c),w(R.$$.fragment,c),j=S(c),w(D.$$.fragment,c),V=S(c),w(E.$$.fragment,c),K=S(c),P=Y(c,"BUTTON",{class:!0,form:!0,type:!0,"data-svelte-h":!0}),le(P)!=="svelte-1dkauk3"&&(P.textContent=Z),c.forEach(h),this.h()},h(){W(P,"class","my-button svelte-vb4cmr"),W(P,"form","edit-recipe"),W(P,"type","submit"),W(e,"id","edit-recipe"),W(e,"class","svelte-vb4cmr")},m(l,c){B(l,e,c),k(t,e,null),y(e,i),k(r,e,null),y(e,s),k(p,e,null),y(e,b),k(f,e,null),y(e,T),k(_,e,null),y(e,q),k(R,e,null),y(e,j),k(D,e,null),y(e,V),k(E,e,null),y(e,K),y(e,P),H=!0,u||(M=ze(e,"submit",Ve(o[13])),u=!0)},p(l,c){const oe={};c&8&&(oe.allCoffeeBeans=l[3]),!a&&c&16&&(a=!0,oe.selectedCoffeeBeansId=l[4],F(()=>a=!1)),t.$set(oe);const _e={};!n&&c&32&&(n=!0,_e.value=l[5],F(()=>n=!1)),r.$set(_e);const ge={};!m&&c&64&&(m=!0,ge.value=l[6],F(()=>m=!1)),p.$set(ge);const $e={};!d&&c&256&&(d=!0,$e.value=l[8],F(()=>d=!1)),f.$set($e);const he={};!O&&c&512&&(O=!0,he.value=l[9],F(()=>O=!1)),_.$set(he);const be={};!L&&c&1024&&(L=!0,be.value=l[10],F(()=>L=!1)),R.$set(be);const ve={};!z&&c&128&&(z=!0,ve.value=l[7],F(()=>z=!1)),D.$set(ve);const we={};!J&&c&2048&&(J=!0,we.value=l[11],F(()=>J=!1)),E.$set(we)},i(l){H||(g(t.$$.fragment,l),g(r.$$.fragment,l),g(p.$$.fragment,l),g(f.$$.fragment,l),g(_.$$.fragment,l),g(R.$$.fragment,l),g(D.$$.fragment,l),g(E.$$.fragment,l),H=!0)},o(l){$(t.$$.fragment,l),$(r.$$.fragment,l),$(p.$$.fragment,l),$(f.$$.fragment,l),$(_.$$.fragment,l),$(R.$$.fragment,l),$(D.$$.fragment,l),$(E.$$.fragment,l),H=!1},d(l){l&&h(e),I(t),I(r),I(p),I(f),I(_),I(R),I(D),I(E),u=!1,M()}}}function bt(o){let e,t;return e=new rt({}),{c(){v(e.$$.fragment)},l(a){w(e.$$.fragment,a)},m(a,i){k(e,a,i),t=!0},p:Q,i(a){t||(g(e.$$.fragment,a),t=!0)},o(a){$(e.$$.fragment,a),t=!1},d(a){I(e,a)}}}function vt(o){let e,t,a,i,r,n,s;t=new st({props:{$$slots:{default:[gt]},$$scope:{ctx:o}}});const p=[bt,ht,$t],m=[];function b(f,d){return f[2]===null?0:f[2]instanceof ae?1:2}return i=b(o),r=m[i]=p[i](o),{c(){e=C(),v(t.$$.fragment),a=C(),r.c(),n=ne(),this.h()},l(f){je("svelte-cc1fw0",document.head).forEach(h),e=S(f),w(t.$$.fragment,f),a=S(f),r.l(f),n=ne(),this.h()},h(){document.title="Edit recipe - PourOverPotato app"},m(f,d){B(f,e,d),k(t,f,d),B(f,a,d),m[i].m(f,d),B(f,n,d),s=!0},p(f,[d]){const T={};d&67108871&&(T.$$scope={dirty:d,ctx:f}),t.$set(T);let _=i;i=b(f),i===_?m[i].p(f,d):(De(),$(m[_],1,1,()=>{m[_]=null}),Re(),r=m[i],r?r.p(f,d):(r=m[i]=p[i](f),r.c()),g(r,1),r.m(n.parentNode,n))},i(f){s||(g(t.$$.fragment,f),g(r),s=!0)},o(f){$(t.$$.fragment,f),$(r),s=!1},d(f){f&&(h(e),h(a),h(n)),I(t,f),m[i].d(f)}}}const Ce="recipe-target",Se="recipe-result",Be="recipe-thoughts",wt="out-weight",kt="rating";function It(o,e,t){let{data:a}=e,i,r,n=null,s,p,m,b,f,d,T,_,O;We(()=>{Je(a.recipeId).then(u=>{t(2,n=u),u!==void 0&&Ke().then(M=>{t(3,s=M),t(4,p=u.coffeeBeansId),t(5,m=u.recipeTarget),t(6,b=u.recipeResult),t(7,f=u.recipeThoughts),t(8,d=u.outWeight),t(9,T=u.rating),t(10,_=u.favorite),t(11,O=Qe(u.timestamp))})})});async function q(){if(n==null)return;const u=n;await ke(u.id,!0,u);const M=await Xe(u.coffeeBeansId);Ye("Recipe deleted.",async()=>{await tt(u),U(G.home).then(()=>M?U(G.coffeeBeansItem(M.name)):U(G.home))},async()=>{await ke(u.id)}),M?U(G.coffeeBeansItem(M.name)):U(G.home)}async function R(){t(5,m=m.trim()),t(6,b=b.trim()),t(7,f=f.trim());const u=et(O);if(p===void 0)throw new Error("Please select the coffee beans.");if(n==null)throw new Error("Recipe was undefined or null somehow.");const M=new ae({coffeeBeansId:p,recipeTarget:m,recipeResult:b,recipeThoughts:f,outWeight:d,rating:T,favorite:_,timestamp:u},n.id);await Ze(M),xe("Recipe changes saved.");const x=s==null?void 0:s.find(ee=>ee.id===p);if(x===void 0){U(G.home);return}U(G.coffeeBeansItem(x.name))}function L(u){i=u,t(0,i)}const j=()=>{r("closed"),i("open")};function D(u){r=u,t(1,r)}function z(u){p=u,t(4,p)}function V(u){m=u,t(5,m)}function E(u){b=u,t(6,b)}function J(u){d=u,t(8,d)}function K(u){T=u,t(9,T)}function P(u){_=u,t(10,_)}function Z(u){f=u,t(7,f)}function H(u){O=u,t(11,O)}return o.$$set=u=>{"data"in u&&t(14,a=u.data)},[i,r,n,s,p,m,b,f,d,T,_,O,q,R,a,L,j,D,z,V,E,J,K,P,Z,H]}class yt extends qe{constructor(e){super(),Le(this,e,It,vt,He,{data:14})}}export{yt as component,Ot as universal};
