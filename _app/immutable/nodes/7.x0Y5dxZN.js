import{s as Ae,d as y,e as A,o as Ne}from"../chunks/scheduler.QZKnv3vM.js";import{S as Oe,i as He,y as N,s as T,k as S,e as Te,l as Ge,d as M,f as E,m as B,c as Ee,a as Ue,z as Me,x as K,g as ee,n as F,h as P,A as De,C as Le,q as R,o as w,r as k,t as We,b as je}from"../chunks/index.CHfITGLb.js";import{g as qe,i as xe}from"../chunks/indexedDB.vUzQvWEJ.js";import{f as ze,n as Z,p as Ke}from"../chunks/dateHelpers.s53s9lsh.js";import{r as Ie}from"../chunks/routes.z25Z1unV.js";import{C as Ve,N as Se,T as Je}from"../chunks/NumberInput.f7AY_Max.js";import{T as re}from"../chunks/Textarea.YwjDPZYz.js";import{P as Qe}from"../chunks/PageHeadline.dJVkQ42h.js";async function Xe({url:t}){return{coffeeBeansName:t.searchParams.get("coffee_beans_name")}}const mt=Object.freeze(Object.defineProperty({__proto__:null,load:Xe},Symbol.toStringTag,{value:"Module"}));function H(t,s,n){const m=ie(t,s);localStorage.setItem(m,n)}function G(t,s,n){const m=ie(t,s),a=localStorage.getItem(m);if(a===null)return null;if(n==="number"){const l=Number.parseFloat(a);return Number.isNaN(l)?null:l}return a}function U(t,s){const n=ie(t,s);localStorage.removeItem(n)}function ie(t,s){return`form_${t}_${s}`}function Ye(t){let s;return{c(){s=We("Add recipe")},l(n){s=je(n,"Add recipe")},m(n,m){ee(n,s,m)},d(n){n&&M(s)}}}function Ze(t){let s,n,m,a,l,c,d,o,_,v,p,I,D,g,L,W,b,j,q,h,x,r,$,O,z,C,oe="Save",X,ae,ue;n=new Qe({props:{$$slots:{default:[Ye]},$$scope:{ctx:t}}});function Be(e){t[12](e)}let le={allCoffeeBeans:t[7],onSavedCoffeeBeans:t[10],validationFailed:t[6]};t[0]!==void 0&&(le.selectedCoffeeBeansId=t[0]),l=new Ve({props:le}),y.push(()=>N(l,"selectedCoffeeBeansId",Be));function Fe(e){t[13](e)}let fe={id:V,label:Z.recipe.recipeTarget+":",name:V,placeholder:et};t[1]!==void 0&&(fe.value=t[1]),o=new re({props:fe}),y.push(()=>N(o,"value",Fe));function Pe(e){t[14](e)}let pe={id:J,label:Z.recipe.recipeResult+":",name:J,placeholder:tt};t[2]!==void 0&&(pe.value=t[2]),p=new re({props:pe}),y.push(()=>N(p,"value",Pe));function Re(e){t[15](e)}let me={labelText:Z.recipe.outWeight+" (g):",min:0,nameAttr:te,step:5};t[4]!==void 0&&(me.value=t[4]),g=new Se({props:me}),y.push(()=>N(g,"value",Re));function we(e){t[16](e)}let ce={labelText:"Rating:",max:5,min:0,nameAttr:ne,step:.5};t[5]!==void 0&&(ce.value=t[5]),b=new Se({props:ce}),y.push(()=>N(b,"value",we));function ke(e){t[17](e)}let de={id:Q,label:Z.recipe.recipeThoughts+":",name:Q,placeholder:nt,textLinesCount:4};t[3]!==void 0&&(de.value=t[3]),h=new re({props:de}),y.push(()=>N(h,"value",ke));function ye(e){t[18](e)}let _e={};return t[8]!==void 0&&(_e.value=t[8]),$=new Je({props:_e}),y.push(()=>N($,"value",ye)),{c(){s=T(),S(n.$$.fragment),m=T(),a=Te("form"),S(l.$$.fragment),d=T(),S(o.$$.fragment),v=T(),S(p.$$.fragment),D=T(),S(g.$$.fragment),W=T(),S(b.$$.fragment),q=T(),S(h.$$.fragment),r=T(),S($.$$.fragment),z=T(),C=Te("button"),C.textContent=oe,this.h()},l(e){Ge("svelte-kogo9l",document.head).forEach(M),s=E(e),B(n.$$.fragment,e),m=E(e),a=Ee(e,"FORM",{id:!0,class:!0});var i=Ue(a);B(l.$$.fragment,i),d=E(i),B(o.$$.fragment,i),v=E(i),B(p.$$.fragment,i),D=E(i),B(g.$$.fragment,i),W=E(i),B(b.$$.fragment,i),q=E(i),B(h.$$.fragment,i),r=E(i),B($.$$.fragment,i),z=E(i),C=Ee(i,"BUTTON",{class:!0,form:!0,type:!0,"data-svelte-h":!0}),Me(C)!=="svelte-1pg8oi4"&&(C.textContent=oe),i.forEach(M),this.h()},h(){document.title="Add recipe - PourOverPotato app",K(C,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded svelte-b37xp1"),K(C,"form","add-recipe"),K(C,"type","submit"),K(a,"id","add-recipe"),K(a,"class","svelte-b37xp1")},m(e,f){ee(e,s,f),F(n,e,f),ee(e,m,f),ee(e,a,f),F(l,a,null),P(a,d),F(o,a,null),P(a,v),F(p,a,null),P(a,D),F(g,a,null),P(a,W),F(b,a,null),P(a,q),F(h,a,null),P(a,r),F($,a,null),P(a,z),P(a,C),X=!0,ae||(ue=De(a,"submit",Le(t[9])),ae=!0)},p(e,[f]){const i={};f&524288&&(i.$$scope={dirty:f,ctx:e}),n.$set(i);const Y={};f&128&&(Y.allCoffeeBeans=e[7]),f&64&&(Y.validationFailed=e[6]),!c&&f&1&&(c=!0,Y.selectedCoffeeBeansId=e[0],A(()=>c=!1)),l.$set(Y);const ge={};!_&&f&2&&(_=!0,ge.value=e[1],A(()=>_=!1)),o.$set(ge);const be={};!I&&f&4&&(I=!0,be.value=e[2],A(()=>I=!1)),p.$set(be);const he={};!L&&f&16&&(L=!0,he.value=e[4],A(()=>L=!1)),g.$set(he);const ve={};!j&&f&32&&(j=!0,ve.value=e[5],A(()=>j=!1)),b.$set(ve);const $e={};!x&&f&8&&(x=!0,$e.value=e[3],A(()=>x=!1)),h.$set($e);const Ce={};!O&&f&256&&(O=!0,Ce.value=e[8],A(()=>O=!1)),$.$set(Ce)},i(e){X||(R(n.$$.fragment,e),R(l.$$.fragment,e),R(o.$$.fragment,e),R(p.$$.fragment,e),R(g.$$.fragment,e),R(b.$$.fragment,e),R(h.$$.fragment,e),R($.$$.fragment,e),X=!0)},o(e){w(n.$$.fragment,e),w(l.$$.fragment,e),w(o.$$.fragment,e),w(p.$$.fragment,e),w(g.$$.fragment,e),w(b.$$.fragment,e),w(h.$$.fragment,e),w($.$$.fragment,e),X=!1},d(e){e&&(M(s),M(m),M(a)),k(n,e),k(l),k(o),k(p),k(g),k(b),k(h),k($),ae=!1,ue()}}}const V="recipe-target",et="Example: 17 clicks, 15g + 260g. 5m boil.",J="recipe-result",tt="Example: 2m15s + 15s drip. 250g out.",Q="recipe-thoughts",nt="Example: Perfect balance. Perfect concentration. Flowery notes.",te="out-weight",ne="rating",u="addRecipe",se="coffee-beans";function at(t,s,n){let m=!1,a=!1,l,c,d="",o="",_="",v=0,p=0,I=ze(new Date);Ne(()=>{qe().then(r=>{n(7,l=r),n(0,c=G(u,se,"number")??void 0),n(1,d=G(u,V,"string")??""),n(2,o=G(u,J,"string")??""),n(3,_=G(u,Q,"string")??""),n(4,v=G(u,te,"number")??0),n(5,p=G(u,ne,"number")??0),n(11,a=!0)})});async function D(){if(c===void 0){n(6,m=!0);return}n(1,d=d.trim()),n(2,o=o.trim()),n(3,_=_.trim());const r=Ke(I);await xe({coffeeBeansId:c,recipeTarget:d,recipeResult:o,recipeThoughts:_,outWeight:v,rating:p,timestamp:r}),U(u,se),U(u,V),U(u,J),U(u,Q),U(u,te),U(u,ne),alert("Recipe saved.");const O=l.find(z=>z.id===c);if(O===void 0){window.location.replace(Ie.home);return}window.location.replace(Ie.coffeeBeansItem(O.name))}function g(r){l.push(r),n(0,c=r.id),n(6,m=!1)}function L(r){c=r,n(0,c)}function W(r){d=r,n(1,d)}function b(r){o=r,n(2,o)}function j(r){v=r,n(4,v)}function q(r){p=r,n(5,p)}function h(r){_=r,n(3,_)}function x(r){I=r,n(8,I)}return t.$$.update=()=>{t.$$.dirty&2049&&c!==void 0&&a&&H(u,se,c),t.$$.dirty&2050&&a&&H(u,V,d),t.$$.dirty&2052&&a&&H(u,J,o),t.$$.dirty&2056&&a&&H(u,Q,_),t.$$.dirty&2064&&a&&H(u,te,v),t.$$.dirty&2080&&a&&H(u,ne,p)},[c,d,o,_,v,p,m,l,I,D,g,a,L,W,b,j,q,h,x]}class ct extends Oe{constructor(s){super(),He(this,s,at,Ze,Ae,{})}}export{ct as component,mt as universal};
