import{s as _e,b as A,a as U,f as le,r as be,t as ve,n as y}from"../chunks/scheduler.vcOl-ZmV.js";import{S as he,i as $e,v as W,k as T,m as E,n as I,q as B,o as M,r as P,e as R,s as F,t as x,c as O,a as Q,f as z,b as ee,d as k,z as Z,y as S,g as D,h as N,C as ie,A as X,B as we,j as ae,w as K,l as ke,p as oe,u as se}from"../chunks/index.Cssh76hr.js";import{e as fe,u as Ce,o as Se}from"../chunks/each.Y9tOFi6h.js";import{g as J}from"../chunks/entry.Su1OWOLf.js";import{C as Be,l as Me,m as De,i as ye,n as Ne,k as Te,o as ue,q as de,e as Ee,r as Ie,s as Pe}from"../chunks/indexedDB.DSM7SfQo.js";import{s as ce,A as Re,N as Oe}from"../chunks/NoItemsYetP.dNabnttE.js";import{r as j}from"../chunks/routes.RZezSDDh.js";import{S as Fe,R as ze}from"../chunks/SortRecipesSelect.IrVPKTS-.js";import{L as ge}from"../chunks/Loading.Qg4qLUvP.js";import{D as Ve,a as je}from"../chunks/DropdownMenuItem.9K70NrI_.js";import{F as Le}from"../chunks/FlexRow.xptY61V6.js";import{D as qe}from"../chunks/DeleteConfirmationModal.90_dspso.js";import{P as Ae}from"../chunks/PageHeadline.nemWhGO-.js";import{L as He,T as Ke}from"../chunks/Textarea.sQmVyK-K.js";import{M as Ue}from"../chunks/Modal.98NkFoyT.js";function We({params:o}){return{coffeeBeansName:o.name}}const Tt=Object.freeze(Object.defineProperty({__proto__:null,load:We},Symbol.toStringTag,{value:"Module"}));function Ye(o){let e;return{c(){e=x("Coffee beans name:")},l(n){e=ee(n,"Coffee beans name:")},m(n,t){D(n,e,t)},d(n){n&&k(e)}}}function Ge(o){let e,n,t,a,l,r,i,d,c,_,g,f,s,h,u,w,V,m,p="Save",v,L,H;t=new He({props:{for_:"name",valid:!o[0],$$slots:{default:[Ye]},$$scope:{ctx:o}}});function Y(b){o[18](b)}function te(b){o[19](b)}function ne(b){o[20](b)}let $={id:"description",label:"Description:",name:"description",placeholder:Qe};return o[2]!==void 0&&($.resizeTextarea=o[2]),o[4]!==void 0&&($.this_=o[4]),o[7]!==void 0&&($.value=o[7]),s=new Ke({props:$}),A.push(()=>W(s,"resizeTextarea",Y)),A.push(()=>W(s,"this_",te)),A.push(()=>W(s,"value",ne)),s.$on("keydown",o[10]),{c(){e=R("form"),n=R("div"),T(t.$$.fragment),a=F(),l=R("input"),d=F(),c=R("p"),_=x(o[8]),g=F(),f=R("div"),T(s.$$.fragment),V=F(),m=R("button"),m.textContent=p,this.h()},l(b){e=O(b,"FORM",{class:!0});var C=Q(e);n=O(C,"DIV",{class:!0});var q=Q(n);E(t.$$.fragment,q),a=z(q),l=O(q,"INPUT",{id:!0,autocomplete:!0,class:!0,name:!0,placeholder:!0,type:!0}),d=z(q),c=O(q,"P",{class:!0});var G=Q(c);_=ee(G,o[8]),G.forEach(k),q.forEach(k),g=z(C),f=O(C,"DIV",{class:!0});var re=Q(f);E(s.$$.fragment,re),re.forEach(k),V=z(C),m=O(C,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Z(m)!=="svelte-j4uhei"&&(m.textContent=p),C.forEach(k),this.h()},h(){S(l,"id","name"),S(l,"autocomplete","off"),S(l,"class",r=le(o[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"),S(l,"name","name"),S(l,"placeholder",i=o[0]?"":"Example: Rwanda Mabanza"),S(l,"type","text"),S(c,"class","mt-2 text-sm text-red-600 dark:text-red-500"),S(n,"class","mb-5"),S(f,"class","my-div mb-5 svelte-15jwmuc"),S(m,"class","button-submit svelte-15jwmuc"),S(m,"type","submit"),S(e,"class","mx-auto")},m(b,C){D(b,e,C),N(e,n),I(t,n,null),N(n,a),N(n,l),o[16](l),ie(l,o[6]),N(n,d),N(n,c),N(c,_),N(e,g),N(e,f),I(s,f,null),N(e,V),N(e,m),o[21](e),v=!0,L||(H=[X(l,"input",o[17]),X(l,"input",o[13]),X(l,"keydown",o[9]),X(e,"submit",we(o[11]))],L=!0)},p(b,C){const q={};C&1&&(q.valid=!b[0]),C&8388608&&(q.$$scope={dirty:C,ctx:b}),t.$set(q),(!v||C&1&&r!==(r=le(b[0]?"input-name-validation-failed":"input-name")+" svelte-15jwmuc"))&&S(l,"class",r),(!v||C&1&&i!==(i=b[0]?"":"Example: Rwanda Mabanza"))&&S(l,"placeholder",i),C&64&&l.value!==b[6]&&ie(l,b[6]),(!v||C&256)&&ae(_,b[8]);const G={};!h&&C&4&&(h=!0,G.resizeTextarea=b[2],U(()=>h=!1)),!u&&C&16&&(u=!0,G.this_=b[4],U(()=>u=!1)),!w&&C&128&&(w=!0,G.value=b[7],U(()=>w=!1)),s.$set(G)},i(b){v||(B(t.$$.fragment,b),B(s.$$.fragment,b),v=!0)},o(b){M(t.$$.fragment,b),M(s.$$.fragment,b),v=!1},d(b){b&&k(e),P(t),o[16](null),P(s),o[21](null),L=!1,be(H)}}}function Je(o){let e,n,t;function a(r){o[22](r)}let l={onStateChange:o[12],title:"Edit coffee beans",$$slots:{default:[Ge]},$$scope:{ctx:o}};return o[1]!==void 0&&(l.setState=o[1]),e=new Ue({props:l}),A.push(()=>W(e,"setState",a)),{c(){T(e.$$.fragment)},l(r){E(e.$$.fragment,r)},m(r,i){I(e,r,i),t=!0},p(r,[i]){const d={};i&8389117&&(d.$$scope={dirty:i,ctx:r}),!n&&i&2&&(n=!0,d.setState=r[1],U(()=>n=!1)),e.$set(d)},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){P(e,r)}}}const Qe="Example: Washed process. Notes: plum, cherry.";function Xe(o,e,n){const t=$=>{l($)};let{item:a}=e,l,r,i,d,c,_=a.name??"",g=a.description??"",f="",s=!1;function h($){$.key==="Enter"&&($.preventDefault(),d.focus())}function u($){$.key==="Enter"&&($.metaKey||$.ctrlKey)&&($.preventDefault(),c.requestSubmit())}async function w(){const $=new Be({name:_,description:g},a.id),b=Me.create($);if(b==="ValidationFailed_NameMustBeAtLeast3CharsLong"){n(0,s=!0),n(8,f="Name must be at least 3 characters long.");return}const C=await De(b);if(C==="Failure_NameAlreadyExist"){n(0,s=!0),n(8,f="Coffee beans with this name exist already.");return}ye(`Coffee beans "${C.name}" changes saved.`),n(14,a=C),l("closed"),J(j.home).then(()=>J(j.coffeeBeansItem(C.name)))}function V($){$==="open"&&(n(6,_=a.name??""),n(7,g=a.description??""),n(8,f=""),ve().then(()=>{r()}))}function m(){s&&(n(0,s=!1),n(8,f=""))}function p($){A[$?"unshift":"push"](()=>{i=$,n(3,i)})}function v(){_=this.value,n(6,_)}function L($){r=$,n(2,r)}function H($){d=$,n(4,d)}function Y($){g=$,n(7,g)}function te($){A[$?"unshift":"push"](()=>{c=$,n(5,c)})}function ne($){l=$,n(1,l)}return o.$$set=$=>{"item"in $&&n(14,a=$.item)},o.$$.update=()=>{o.$$.dirty&1&&s===!1&&n(8,f="")},[s,l,r,i,d,c,_,g,f,h,u,w,V,m,a,t,p,v,L,H,Y,te,ne]}class Ze extends he{constructor(e){super(),$e(this,e,Xe,Je,_e,{setModalState:15,item:14})}get setModalState(){return this.$$.ctx[15]}}function me(o,e,n){const t=o.slice();return t[15]=e[n],t}function xe(o){return document.title=o[5].name+" - PourOverPotato app",{c:y,l:y,m:y,d:y}}function et(o){return{c(){this.h()},l(e){this.h()},h(){document.title="404 Not Found - PourOverPotato app"},m:y,d:y}}function tt(o){return{c(){this.h()},l(e){this.h()},h(){document.title="loading... - PourOverPotato app"},m:y,d:y}}function nt(o){let e,n,t,a=o[5].description+"",l,r,i,d,c,_,g;e=new Le({props:{$$slots:{default:[ft]},$$scope:{ctx:o}}});const f=[ct,dt,ut],s=[];function h(u,w){return u[0]===void 0?0:u[0].length===0?1:2}return i=h(o),d=s[i]=f[i](o),_=new Re({props:{href:j.addRecipe(o[5].name)}}),{c(){T(e.$$.fragment),n=F(),t=R("p"),l=x(a),r=F(),d.c(),c=F(),T(_.$$.fragment),this.h()},l(u){E(e.$$.fragment,u),n=z(u),t=O(u,"P",{class:!0});var w=Q(t);l=ee(w,a),w.forEach(k),r=z(u),d.l(u),c=z(u),E(_.$$.fragment,u),this.h()},h(){S(t,"class","coffee-beans-description svelte-1vu3dn8")},m(u,w){I(e,u,w),D(u,n,w),D(u,t,w),N(t,l),D(u,r,w),s[i].m(u,w),D(u,c,w),I(_,u,w),g=!0},p(u,w){const V={};w&262204&&(V.$$scope={dirty:w,ctx:u}),e.$set(V),(!g||w&32)&&a!==(a=u[5].description+"")&&ae(l,a);let m=i;i=h(u),i===m?s[i].p(u,w):(se(),M(s[m],1,1,()=>{s[m]=null}),oe(),d=s[i],d?d.p(u,w):(d=s[i]=f[i](u),d.c()),B(d,1),d.m(c.parentNode,c));const p={};w&32&&(p.href=j.addRecipe(u[5].name)),_.$set(p)},i(u){g||(B(e.$$.fragment,u),B(d),B(_.$$.fragment,u),g=!0)},o(u){M(e.$$.fragment,u),M(d),M(_.$$.fragment,u),g=!1},d(u){u&&(k(n),k(t),k(r),k(c)),P(e,u),s[i].d(u),P(_,u)}}}function at(o){let e,n="<h1>404</h1> <p>Coffee beans not found.</p>";return{c(){e=R("div"),e.innerHTML=n,this.h()},l(t){e=O(t,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-akmamj"&&(e.innerHTML=n),this.h()},h(){S(e,"class","loading-position svelte-1vu3dn8")},m(t,a){D(t,e,a)},p:y,i:y,o:y,d(t){t&&k(e)}}}function ot(o){let e,n,t;return n=new ge({}),{c(){e=R("div"),T(n.$$.fragment),this.h()},l(a){e=O(a,"DIV",{class:!0});var l=Q(e);E(n.$$.fragment,l),l.forEach(k),this.h()},h(){S(e,"class","loading-position svelte-1vu3dn8")},m(a,l){D(a,e,l),I(n,e,null),t=!0},p:y,i(a){t||(B(n.$$.fragment,a),t=!0)},o(a){M(n.$$.fragment,a),t=!1},d(a){a&&k(e),P(n)}}}function st(o){let e=o[5].name+"",n;return{c(){n=x(e)},l(t){n=ee(t,e)},m(t,a){D(t,n,a)},p(t,a){a&32&&e!==(e=t[5].name+"")&&ae(n,e)},d(t){t&&k(n)}}}function rt(o){let e,n;return e=new je({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",o[11]),{c(){T(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,a){I(e,t,a),n=!0},p:y,i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function lt(o){let e,n="Please confirm you want to delete these coffee beans.",t,a,l="The dependent recipes will be deleted too.";return{c(){e=R("p"),e.textContent=n,t=F(),a=R("p"),a.textContent=l},l(r){e=O(r,"P",{"data-svelte-h":!0}),Z(e)!=="svelte-jtslft"&&(e.textContent=n),t=z(r),a=O(r,"P",{"data-svelte-h":!0}),Z(a)!=="svelte-puw9d7"&&(a.textContent=l)},m(r,i){D(r,e,i),D(r,t,i),D(r,a,i)},p:y,d(r){r&&(k(e),k(t),k(a))}}}function it(o){let e,n,t;function a(r){o[10](r)}let l={slot:"modal",onDeleteClick:o[6],$$slots:{default:[lt]},$$scope:{ctx:o}};return o[2]!==void 0&&(l.setModalState=o[2]),e=new qe({props:l}),A.push(()=>W(e,"setModalState",a)),{c(){T(e.$$.fragment)},l(r){E(e.$$.fragment,r)},m(r,i){I(e,r,i),t=!0},p(r,i){const d={};i&262144&&(d.$$scope={dirty:i,ctx:r}),!n&&i&4&&(n=!0,d.setModalState=r[2],U(()=>n=!1)),e.$set(d)},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){P(e,r)}}}function ft(o){let e,n,t,a,l="Edit",r,i,d,c,_,g,f,s,h;e=new Ae({props:{$$slots:{default:[st]},$$scope:{ctx:o}}});function u(p){o[9](p)}let w={item:o[5]};o[4]!==void 0&&(w.setModalState=o[4]),i=new Ze({props:w}),A.push(()=>W(i,"setModalState",u));function V(p){o[12](p)}let m={$$slots:{modal:[it],button:[rt]},$$scope:{ctx:o}};return o[3]!==void 0&&(m.setDropdownState=o[3]),_=new Ve({props:m}),A.push(()=>W(_,"setDropdownState",V)),{c(){T(e.$$.fragment),n=F(),t=R("div"),a=R("button"),a.textContent=l,r=F(),T(i.$$.fragment),c=F(),T(_.$$.fragment),this.h()},l(p){E(e.$$.fragment,p),n=z(p),t=O(p,"DIV",{class:!0});var v=Q(t);a=O(v,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Z(a)!=="svelte-gleq7e"&&(a.textContent=l),r=z(v),E(i.$$.fragment,v),c=z(v),E(_.$$.fragment,v),v.forEach(k),this.h()},h(){S(a,"class","edit-button svelte-1vu3dn8"),S(a,"type","button"),S(t,"class","menu-container svelte-1vu3dn8")},m(p,v){I(e,p,v),D(p,n,v),D(p,t,v),N(t,a),N(t,r),I(i,t,null),N(t,c),I(_,t,null),f=!0,s||(h=X(a,"click",o[8]),s=!0)},p(p,v){const L={};v&262176&&(L.$$scope={dirty:v,ctx:p}),e.$set(L);const H={};v&32&&(H.item=p[5]),!d&&v&16&&(d=!0,H.setModalState=p[4],U(()=>d=!1)),i.$set(H);const Y={};v&262156&&(Y.$$scope={dirty:v,ctx:p}),!g&&v&8&&(g=!0,Y.setDropdownState=p[3],U(()=>g=!1)),_.$set(Y)},i(p){f||(B(e.$$.fragment,p),B(i.$$.fragment,p),B(_.$$.fragment,p),f=!0)},o(p){M(e.$$.fragment,p),M(i.$$.fragment,p),M(_.$$.fragment,p),f=!1},d(p){p&&(k(n),k(t)),P(e,p),P(i),P(_),s=!1,h()}}}function ut(o){let e,n,t,a=[],l=new Map,r,i;function d(f){o[13](f)}let c={pageName:"coffeebeans_recipes"};o[1]!==void 0&&(c.sortOrderValue=o[1]),e=new Fe({props:c}),A.push(()=>W(e,"sortOrderValue",d));let _=fe(o[0]);const g=f=>f[15].id;for(let f=0;f<_.length;f+=1){let s=me(o,_,f),h=g(s);l.set(h,a[f]=pe(h,s))}return{c(){T(e.$$.fragment),t=F();for(let f=0;f<a.length;f+=1)a[f].c();r=K()},l(f){E(e.$$.fragment,f),t=z(f);for(let s=0;s<a.length;s+=1)a[s].l(f);r=K()},m(f,s){I(e,f,s),D(f,t,s);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(f,s);D(f,r,s),i=!0},p(f,s){const h={};!n&&s&2&&(n=!0,h.sortOrderValue=f[1],U(()=>n=!1)),e.$set(h),s&33&&(_=fe(f[0]),se(),a=Ce(a,s,g,1,f,_,l,r.parentNode,Se,pe,r,me),oe())},i(f){if(!i){B(e.$$.fragment,f);for(let s=0;s<_.length;s+=1)B(a[s]);i=!0}},o(f){M(e.$$.fragment,f);for(let s=0;s<a.length;s+=1)M(a[s]);i=!1},d(f){f&&(k(t),k(r)),P(e,f);for(let s=0;s<a.length;s+=1)a[s].d(f)}}}function dt(o){let e,n;return e=new Oe({}),{c(){T(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,a){I(e,t,a),n=!0},p:y,i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function ct(o){let e,n;return e=new ge({}),{c(){T(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,a){I(e,t,a),n=!0},p:y,i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function pe(o,e){let n,t,a;return t=new ze({props:{coffeeBeansName:e[5].name,href:j.recipeItem(e[15].id),recipe:e[15]}}),{key:o,first:null,c(){n=K(),T(t.$$.fragment),this.h()},l(l){n=K(),E(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,r){D(l,n,r),I(t,l,r),a=!0},p(l,r){e=l;const i={};r&32&&(i.coffeeBeansName=e[5].name),r&1&&(i.href=j.recipeItem(e[15].id)),r&1&&(i.recipe=e[15]),t.$set(i)},i(l){a||(B(t.$$.fragment,l),a=!0)},o(l){M(t.$$.fragment,l),a=!1},d(l){l&&k(n),P(t,l)}}}function mt(o){let e,n,t,a,l,r;function i(s,h){return s[5]===void 0?tt:s[5]==="CoffeeBeansNotFound"?et:xe}let d=i(o),c=d(o);const _=[ot,at,nt],g=[];function f(s,h){return s[5]===void 0?0:s[5]==="CoffeeBeansNotFound"?1:2}return t=f(o),a=g[t]=_[t](o),{c(){c.c(),e=K(),n=F(),a.c(),l=K()},l(s){const h=ke("svelte-1xzg8rg",document.head);c.l(h),e=K(),h.forEach(k),n=z(s),a.l(s),l=K()},m(s,h){c.m(document.head,null),N(document.head,e),D(s,n,h),g[t].m(s,h),D(s,l,h),r=!0},p(s,[h]){d!==(d=i(s))&&(c.d(1),c=d(s),c&&(c.c(),c.m(e.parentNode,e)));let u=t;t=f(s),t===u?g[t].p(s,h):(se(),M(g[u],1,1,()=>{g[u]=null}),oe(),a=g[t],a?a.p(s,h):(a=g[t]=_[t](s),a.c()),B(a,1),a.m(l.parentNode,l))},i(s){r||(B(a),r=!0)},o(s){M(a),r=!1},d(s){s&&(k(n),k(l)),c.d(s),k(e),g[t].d(s)}}}function pt(o,e,n){let{data:t}=e,a,l,r,i,d,c;async function _(){if(i===void 0||i==="CoffeeBeansNotFound")return;const m=i,p=await ue(m.id,!0);await de(m.id,!0,m),J(j.home);const v=p===1?"recipe":"recipes",L=p>0?` and ${p} ${v}`:"";Ee(`Coffee beans "${m.name}"`+L+" deleted.",async()=>{await Ie(m),await Pe(m.id),J(j.coffeeBeansItem(m.name)).then(()=>J(j.home))},async()=>{await ue(m.id),await de(m.id),J(j.coffeeBeansItem(m.name)).then(()=>J(j.home))})}async function g(){const m=await Ne(t.coffeeBeansName);if(m===void 0){n(5,i="CoffeeBeansNotFound");return}n(5,i=m);const p=await Te(i.id);n(0,d=p.sort(ce))}const f=()=>r("open");function s(m){r=m,n(4,r)}function h(m){a=m,n(2,a)}const u=()=>{a("open"),l("closed")};function w(m){l=m,n(3,l)}function V(m){c=m,n(1,c)}return o.$$set=m=>{"data"in m&&n(7,t=m.data)},o.$$.update=()=>{o.$$.dirty&3&&d&&n(0,d=d.sort((c==null?void 0:c.sortOrderFunc)??ce)),o.$$.dirty&128&&window.indexedDB&&g()},[d,c,a,l,r,i,_,t,f,s,h,u,w,V]}class Et extends he{constructor(e){super(),$e(this,e,pt,mt,_e,{data:7})}}export{Et as component,Tt as universal};
