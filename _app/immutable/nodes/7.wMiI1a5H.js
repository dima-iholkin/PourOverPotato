import{s as st,b as z,a as K,o as at,n as Oe}from"../chunks/scheduler.ZvbRK0ck.js";import{S as rt,i as lt,A as J,s as E,m as S,e as T,n as it,d as c,f as C,o as B,c as I,a as F,w as ot,x as $,g as A,p as R,h as _,B as ft,C as ut,l as V,k,r as D,t as Q,b as X}from"../chunks/index.D4zfOep-.js";import{P as ct,c as pt,f as dt}from"../chunks/PageHeadline.zjx-BUZ1.js";import{n as Ce}from"../chunks/naming.kUvCv0xb.js";import{r as mt}from"../chunks/routes.1eZgGMMa.js";import{L as je,T as Ae}from"../chunks/Textarea.SfFHuTCd.js";import{C as _t,N as Je,T as gt,f as Qe,p as vt}from"../chunks/TimestampPicker.bo6Dq1UF.js";async function $t({url:s}){return{coffeeBeansName:s.searchParams.get("coffee_beans_name")}}const At=Object.freeze(Object.defineProperty({__proto__:null,load:$t},Symbol.toStringTag,{value:"Module"}));function ne(s,r,t){const l=He(s,r);localStorage.setItem(l,t)}function se(s,r,t){const l=He(s,r),n=localStorage.getItem(l);if(n===null)return null;if(t==="number"){const o=Number.parseFloat(n);return Number.isNaN(o)?null:o}return n}function ae(s,r){const t=He(s,r);localStorage.removeItem(t)}function He(s,r){return`form_${s}_${r}`}function bt(s){let r;return{c(){r=Q("Add recipe")},l(t){r=X(t,"Add recipe")},m(t,l){A(t,r,l)},d(t){t&&c(r)}}}function ht(s){let r=Ce.recipe.recipeTarget+"",t,l;return{c(){t=Q(r),l=Q(":")},l(n){t=X(n,r),l=X(n,":")},m(n,o){A(n,t,o),A(n,l,o)},p:Oe,d(n){n&&(c(t),c(l))}}}function Et(s){let r=Ce.recipe.recipeResult+"",t,l;return{c(){t=Q(r),l=Q(":")},l(n){t=X(n,r),l=X(n,":")},m(n,o){A(n,t,o),A(n,l,o)},p:Oe,d(n){n&&(c(t),c(l))}}}function Tt(s){let r=Ce.recipe.recipeThoughts+"",t,l;return{c(){t=Q(r),l=Q(":")},l(n){t=X(n,r),l=X(n,":")},m(n,o){A(n,t,o),A(n,l,o)},p:Oe,d(n){n&&(c(t),c(l))}}}function Ct(s){let r,t,l,n,o,p,d,m,f,g,b,h,w,oe,fe,M,j,ue,U,P,a,W,Y,N,Ie,we,Z,O,Pe,Se,x,L,Be,ee,H,Fe,Re,te,y,Ve,ke,G,ye="Save",he,De,Ge;t=new ct({props:{$$slots:{default:[bt]},$$scope:{ctx:s}}});function Xe(e){s[11](e)}let Me={allCoffeeBeans:s[7],validationFailed:s[6]};s[0]!==void 0&&(Me.selectedCoffeeBeans=s[0]),p=new _t({props:Me}),z.push(()=>J(p,"selectedCoffeeBeans",Xe)),g=new je({props:{_for:re,$$slots:{default:[ht]},$$scope:{ctx:s}}});function Ye(e){s[12](e)}let Ue={id:re,name:re,placeholder:It};s[1]!==void 0&&(Ue.value=s[1]),w=new Ae({props:Ue}),z.push(()=>J(w,"value",Ye)),j=new je({props:{_for:le,$$slots:{default:[Et]},$$scope:{ctx:s}}});function Ze(e){s[13](e)}let Le={id:le,name:le,placeholder:wt};s[2]!==void 0&&(Le.value=s[2]),P=new Ae({props:Le}),z.push(()=>J(P,"value",Ze));function xe(e){s[14](e)}let We={labelText:Ce.recipe.outWeight+" (g):",min:0,nameAttr:Ee,step:5};s[4]!==void 0&&(We.value=s[4]),N=new Je({props:We}),z.push(()=>J(N,"value",xe));function et(e){s[15](e)}let qe={labelText:"Rating:",max:5,min:0,nameAttr:Te,step:.5};s[5]!==void 0&&(qe.value=s[5]),O=new Je({props:qe}),z.push(()=>J(O,"value",et)),L=new je({props:{_for:ie,$$slots:{default:[Tt]},$$scope:{ctx:s}}});function tt(e){s[16](e)}let ze={id:ie,name:ie,placeholder:Pt,textLinesCount:4};s[3]!==void 0&&(ze.value=s[3]),H=new Ae({props:ze}),z.push(()=>J(H,"value",tt));function nt(e){s[17](e)}let Ke={};return s[8]!==void 0&&(Ke.value=s[8]),y=new gt({props:Ke}),z.push(()=>J(y,"value",nt)),{c(){r=E(),S(t.$$.fragment),l=E(),n=T("form"),o=T("div"),S(p.$$.fragment),m=E(),f=T("div"),S(g.$$.fragment),b=E(),h=T("div"),S(w.$$.fragment),fe=E(),M=T("div"),S(j.$$.fragment),ue=E(),U=T("div"),S(P.$$.fragment),W=E(),Y=T("div"),S(N.$$.fragment),we=E(),Z=T("div"),S(O.$$.fragment),Se=E(),x=T("div"),S(L.$$.fragment),Be=E(),ee=T("div"),S(H.$$.fragment),Re=E(),te=T("div"),S(y.$$.fragment),ke=E(),G=T("button"),G.textContent=ye,this.h()},l(e){it("svelte-kogo9l",document.head).forEach(c),r=C(e),B(t.$$.fragment,e),l=C(e),n=I(e,"FORM",{id:!0});var i=F(n);o=I(i,"DIV",{class:!0});var q=F(o);B(p.$$.fragment,q),q.forEach(c),m=C(i),f=I(i,"DIV",{class:!0});var ce=F(f);B(g.$$.fragment,ce),ce.forEach(c),b=C(i),h=I(i,"DIV",{class:!0});var pe=F(h);B(w.$$.fragment,pe),pe.forEach(c),fe=C(i),M=I(i,"DIV",{class:!0});var de=F(M);B(j.$$.fragment,de),de.forEach(c),ue=C(i),U=I(i,"DIV",{class:!0});var me=F(U);B(P.$$.fragment,me),me.forEach(c),W=C(i),Y=I(i,"DIV",{class:!0});var _e=F(Y);B(N.$$.fragment,_e),_e.forEach(c),we=C(i),Z=I(i,"DIV",{class:!0});var ge=F(Z);B(O.$$.fragment,ge),ge.forEach(c),Se=C(i),x=I(i,"DIV",{class:!0});var ve=F(x);B(L.$$.fragment,ve),ve.forEach(c),Be=C(i),ee=I(i,"DIV",{class:!0});var $e=F(ee);B(H.$$.fragment,$e),$e.forEach(c),Re=C(i),te=I(i,"DIV",{class:!0});var be=F(te);B(y.$$.fragment,be),be.forEach(c),ke=C(i),G=I(i,"BUTTON",{class:!0,form:!0,type:!0,"data-svelte-h":!0}),ot(G)!=="svelte-3ol3od"&&(G.textContent=ye),i.forEach(c),this.h()},h(){document.title="Add recipe - PourOverPotato app",$(o,"class","svelte-1rdjc50"),$(f,"class","svelte-1rdjc50"),$(h,"class","svelte-1rdjc50"),$(M,"class","svelte-1rdjc50"),$(U,"class","svelte-1rdjc50"),$(Y,"class","svelte-1rdjc50"),$(Z,"class","svelte-1rdjc50"),$(x,"class","svelte-1rdjc50"),$(ee,"class","svelte-1rdjc50"),$(te,"class","svelte-1rdjc50"),$(G,"class","my-button svelte-1rdjc50"),$(G,"form","add-recipe"),$(G,"type","submit"),$(n,"id","add-recipe")},m(e,u){A(e,r,u),R(t,e,u),A(e,l,u),A(e,n,u),_(n,o),R(p,o,null),_(n,m),_(n,f),R(g,f,null),_(n,b),_(n,h),R(w,h,null),_(n,fe),_(n,M),R(j,M,null),_(n,ue),_(n,U),R(P,U,null),_(n,W),_(n,Y),R(N,Y,null),_(n,we),_(n,Z),R(O,Z,null),_(n,Se),_(n,x),R(L,x,null),_(n,Be),_(n,ee),R(H,ee,null),_(n,Re),_(n,te),R(y,te,null),_(n,ke),_(n,G),he=!0,De||(Ge=ft(n,"submit",ut(s[9])),De=!0)},p(e,[u]){const i={};u&262144&&(i.$$scope={dirty:u,ctx:e}),t.$set(i);const q={};u&128&&(q.allCoffeeBeans=e[7]),u&64&&(q.validationFailed=e[6]),!d&&u&1&&(d=!0,q.selectedCoffeeBeans=e[0],K(()=>d=!1)),p.$set(q);const ce={};u&262144&&(ce.$$scope={dirty:u,ctx:e}),g.$set(ce);const pe={};!oe&&u&2&&(oe=!0,pe.value=e[1],K(()=>oe=!1)),w.$set(pe);const de={};u&262144&&(de.$$scope={dirty:u,ctx:e}),j.$set(de);const me={};!a&&u&4&&(a=!0,me.value=e[2],K(()=>a=!1)),P.$set(me);const _e={};!Ie&&u&16&&(Ie=!0,_e.value=e[4],K(()=>Ie=!1)),N.$set(_e);const ge={};!Pe&&u&32&&(Pe=!0,ge.value=e[5],K(()=>Pe=!1)),O.$set(ge);const ve={};u&262144&&(ve.$$scope={dirty:u,ctx:e}),L.$set(ve);const $e={};!Fe&&u&8&&(Fe=!0,$e.value=e[3],K(()=>Fe=!1)),H.$set($e);const be={};!Ve&&u&256&&(Ve=!0,be.value=e[8],K(()=>Ve=!1)),y.$set(be)},i(e){he||(V(t.$$.fragment,e),V(p.$$.fragment,e),V(g.$$.fragment,e),V(w.$$.fragment,e),V(j.$$.fragment,e),V(P.$$.fragment,e),V(N.$$.fragment,e),V(O.$$.fragment,e),V(L.$$.fragment,e),V(H.$$.fragment,e),V(y.$$.fragment,e),he=!0)},o(e){k(t.$$.fragment,e),k(p.$$.fragment,e),k(g.$$.fragment,e),k(w.$$.fragment,e),k(j.$$.fragment,e),k(P.$$.fragment,e),k(N.$$.fragment,e),k(O.$$.fragment,e),k(L.$$.fragment,e),k(H.$$.fragment,e),k(y.$$.fragment,e),he=!1},d(e){e&&(c(r),c(l),c(n)),D(t,e),D(p),D(g),D(w),D(j),D(P),D(N),D(O),D(L),D(H),D(y),De=!1,Ge()}}}const re="recipe-target",It="Example: 17 clicks, 15g + 260g. 5m boil.",le="recipe-result",wt="Example: 2m15s + 15s drip. 250g out.",ie="recipe-thoughts",Pt="Example: Perfect balance. Perfect concentration. Flowery notes.",Ee="out-weight",Te="rating",v="addRecipe",Ne="coffee-beans";function St(s,r,t){let l=!1,n=!1,o,p,d,m,f,g,b,h=Qe(new Date);at(()=>{d===""&&t(1,d=void 0),m===""&&t(2,m=void 0),f===""&&t(3,f=void 0),pt().then(a=>{t(7,o=a)}).then(()=>{if(p===void 0){const a=se(v,Ne,"number");a===null||t(0,p=o==null?void 0:o.find(W=>W.id===a))}if(d===void 0||d===""){const a=se(v,re,"string");a===null||t(1,d=a)}if(m===void 0||m===""){const a=se(v,le,"string");a===null||t(2,m=a)}if(f===void 0||f===""){const a=se(v,ie,"string");a===null||t(3,f=a)}if(g===void 0||g===0){const a=se(v,Ee,"number");a===null||a===0||t(4,g=a)}if(b===void 0||b===0){const a=se(v,Te,"number");a===null||a===0||t(5,b=a)}t(10,n=!0)}),t(8,h=Qe(new Date))});async function w(){if(p===void 0){t(6,l=!0);return}d==null&&t(1,d=""),t(1,d=d.trim()),m==null&&t(2,m=""),t(2,m=m.trim()),f==null&&t(3,f=""),t(3,f=f.trim());const a=vt(h);if(p===void 0)throw new Error("Please select the coffee beans.");const W={coffeeBeansId:p.id,recipeTarget:d,recipeResult:m,recipeThoughts:f,outWeight:g,rating:b,timestamp:a};await dt(W),ae(v,Ne),ae(v,re),ae(v,le),ae(v,ie),ae(v,Ee),ae(v,Te),alert("We saved the recipe successfully."),window.location.replace(mt.coffeeBeansItem(p.name))}function oe(a){p=a,t(0,p)}function fe(a){d=a,t(1,d)}function M(a){m=a,t(2,m)}function j(a){g=a,t(4,g)}function ue(a){b=a,t(5,b)}function U(a){f=a,t(3,f)}function P(a){h=a,t(8,h)}return s.$$.update=()=>{s.$$.dirty&1&&p!==void 0&&ne(v,Ne,p.id),s.$$.dirty&2&&d!=null&&ne(v,re,d),s.$$.dirty&4&&m!=null&&ne(v,le,m),s.$$.dirty&8&&f!=null&&ne(v,ie,f),s.$$.dirty&1040&&g!==void 0&&n&&ne(v,Ee,g),s.$$.dirty&1056&&b!==void 0&&n&&ne(v,Te,b)},[p,d,m,f,g,b,l,o,h,w,n,oe,fe,M,j,ue,U,P]}class Nt extends rt{constructor(r){super(),lt(this,r,St,Ct,st,{})}}export{Nt as component,At as universal};
