import{s as He,o as qe,b as U,a as A,n as x}from"../chunks/scheduler.Cw1-ZcKD.js";import{S as Le,i as je,s as E,k as T,w as re,l as ze,d as $,f as V,m as k,g as P,n as B,A as Me,o as h,p as Ne,q as g,r as C,u as Fe,t as be,b as ve,v as W,e as ee,c as te,a as $e,z as L,y as Se,h as F,B as Je}from"../chunks/index.DHsbL8_X.js";import{b as Ke,g as G}from"../chunks/entry.Bs1kKzkN.js";import{g as Qe,b as Xe}from"../chunks/manageCoffeeBeans.CzXUSSc2.js";import{P as Ye,b as Ze,s as xe,e as et,h as tt,u as nt}from"../chunks/PageHeadline.DK2gBKFE.js";import{n as ie}from"../chunks/naming.DmthAWfq.js";import{r as H}from"../chunks/routes.9lc0K48O.js";import{C as at,p as ge,N as Re,F as ot,T as it}from"../chunks/NumberInput.ceY88DtB.js";import{g as se,h as le,i as rt,a as st,p as lt}from"../chunks/dateHelpers.DtGJLfnR.js";import{L as ft}from"../chunks/Loading.BjzKhRf5.js";import{F as ut,D as pt,a as ct}from"../chunks/FlexRow.DawjbjYM.js";import{T as he}from"../chunks/Textarea.DSVAmZwN.js";import{D as mt}from"../chunks/DeleteConfirmationModal.CVvPVk3x.js";function dt({params:a}){const e=Number.parseFloat(a.id);if(Number.isInteger(e)===!1)throw new Error("Non-integer route params are not allowed for this page. The matcher should have filtered outnon-integer values. Something is wrong with the code.");return{recipeId:e}}const yt=Object.freeze(Object.defineProperty({__proto__:null,load:dt},Symbol.toStringTag,{value:"Module"}));function _t(a){let e;return{c(){e=be("Edit recipe")},l(t){e=ve(t,"Edit recipe")},m(t,i){P(t,e,i)},d(t){t&&$(e)}}}function De(a){let e,t,i,f;function r(s){a[19](s)}let n={$$slots:{modal:[$t],button:[gt]},$$scope:{ctx:a}};return a[10]!==void 0&&(n.setDropdownState=a[10]),t=new pt({props:n}),U.push(()=>W(t,"setDropdownState",r)),{c(){e=ee("div"),T(t.$$.fragment),this.h()},l(s){e=te(s,"DIV",{class:!0});var c=$e(e);k(t.$$.fragment,c),c.forEach($),this.h()},h(){L(e,"class","menu-container svelte-4po0c5")},m(s,c){P(s,e,c),B(t,e,null),f=!0},p(s,c){const _={};c&536872448&&(_.$$scope={dirty:c,ctx:s}),!i&&c&1024&&(i=!0,_.setDropdownState=s[10],A(()=>i=!1)),t.$set(_)},i(s){f||(g(t.$$.fragment,s),f=!0)},o(s){h(t.$$.fragment,s),f=!1},d(s){s&&$(e),C(t)}}}function gt(a){let e,t;return e=new ct({props:{slot:"button",buttonText:"Delete"}}),e.$on("click",a[18]),{c(){T(e.$$.fragment)},l(i){k(e.$$.fragment,i)},m(i,f){B(e,i,f),t=!0},p:x,i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){C(e,i)}}}function ht(a){let e;return{c(){e=be("Please confirm you want to delete this recipe")},l(t){e=ve(t,"Please confirm you want to delete this recipe")},m(t,i){P(t,e,i)},d(t){t&&$(e)}}}function $t(a){let e,t,i;function f(n){a[17](n)}let r={slot:"modal",onDeleteClick:a[14],$$slots:{default:[ht]},$$scope:{ctx:a}};return a[9]!==void 0&&(r.setModalState=a[9]),e=new mt({props:r}),U.push(()=>W(e,"setModalState",f)),{c(){T(e.$$.fragment)},l(n){k(e.$$.fragment,n)},m(n,s){B(e,n,s),i=!0},p(n,s){const c={};s&536870912&&(c.$$scope={dirty:s,ctx:n}),!t&&s&512&&(t=!0,c.setModalState=n[9],A(()=>t=!1)),e.$set(c)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){h(e.$$.fragment,n),i=!1},d(n){C(e,n)}}}function bt(a){let e,t,i,f;e=new Ye({props:{$$slots:{default:[_t]},$$scope:{ctx:a}}});let r=a[0]instanceof se&&De(a);return{c(){T(e.$$.fragment),t=E(),r&&r.c(),i=re()},l(n){k(e.$$.fragment,n),t=V(n),r&&r.l(n),i=re()},m(n,s){B(e,n,s),P(n,t,s),r&&r.m(n,s),P(n,i,s),f=!0},p(n,s){const c={};s&536870912&&(c.$$scope={dirty:s,ctx:n}),e.$set(c),n[0]instanceof se?r?(r.p(n,s),s&1&&g(r,1)):(r=De(n),r.c(),g(r,1),r.m(i.parentNode,i)):r&&(Fe(),h(r,1,1,()=>{r=null}),Ne())},i(n){f||(g(e.$$.fragment,n),g(r),f=!0)},o(n){h(e.$$.fragment,n),h(r),f=!1},d(n){n&&($(t),$(i)),C(e,n),r&&r.d(n)}}}function vt(a){let e,t="404",i,f,r="Not Found";return{c(){e=ee("p"),e.textContent=t,i=E(),f=ee("p"),f.textContent=r},l(n){e=te(n,"P",{"data-svelte-h":!0}),Se(e)!=="svelte-swq3p4"&&(e.textContent=t),i=V(n),f=te(n,"P",{"data-svelte-h":!0}),Se(f)!=="svelte-14ywr5"&&(f.textContent=r)},m(n,s){P(n,e,s),P(n,i,s),P(n,f,s)},p:x,i:x,o:x,d(n){n&&($(e),$(i),$(f))}}}function wt(a){let e,t,i,f,r,n,s,c,_,b,d,v,p,m,S,I,w,j,z,M,J,K,N,Q,X,R,Y,q,O,Z,ne;function l(o){a[20](o)}let D={allCoffeeBeans:a[11],initialCoffeeBeansId:a[0].coffeeBeansId,showAddButton:!1};a[1]!==void 0&&(D.selectedCoffeeBeansId=a[1]),t=new at({props:D}),U.push(()=>W(t,"selectedCoffeeBeansId",l));function ae(o){a[21](o)}let oe={id:Ee,initialValue:a[0].recipeTarget,label:ie.recipe.recipeTarget+":",name:Ee,placeholder:ge.recipeTarget};a[2]!==void 0&&(oe.value=a[2]),r=new he({props:oe}),U.push(()=>W(r,"value",ae));function Ue(o){a[22](o)}let we={id:Ve,initialValue:a[0].recipeResult,label:ie.recipe.recipeResult+":",name:Ve,placeholder:ge.recipeResult};a[3]!==void 0&&(we.value=a[3]),c=new he({props:we}),U.push(()=>W(c,"value",Ue));function Ae(o){a[23](o)}let Ie={initialValue:a[0].outWeight,labelText:ie.recipe.outWeight+" (g):",min:0,nameAttr:kt,step:5};a[5]!==void 0&&(Ie.value=a[5]),d=new Re({props:Ie}),U.push(()=>W(d,"value",Ae));function We(o){a[24](o)}let Te={initialValue:a[0].rating,labelText:"Rating:",max:5,min:0,nameAttr:Bt,step:.5};a[6]!==void 0&&(Te.value=a[6]),m=new Re({props:Te}),U.push(()=>W(m,"value",We));function Oe(o){a[25](o)}let ke={initialValue:a[0].favorite};a[7]!==void 0&&(ke.value=a[7]),w=new ot({props:ke}),U.push(()=>W(w,"value",Oe));function ye(o){a[26](o)}let Be={id:Pe,initialValue:a[0].recipeThoughts,label:ie.recipe.recipeThoughts+":",name:Pe,placeholder:ge.recipeThoughts};a[4]!==void 0&&(Be.value=a[4]),M=new he({props:Be}),U.push(()=>W(M,"value",ye));function Ge(o){a[27](o)}let Ce={initialValue:le(a[0].timestamp)};return a[8]!==void 0&&(Ce.value=a[8]),N=new it({props:Ce}),U.push(()=>W(N,"value",Ge)),{c(){e=ee("form"),T(t.$$.fragment),f=E(),T(r.$$.fragment),s=E(),T(c.$$.fragment),b=E(),T(d.$$.fragment),p=E(),T(m.$$.fragment),I=E(),T(w.$$.fragment),z=E(),T(M.$$.fragment),K=E(),T(N.$$.fragment),X=E(),R=ee("button"),Y=be("Save changes"),this.h()},l(o){e=te(o,"FORM",{id:!0,class:!0});var u=$e(e);k(t.$$.fragment,u),f=V(u),k(r.$$.fragment,u),s=V(u),k(c.$$.fragment,u),b=V(u),k(d.$$.fragment,u),p=V(u),k(m.$$.fragment,u),I=V(u),k(w.$$.fragment,u),z=V(u),k(M.$$.fragment,u),K=V(u),k(N.$$.fragment,u),X=V(u),R=te(u,"BUTTON",{class:!0,form:!0,type:!0});var y=$e(R);Y=ve(y,"Save changes"),y.forEach($),u.forEach($),this.h()},h(){L(R,"class","my-button svelte-4po0c5"),R.disabled=q=a[12]===!1,L(R,"form","edit-recipe"),L(R,"type","submit"),L(e,"id","edit-recipe"),L(e,"class","svelte-4po0c5")},m(o,u){P(o,e,u),B(t,e,null),F(e,f),B(r,e,null),F(e,s),B(c,e,null),F(e,b),B(d,e,null),F(e,p),B(m,e,null),F(e,I),B(w,e,null),F(e,z),B(M,e,null),F(e,K),B(N,e,null),F(e,X),F(e,R),F(R,Y),O=!0,Z||(ne=Me(e,"submit",Je(a[15])),Z=!0)},p(o,u){const y={};u&2048&&(y.allCoffeeBeans=o[11]),u&1&&(y.initialCoffeeBeansId=o[0].coffeeBeansId),!i&&u&2&&(i=!0,y.selectedCoffeeBeansId=o[1],A(()=>i=!1)),t.$set(y);const fe={};u&1&&(fe.initialValue=o[0].recipeTarget),!n&&u&4&&(n=!0,fe.value=o[2],A(()=>n=!1)),r.$set(fe);const ue={};u&1&&(ue.initialValue=o[0].recipeResult),!_&&u&8&&(_=!0,ue.value=o[3],A(()=>_=!1)),c.$set(ue);const pe={};u&1&&(pe.initialValue=o[0].outWeight),!v&&u&32&&(v=!0,pe.value=o[5],A(()=>v=!1)),d.$set(pe);const ce={};u&1&&(ce.initialValue=o[0].rating),!S&&u&64&&(S=!0,ce.value=o[6],A(()=>S=!1)),m.$set(ce);const me={};u&1&&(me.initialValue=o[0].favorite),!j&&u&128&&(j=!0,me.value=o[7],A(()=>j=!1)),w.$set(me);const de={};u&1&&(de.initialValue=o[0].recipeThoughts),!J&&u&16&&(J=!0,de.value=o[4],A(()=>J=!1)),M.$set(de);const _e={};u&1&&(_e.initialValue=le(o[0].timestamp)),!Q&&u&256&&(Q=!0,_e.value=o[8],A(()=>Q=!1)),N.$set(_e),(!O||u&4096&&q!==(q=o[12]===!1))&&(R.disabled=q)},i(o){O||(g(t.$$.fragment,o),g(r.$$.fragment,o),g(c.$$.fragment,o),g(d.$$.fragment,o),g(m.$$.fragment,o),g(w.$$.fragment,o),g(M.$$.fragment,o),g(N.$$.fragment,o),O=!0)},o(o){h(t.$$.fragment,o),h(r.$$.fragment,o),h(c.$$.fragment,o),h(d.$$.fragment,o),h(m.$$.fragment,o),h(w.$$.fragment,o),h(M.$$.fragment,o),h(N.$$.fragment,o),O=!1},d(o){o&&$(e),C(t),C(r),C(c),C(d),C(m),C(w),C(M),C(N),Z=!1,ne()}}}function It(a){let e,t;return e=new ft({}),{c(){T(e.$$.fragment)},l(i){k(e.$$.fragment,i)},m(i,f){B(e,i,f),t=!0},p:x,i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){C(e,i)}}}function Tt(a){let e,t,i,f,r,n,s,c,_;t=new ut({props:{$$slots:{default:[bt]},$$scope:{ctx:a}}});const b=[It,wt,vt],d=[];function v(p,m){return p[0]===null?0:p[0]instanceof se?1:2}return f=v(a),r=d[f]=b[f](a),{c(){e=E(),T(t.$$.fragment),i=E(),r.c(),n=re(),this.h()},l(p){ze("svelte-cc1fw0",document.head).forEach($),e=V(p),k(t.$$.fragment,p),i=V(p),r.l(p),n=re(),this.h()},h(){document.title="Edit recipe - PourOverPotato app"},m(p,m){P(p,e,m),B(t,p,m),P(p,i,m),d[f].m(p,m),P(p,n,m),s=!0,c||(_=Me(window,"beforeunload",a[13]),c=!0)},p(p,[m]){const S={};m&536872449&&(S.$$scope={dirty:m,ctx:p}),t.$set(S);let I=f;f=v(p),f===I?d[f].p(p,m):(Fe(),h(d[I],1,1,()=>{d[I]=null}),Ne(),r=d[f],r?r.p(p,m):(r=d[f]=b[f](p),r.c()),g(r,1),r.m(n.parentNode,n))},i(p){s||(g(t.$$.fragment,p),g(r),s=!0)},o(p){h(t.$$.fragment,p),h(r),s=!1},d(p){p&&($(e),$(i),$(n)),C(t,p),d[f].d(p),c=!1,_()}}}const Ee="recipe-target",Ve="recipe-result",Pe="recipe-thoughts",kt="out-weight",Bt="rating";function Ct(a,e,t){let{data:i}=e,f,r,n=null,s,c=!1,_,b,d,v,p,m,S,I,w=!1;Ke(l=>{l.willUnload===!1&&c===!1&&w&&confirm("Do you want to navigate away and lose unsaved changes?")===!1&&l.cancel()}),qe(()=>{Ze(i.recipeId).then(l=>{t(0,n=l),l!==void 0&&Qe().then(D=>{t(11,s=D),t(1,_=l.coffeeBeansId),t(2,b=l.recipeTarget),t(3,d=l.recipeResult),t(4,v=l.recipeThoughts),t(5,p=l.outWeight),t(6,m=l.rating),t(7,S=l.favorite),t(8,I=le(l.timestamp))})})});function j(l){if(c===!1&&w)return l.preventDefault(),l.returnValue="","Are you sure you want to navigate away?"}async function z(){if(n==null)return;const l=n;await xe(l.id);const D=await Xe(l.coffeeBeansId);rt("Recipe deleted.",async()=>{await nt(l.id),G(H.home).then(()=>D?G(H.coffeeBeansItem(D.name)):G(H.home))},async()=>{await tt(l.id)}),c=!0,D?G(H.coffeeBeansItem(D.name)):G(H.home)}async function M(){t(2,b=b.trim()),t(3,d=d.trim()),t(4,v=v.trim());const l=lt(I);if(_===void 0)throw new Error("Please select the coffee beans.");if(n==null)throw new Error("Recipe was undefined or null somehow.");const D=new se({id:n.id,coffeeBeansId:_,recipeTarget:b,recipeResult:d,recipeThoughts:v,outWeight:p,rating:m,favorite:S,timestamp:l});await et(D),st("Recipe modified."),c=!0;const ae=s==null?void 0:s.find(oe=>oe.id===_);if(ae===void 0){G(H.home);return}G(H.coffeeBeansItem(ae.name))}function J(l){f=l,t(9,f)}const K=()=>{r("closed"),f("open")};function N(l){r=l,t(10,r)}function Q(l){_=l,t(1,_)}function X(l){b=l,t(2,b)}function R(l){d=l,t(3,d)}function Y(l){p=l,t(5,p)}function q(l){m=l,t(6,m)}function O(l){S=l,t(7,S)}function Z(l){v=l,t(4,v)}function ne(l){I=l,t(8,I)}return a.$$set=l=>{"data"in l&&t(16,i=l.data)},a.$$.update=()=>{a.$$.dirty&511&&(n&&_===n.coffeeBeansId&&b===n.recipeTarget&&d===n.recipeResult&&v===n.recipeThoughts&&p===n.outWeight&&m===n.rating&&S===n.favorite&&I===le(n.timestamp)?t(12,w=!1):t(12,w=!0))},[n,_,b,d,v,p,m,S,I,f,r,s,w,j,z,M,i,J,K,N,Q,X,R,Y,q,O,Z,ne]}class Gt extends Le{constructor(e){super(),je(this,e,Ct,Tt,He,{data:16})}}export{Gt as component,yt as universal};
