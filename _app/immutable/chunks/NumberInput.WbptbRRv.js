import{s as ee,b as X,a as Z,f as x,r as ie,t as be,j as ge,n as ve}from"./scheduler.vcOl-ZmV.js";import{S as te,i as ne,v as $,k as z,m as R,n as U,q as O,o as V,r as K,e as B,s as P,t as G,c as E,a as I,f as j,b as J,d as k,z as Q,y as _,g as N,h as C,C as L,A,B as pe,j as ae,H as fe,I as ue,u as ke,p as Ce,J as we,w as Y}from"./index.Cssh76hr.js";import{e as de,u as Se,d as Me}from"./each.Y9tOFi6h.js";import{y as Te,t as Be,i as Ee}from"./indexedDB.DSM7SfQo.js";import{L as le,T as ye}from"./Textarea.PgoFlOOt.js";import{M as Ne}from"./Modal.YKr32guJ.js";const et={recipeTarget:"Example: 17 clicks, 15g + 260g filtered water.",recipeResult:"Example: 2m15s draw down + 15s drip.",recipeThoughts:"Example: Perfect balance. Perfect concentration. Flowery notes."};function Ie(a){let t;return{c(){t=G("Coffee beans name:")},l(e){t=J(e,"Coffee beans name:")},m(e,l){N(e,t,l)},d(e){e&&k(t)}}}function Ae(a){let t,e,l,i,s,o,u,n,f,c,d,p,h,m,b,M,w,y="Save",v,g,S;l=new le({props:{for_:"name",valid:!a[0],$$slots:{default:[Ie]},$$scope:{ctx:a}}});function D(r){a[18](r)}function q(r){a[19](r)}let H={id:"description",label:"Description:",name:"description",placeholder:Pe};return a[3]!==void 0&&(H.this_=a[3]),a[6]!==void 0&&(H.value=a[6]),h=new ye({props:H}),X.push(()=>$(h,"this_",D)),X.push(()=>$(h,"value",q)),h.$on("keydown",a[8]),{c(){t=B("form"),e=B("div"),z(l.$$.fragment),i=P(),s=B("input"),n=P(),f=B("p"),c=G(a[7]),d=P(),p=B("div"),z(h.$$.fragment),M=P(),w=B("button"),w.textContent=y,this.h()},l(r){t=E(r,"FORM",{class:!0});var T=I(t);e=E(T,"DIV",{class:!0});var F=I(e);R(l.$$.fragment,F),i=j(F),s=E(F,"INPUT",{id:!0,autocomplete:!0,class:!0,name:!0,placeholder:!0,type:!0}),n=j(F),f=E(F,"P",{class:!0});var W=I(f);c=J(W,a[7]),W.forEach(k),F.forEach(k),d=j(T),p=E(T,"DIV",{class:!0});var re=I(p);R(h.$$.fragment,re),re.forEach(k),M=j(T),w=E(T,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Q(w)!=="svelte-j4uhei"&&(w.textContent=y),T.forEach(k),this.h()},h(){_(s,"id","name"),_(s,"autocomplete","off"),_(s,"class",o=x(a[0]?"input-name-validation-failed":"input-name")+" svelte-tjgl6z"),_(s,"name","name"),_(s,"placeholder",u=a[0]?"":"Example: Rwanda Mabanza"),_(s,"type","text"),_(f,"class","mt-2 text-sm text-red-600 dark:text-red-500"),_(e,"class","mb-5"),_(p,"class","my-div mb-5 svelte-tjgl6z"),_(w,"class","button-submit svelte-tjgl6z"),_(w,"type","submit"),_(t,"class","mx-auto")},m(r,T){N(r,t,T),C(t,e),U(l,e,null),C(e,i),C(e,s),a[16](s),L(s,a[5]),C(e,n),C(e,f),C(f,c),C(t,d),C(t,p),U(h,p,null),C(t,M),C(t,w),a[20](t),v=!0,g||(S=[A(s,"input",a[17]),A(s,"input",a[10]),A(s,"keydown",a[9]),A(t,"submit",pe(a[11]))],g=!0)},p(r,T){const F={};T&1&&(F.valid=!r[0]),T&4194304&&(F.$$scope={dirty:T,ctx:r}),l.$set(F),(!v||T&1&&o!==(o=x(r[0]?"input-name-validation-failed":"input-name")+" svelte-tjgl6z"))&&_(s,"class",o),(!v||T&1&&u!==(u=r[0]?"":"Example: Rwanda Mabanza"))&&_(s,"placeholder",u),T&32&&s.value!==r[5]&&L(s,r[5]),(!v||T&128)&&ae(c,r[7]);const W={};!m&&T&8&&(m=!0,W.this_=r[3],Z(()=>m=!1)),!b&&T&64&&(b=!0,W.value=r[6],Z(()=>b=!1)),h.$set(W)},i(r){v||(O(l.$$.fragment,r),O(h.$$.fragment,r),v=!0)},o(r){V(l.$$.fragment,r),V(h.$$.fragment,r),v=!1},d(r){r&&k(t),K(l),a[16](null),K(h),a[20](null),g=!1,ie(S)}}}function De(a){let t,e,l;function i(o){a[21](o)}let s={onStateChange:a[12],title:"Add new coffee beans",$$slots:{default:[Ae]},$$scope:{ctx:a}};return a[1]!==void 0&&(s.setState=a[1]),t=new Ne({props:s}),X.push(()=>$(t,"setState",i)),{c(){z(t.$$.fragment)},l(o){R(t.$$.fragment,o)},m(o,u){U(t,o,u),l=!0},p(o,[u]){const n={};u&4194557&&(n.$$scope={dirty:u,ctx:o}),!e&&u&2&&(e=!0,n.setState=o[1],Z(()=>e=!1)),t.$set(n)},i(o){l||(O(t.$$.fragment,o),l=!0)},o(o){V(t.$$.fragment,o),l=!1},d(o){K(t,o)}}}const Pe="Example: Washed process. Notes: plum, cherry.";function je(a,t,e){let{onModalStateChange:l=void 0}=t,{onSavedCoffeeBeans:i=void 0}=t;const s=r=>{o(r)};let o,u,n,f,c="",d="",p=!1,h="";function m(r){r.key==="Enter"&&(r.metaKey||r.ctrlKey)&&(r.preventDefault(),f.requestSubmit())}function b(r){r.key==="Enter"&&(r.preventDefault(),n.focus())}function M(){p&&(e(0,p=!1),e(7,h=""))}async function w(){const r=Te.create({name:c,description:d});if(r==="ValidationFailed_NameMustBeAtLeast3CharsLong"){e(0,p=!0),e(7,h="Name must be at least 3 characters long.");return}const T=await Be(r);if(T==="Failure_NameAlreadyExist"){e(0,p=!0),e(7,h="Coffee beans with this name exist already.");return}Ee(`Coffee beans "${T.name}" created.`),i!==void 0&&i(T),o("closed"),e(5,c=""),e(6,d="")}function y(r){r==="open"&&be().then(()=>{n.focus(),n.blur()}),r==="closed"&&(e(5,c=""),e(6,d=""),e(7,h="")),l!==void 0&&l(r)}function v(r){X[r?"unshift":"push"](()=>{u=r,e(2,u)})}function g(){c=this.value,e(5,c)}function S(r){n=r,e(3,n)}function D(r){d=r,e(6,d)}function q(r){X[r?"unshift":"push"](()=>{f=r,e(4,f)})}function H(r){o=r,e(1,o)}return a.$$set=r=>{"onModalStateChange"in r&&e(13,l=r.onModalStateChange),"onSavedCoffeeBeans"in r&&e(14,i=r.onSavedCoffeeBeans)},a.$$.update=()=>{a.$$.dirty&1&&p===!1&&e(7,h="")},[p,o,u,n,f,c,d,h,m,b,M,w,y,l,i,s,v,g,S,D,q,H]}class Fe extends te{constructor(t){super(),ne(this,t,je,De,ee,{onModalStateChange:13,onSavedCoffeeBeans:14,setModalState:15})}get setModalState(){return this.$$.ctx[15]}}function ce(a,t,e){const l=a.slice();return l[11]=t[e],l}function Oe(a){let t;return{c(){t=G("Coffee beans:")},l(e){t=J(e,"Coffee beans:")},m(e,l){N(e,t,l)},d(e){e&&k(t)}}}function Le(a){let t,e="Loading coffee beans...";return{c(){t=B("option"),t.textContent=e,this.h()},l(l){t=E(l,"OPTION",{"data-svelte-h":!0}),Q(t)!=="svelte-1sf778f"&&(t.textContent=e),this.h()},h(){t.disabled=!0,t.selected=!0,t.__value="",L(t,t.__value)},m(l,i){N(l,t,i)},p:ve,d(l){l&&k(t)}}}function Ve(a){let t,e=[],l=new Map,i,s=a[1]===void 0&&a[4]===!0&&me(),o=de(a[3]);const u=n=>n[11].id;for(let n=0;n<o.length;n+=1){let f=ce(a,o,n),c=u(f);l.set(c,e[n]=_e(c,f))}return{c(){s&&s.c(),t=Y();for(let n=0;n<e.length;n+=1)e[n].c();i=Y()},l(n){s&&s.l(n),t=Y();for(let f=0;f<e.length;f+=1)e[f].l(n);i=Y()},m(n,f){s&&s.m(n,f),N(n,t,f);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(n,f);N(n,i,f)},p(n,f){n[1]===void 0&&n[4]===!0?s||(s=me(),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),f&10&&(o=de(n[3]),e=Se(e,f,u,1,n,o,l,i.parentNode,Me,_e,i,ce))},d(n){n&&(k(t),k(i)),s&&s.d(n);for(let f=0;f<e.length;f+=1)e[f].d(n)}}}function me(a){let t;return{c(){t=B("option"),this.h()},l(e){t=E(e,"OPTION",{}),I(t).forEach(k),this.h()},h(){t.disabled=!0,t.selected=!0,t.__value="",L(t,t.__value)},m(e,l){N(e,t,l)},d(e){e&&k(t)}}}function _e(a,t){let e,l=t[11].name+"",i,s,o;return{key:a,first:null,c(){e=B("option"),i=G(l),this.h()},l(u){e=E(u,"OPTION",{});var n=I(e);i=J(n,l),n.forEach(k),this.h()},h(){e.selected=s=t[1]===t[11].id,e.__value=o=t[11].id,L(e,e.__value),this.first=e},m(u,n){N(u,e,n),C(e,i)},p(u,n){t=u,n&8&&l!==(l=t[11].name+"")&&ae(i,l),n&10&&s!==(s=t[1]===t[11].id)&&(e.selected=s),n&8&&o!==(o=t[11].id)&&(e.__value=o,L(e,e.__value))},d(u){u&&k(e)}}}function he(a){let t,e='<span class="material-icons md-18">add</span>',l,i,s,o,u,n;function f(d){a[10](d)}let c={onSavedCoffeeBeans:a[2]};return a[5]!==void 0&&(c.setModalState=a[5]),i=new Fe({props:c}),X.push(()=>$(i,"setModalState",f)),{c(){t=B("button"),t.innerHTML=e,l=P(),z(i.$$.fragment),this.h()},l(d){t=E(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-h0kid9"&&(t.innerHTML=e),l=j(d),R(i.$$.fragment,d),this.h()},h(){_(t,"class","button-add bg-green-500 text-white rounded-md px-4 py-2 hover:bg-green-700 transition svelte-1xjn7qa")},m(d,p){N(d,t,p),N(d,l,p),U(i,d,p),o=!0,u||(n=A(t,"click",pe(a[9])),u=!0)},p(d,p){const h={};p&4&&(h.onSavedCoffeeBeans=d[2]),!s&&p&32&&(s=!0,h.setModalState=d[5],Z(()=>s=!1)),i.$set(h)},i(d){o||(O(i.$$.fragment,d),o=!0)},o(d){V(i.$$.fragment,d),o=!1},d(d){d&&(k(t),k(l)),K(i,d),u=!1,n()}}}function qe(a){let t,e,l,i,s,o,u,n,f,c,d,p,h,m,b;l=new le({props:{for_:se,valid:!a[0],$$slots:{default:[Oe]},$$scope:{ctx:a}}});function M(g,S){return g[3]!==void 0?Ve:Le}let w=M(a),y=w(a),v=a[4]&&he(a);return{c(){t=B("div"),e=B("div"),z(l.$$.fragment),i=P(),s=B("div"),o=B("select"),y.c(),f=P(),v&&v.c(),c=P(),d=B("p"),p=G(a[6]),this.h()},l(g){t=E(g,"DIV",{});var S=I(t);e=E(S,"DIV",{class:!0});var D=I(e);R(l.$$.fragment,D),i=j(D),s=E(D,"DIV",{class:!0});var q=I(s);o=E(q,"SELECT",{id:!0,class:!0,name:!0});var H=I(o);y.l(H),H.forEach(k),f=j(q),v&&v.l(q),q.forEach(k),D.forEach(k),c=j(S),d=E(S,"P",{class:!0});var r=I(d);p=J(r,a[6]),r.forEach(k),S.forEach(k),this.h()},h(){_(o,"id",se),_(o,"class",u=x(a[0]?"invalid":"valid")+" svelte-1xjn7qa"),o.disabled=n=a[3]===void 0,_(o,"name",se),a[1]===void 0&&ge(()=>a[8].call(o)),_(s,"class","select-container svelte-1xjn7qa"),_(e,"class","container svelte-1xjn7qa"),_(d,"class","text-sm text-red-600 dark:text-red-500"),fe(d,"mt-2",a[6].length>0)},m(g,S){N(g,t,S),C(t,e),U(l,e,null),C(e,i),C(e,s),C(s,o),y.m(o,null),ue(o,a[1],!0),C(s,f),v&&v.m(s,null),C(t,c),C(t,d),C(d,p),h=!0,m||(b=[A(o,"change",a[8]),A(o,"change",a[7])],m=!0)},p(g,[S]){const D={};S&1&&(D.valid=!g[0]),S&16384&&(D.$$scope={dirty:S,ctx:g}),l.$set(D),w===(w=M(g))&&y?y.p(g,S):(y.d(1),y=w(g),y&&(y.c(),y.m(o,null))),(!h||S&1&&u!==(u=x(g[0]?"invalid":"valid")+" svelte-1xjn7qa"))&&_(o,"class",u),(!h||S&8&&n!==(n=g[3]===void 0))&&(o.disabled=n),S&10&&ue(o,g[1]),g[4]?v?(v.p(g,S),S&16&&O(v,1)):(v=he(g),v.c(),O(v,1),v.m(s,null)):v&&(ke(),V(v,1,1,()=>{v=null}),Ce()),(!h||S&64)&&ae(p,g[6]),(!h||S&64)&&fe(d,"mt-2",g[6].length>0)},i(g){h||(O(l.$$.fragment,g),O(v),h=!0)},o(g){V(l.$$.fragment,g),V(v),h=!1},d(g){g&&k(t),K(l),y.d(),v&&v.d(),m=!1,ie(b)}}}const se="coffee-beans";function He(a,t,e){let{onSavedCoffeeBeans:l=void 0}=t,i,{allCoffeeBeans:s}=t,{selectedCoffeeBeansId:o}=t,{validationFailed:u=!1}=t,{showAddButton:n=!0}=t,f="";function c(){u&&e(0,u=!1)}function d(){o=we(this),e(1,o),e(3,s)}const p=()=>{i!==void 0&&i("open")};function h(m){i=m,e(5,i)}return a.$$set=m=>{"onSavedCoffeeBeans"in m&&e(2,l=m.onSavedCoffeeBeans),"allCoffeeBeans"in m&&e(3,s=m.allCoffeeBeans),"selectedCoffeeBeansId"in m&&e(1,o=m.selectedCoffeeBeansId),"validationFailed"in m&&e(0,u=m.validationFailed),"showAddButton"in m&&e(4,n=m.showAddButton)},a.$$.update=()=>{a.$$.dirty&1&&(u?e(6,f="Please select coffee beans."):e(6,f=""))},[u,o,l,s,n,i,f,c,d,p,h]}class tt extends te{constructor(t){super(),ne(this,t,He,qe,ee,{onSavedCoffeeBeans:2,allCoffeeBeans:3,selectedCoffeeBeansId:1,validationFailed:0,showAddButton:4})}}function ze(a){let t;return{c(){t=G("Timestamp:")},l(e){t=J(e,"Timestamp:")},m(e,l){N(e,t,l)},d(e){e&&k(t)}}}function Re(a){let t,e,l,i,s,o,u;return e=new le({props:{for_:oe,$$slots:{default:[ze]},$$scope:{ctx:a}}}),{c(){t=B("div"),z(e.$$.fragment),l=P(),i=B("input"),this.h()},l(n){t=E(n,"DIV",{class:!0});var f=I(t);R(e.$$.fragment,f),l=j(f),i=E(f,"INPUT",{id:!0,class:!0,name:!0,type:!0}),f.forEach(k),this.h()},h(){_(i,"id",oe),_(i,"class","bg-gray-50 border border-gray-300 text-gray-900 text-base rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"),_(i,"name",oe),_(i,"type","datetime-local"),_(t,"class","container svelte-1iivmi0")},m(n,f){N(n,t,f),U(e,t,null),C(t,l),C(t,i),L(i,a[0]),s=!0,o||(u=A(i,"input",a[1]),o=!0)},p(n,[f]){const c={};f&4&&(c.$$scope={dirty:f,ctx:n}),e.$set(c),f&1&&L(i,n[0])},i(n){s||(O(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){n&&k(t),K(e),o=!1,u()}}}const oe="timestamp";function Ue(a,t,e){let{value:l}=t;function i(){l=this.value,e(0,l)}return a.$$set=s=>{"value"in s&&e(0,l=s.value)},[l,i]}class nt extends te{constructor(t){super(),ne(this,t,Ue,Re,ee,{value:0})}}function Ke(a){let t;return{c(){t=G(a[1])},l(e){t=J(e,a[1])},m(e,l){N(e,t,l)},p(e,l){l&2&&ae(t,e[1])},d(e){e&&k(t)}}}function Ge(a){let t,e,l,i,s,o='<svg fill="none" viewBox="0 0 18 2" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-1nfrhyi"><path d="M1 1h16" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>',u,n,f,c,d='<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-1nfrhyi"><path d="M9 1v16M1 9h16" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>',p,h,m;return e=new le({props:{for_:a[2],$$slots:{default:[Ke]},$$scope:{ctx:a}}}),{c(){t=B("div"),z(e.$$.fragment),l=P(),i=B("div"),s=B("button"),s.innerHTML=o,u=P(),n=B("input"),f=P(),c=B("button"),c.innerHTML=d,this.h()},l(b){t=E(b,"DIV",{class:!0});var M=I(t);R(e.$$.fragment,M),l=j(M),i=E(M,"DIV",{class:!0});var w=I(i);s=E(w,"BUTTON",{id:!0,class:!0,type:!0,"data-svelte-h":!0}),Q(s)!=="svelte-u4t0xn"&&(s.innerHTML=o),u=j(w),n=E(w,"INPUT",{id:!0,autocomplete:!0,name:!0,type:!0,class:!0}),f=j(w),c=E(w,"BUTTON",{id:!0,class:!0,type:!0,"data-svelte-h":!0}),Q(c)!=="svelte-1ue8ray"&&(c.innerHTML=d),w.forEach(k),M.forEach(k),this.h()},h(){_(s,"id","decrement-button"),_(s,"class","minus-button svelte-1nfrhyi"),_(s,"type","button"),_(n,"id",a[2]),_(n,"autocomplete","off"),_(n,"name",a[2]),_(n,"type","text"),_(n,"class","svelte-1nfrhyi"),_(c,"id","increment-button"),_(c,"class","plus-button svelte-1nfrhyi"),_(c,"type","button"),_(i,"class","input-container svelte-1nfrhyi"),_(t,"class","container svelte-1nfrhyi")},m(b,M){N(b,t,M),U(e,t,null),C(t,l),C(t,i),C(i,s),C(i,u),C(i,n),L(n,a[0]),C(i,f),C(i,c),p=!0,h||(m=[A(s,"click",a[4]),A(n,"input",a[9]),A(n,"focusout",a[3]),A(n,"keydown",Je),A(c,"click",a[5])],h=!0)},p(b,[M]){const w={};M&4&&(w.for_=b[2]),M&2050&&(w.$$scope={dirty:M,ctx:b}),e.$set(w),(!p||M&4)&&_(n,"id",b[2]),(!p||M&4)&&_(n,"name",b[2]),M&1&&n.value!==b[0]&&L(n,b[0])},i(b){p||(O(e.$$.fragment,b),p=!0)},o(b){V(e.$$.fragment,b),p=!1},d(b){b&&k(t),K(e),h=!1,ie(m)}}}function Je(a){const t=a.key;if((t<"0"||t>"9")&&t!=="."&&t!=="Backspace"&&t!=="Delete"&&t!=="ArrowLeft"&&t!=="ArrowRight"){a.preventDefault();return}}function We(a,t,e){let{value:l=0}=t,{labelText:i=""}=t,{nameAttr:s=""}=t,{min:o=0}=t,{max:u=Number.MAX_SAFE_INTEGER}=t,{step:n=1}=t;function f(m){p(m.currentTarget.value)}function c(){p(l),l>=o+n&&e(0,l-=n)}function d(){p(l),l<=u-n&&e(0,l+=n)}function p(m){const b=Number(m);if(isNaN(b)){e(0,l=o);return}if(b>u){e(0,l=u);return}if(b<o){e(0,l=o);return}if(b%n!==0){e(0,l=Math.floor(b/n)*n);return}e(0,l=b)}function h(){l=this.value,e(0,l)}return a.$$set=m=>{"value"in m&&e(0,l=m.value),"labelText"in m&&e(1,i=m.labelText),"nameAttr"in m&&e(2,s=m.nameAttr),"min"in m&&e(6,o=m.min),"max"in m&&e(7,u=m.max),"step"in m&&e(8,n=m.step)},[l,i,s,f,c,d,o,u,n,h]}class at extends te{constructor(t){super(),ne(this,t,We,Ge,ee,{value:0,labelText:1,nameAttr:2,min:6,max:7,step:8})}}export{tt as C,at as N,nt as T,et as p};
