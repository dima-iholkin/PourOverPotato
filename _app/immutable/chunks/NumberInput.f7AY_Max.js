import{s as ee,d as X,e as Z,f as x,r as ie,p as ve,n as be}from"./scheduler.QZKnv3vM.js";import{S as te,i as ne,y as $,k as R,m as j,n as q,q as L,o as z,r as K,e as B,s as O,t as G,c as T,a as y,f as P,b as J,d as k,z as Q,x as _,g as I,h as C,E as V,A,C as pe,j as ae,B as ue,I as fe,u as ge,p as ke,J as Ce,v as Y}from"./index.CHfITGLb.js";import{e as de,u as Se,d as we}from"./PageHeadline.dJVkQ42h.js";import{r as Me,o as Be}from"./indexedDB.vUzQvWEJ.js";import{L as le,T as Te}from"./Textarea.YwjDPZYz.js";import{M as Ee}from"./Modal.tXxgHeQB.js";function Ne(n){let e;return{c(){e=G("Coffee beans name:")},l(t){e=J(t,"Coffee beans name:")},m(t,l){I(t,e,l)},d(t){t&&k(e)}}}function Ie(n){let e,t,l,i,s,o,f,a,u,c,d,h,p,m,v,M,S,N="Save",g,b,w;l=new le({props:{for_:"name",valid:!n[0],$$slots:{default:[Ne]},$$scope:{ctx:n}}});function D(r){n[18](r)}function H(r){n[19](r)}let U={id:"description",label:"Description:",name:"description",placeholder:Ae};return n[3]!==void 0&&(U.this_=n[3]),n[6]!==void 0&&(U.value=n[6]),p=new Te({props:U}),X.push(()=>$(p,"this_",D)),X.push(()=>$(p,"value",H)),p.$on("keydown",n[8]),{c(){e=B("form"),t=B("div"),R(l.$$.fragment),i=O(),s=B("input"),a=O(),u=B("p"),c=G(n[7]),d=O(),h=B("div"),R(p.$$.fragment),M=O(),S=B("button"),S.textContent=N,this.h()},l(r){e=T(r,"FORM",{class:!0});var E=y(e);t=T(E,"DIV",{class:!0});var F=y(t);j(l.$$.fragment,F),i=P(F),s=T(F,"INPUT",{id:!0,class:!0,name:!0,placeholder:!0,type:!0}),a=P(F),u=T(F,"P",{class:!0});var W=y(u);c=J(W,n[7]),W.forEach(k),F.forEach(k),d=P(E),h=T(E,"DIV",{class:!0});var re=y(h);j(p.$$.fragment,re),re.forEach(k),M=P(E),S=T(E,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Q(S)!=="svelte-j4uhei"&&(S.textContent=N),E.forEach(k),this.h()},h(){_(s,"id","name"),_(s,"class",o=x(n[0]?"input-name-validation-failed":"input-name")+" svelte-1x9a1uc"),_(s,"name","name"),_(s,"placeholder",f=n[0]?"":"Example: Rwanda Mabanza"),_(s,"type","text"),_(u,"class","mt-2 text-sm text-red-600 dark:text-red-500"),_(t,"class","mb-5"),_(h,"class","my-div mb-5 svelte-1x9a1uc"),_(S,"class","button-submit svelte-1x9a1uc"),_(S,"type","submit"),_(e,"class","mx-auto")},m(r,E){I(r,e,E),C(e,t),q(l,t,null),C(t,i),C(t,s),n[16](s),V(s,n[5]),C(t,a),C(t,u),C(u,c),C(e,d),C(e,h),q(p,h,null),C(e,M),C(e,S),n[20](e),g=!0,b||(w=[A(s,"input",n[17]),A(s,"input",n[10]),A(s,"keydown",n[9]),A(e,"submit",pe(n[11]))],b=!0)},p(r,E){const F={};E&1&&(F.valid=!r[0]),E&4194304&&(F.$$scope={dirty:E,ctx:r}),l.$set(F),(!g||E&1&&o!==(o=x(r[0]?"input-name-validation-failed":"input-name")+" svelte-1x9a1uc"))&&_(s,"class",o),(!g||E&1&&f!==(f=r[0]?"":"Example: Rwanda Mabanza"))&&_(s,"placeholder",f),E&32&&s.value!==r[5]&&V(s,r[5]),(!g||E&128)&&ae(c,r[7]);const W={};!m&&E&8&&(m=!0,W.this_=r[3],Z(()=>m=!1)),!v&&E&64&&(v=!0,W.value=r[6],Z(()=>v=!1)),p.$set(W)},i(r){g||(L(l.$$.fragment,r),L(p.$$.fragment,r),g=!0)},o(r){z(l.$$.fragment,r),z(p.$$.fragment,r),g=!1},d(r){r&&k(e),K(l),n[16](null),K(p),n[20](null),b=!1,ie(w)}}}function ye(n){let e,t,l;function i(o){n[21](o)}let s={onStateChange:n[12],title:"Add new coffee beans",$$slots:{default:[Ie]},$$scope:{ctx:n}};return n[1]!==void 0&&(s.setState=n[1]),e=new Ee({props:s}),X.push(()=>$(e,"setState",i)),{c(){R(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,f){q(e,o,f),l=!0},p(o,[f]){const a={};f&4194557&&(a.$$scope={dirty:f,ctx:o}),!t&&f&2&&(t=!0,a.setState=o[1],Z(()=>t=!1)),e.$set(a)},i(o){l||(L(e.$$.fragment,o),l=!0)},o(o){z(e.$$.fragment,o),l=!1},d(o){K(e,o)}}}const Ae="Example: Washed process. Notes: plum, cherry.";function De(n,e,t){let{onModalStateChange:l=void 0}=e,{onSavedCoffeeBeans:i=void 0}=e;const s=r=>{o(r)};let o,f,a,u,c="",d="",h=!1,p="";function m(r){r.key==="Enter"&&(r.metaKey||r.ctrlKey)&&(r.preventDefault(),u.requestSubmit())}function v(r){r.key==="Enter"&&(r.preventDefault(),a.focus())}function M(){h&&(t(0,h=!1),t(7,p=""))}async function S(){const r=Me.create({name:c,description:d});if(r==="ValidationFailed_NameMustBeAtLeast3CharsLong"){t(0,h=!0),t(7,p="Name must be at least 3 characters long.");return}const E=await Be(r);if(E==="Failure_NameAlreadyExist"){t(0,h=!0),t(7,p="Coffee beans with this name exist already.");return}alert("Coffee beans saved."),i!==void 0&&i(E),o("closed"),t(5,c=""),t(6,d="")}function N(r){l!==void 0&&l(r)}function g(r){X[r?"unshift":"push"](()=>{f=r,t(2,f)})}function b(){c=this.value,t(5,c)}function w(r){a=r,t(3,a)}function D(r){d=r,t(6,d)}function H(r){X[r?"unshift":"push"](()=>{u=r,t(4,u)})}function U(r){o=r,t(1,o)}return n.$$set=r=>{"onModalStateChange"in r&&t(13,l=r.onModalStateChange),"onSavedCoffeeBeans"in r&&t(14,i=r.onSavedCoffeeBeans)},n.$$.update=()=>{n.$$.dirty&1&&h===!1&&t(7,p="")},[h,o,f,a,u,c,d,p,m,v,M,S,N,l,i,s,g,b,w,D,H,U]}class Oe extends te{constructor(e){super(),ne(this,e,De,ye,ee,{onModalStateChange:13,onSavedCoffeeBeans:14,setModalState:15})}get setModalState(){return this.$$.ctx[15]}}function ce(n,e,t){const l=n.slice();return l[11]=e[t],l}function Pe(n){let e;return{c(){e=G("Coffee beans:")},l(t){e=J(t,"Coffee beans:")},m(t,l){I(t,e,l)},d(t){t&&k(e)}}}function Fe(n){let e,t="Loading coffee beans...";return{c(){e=B("option"),e.textContent=t,this.h()},l(l){e=T(l,"OPTION",{"data-svelte-h":!0}),Q(e)!=="svelte-1sf778f"&&(e.textContent=t),this.h()},h(){e.disabled=!0,e.selected=!0,e.__value="",V(e,e.__value)},m(l,i){I(l,e,i)},p:be,d(l){l&&k(e)}}}function Le(n){let e,t=[],l=new Map,i,s=n[1]===void 0&&n[4]===!0&&me(),o=de(n[3]);const f=a=>a[11].id;for(let a=0;a<o.length;a+=1){let u=ce(n,o,a),c=f(u);l.set(c,t[a]=_e(c,u))}return{c(){s&&s.c(),e=Y();for(let a=0;a<t.length;a+=1)t[a].c();i=Y()},l(a){s&&s.l(a),e=Y();for(let u=0;u<t.length;u+=1)t[u].l(a);i=Y()},m(a,u){s&&s.m(a,u),I(a,e,u);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(a,u);I(a,i,u)},p(a,u){a[1]===void 0&&a[4]===!0?s||(s=me(),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),u&10&&(o=de(a[3]),t=Se(t,u,f,1,a,o,l,i.parentNode,we,_e,i,ce))},d(a){a&&(k(e),k(i)),s&&s.d(a);for(let u=0;u<t.length;u+=1)t[u].d(a)}}}function me(n){let e;return{c(){e=B("option"),this.h()},l(t){e=T(t,"OPTION",{}),y(e).forEach(k),this.h()},h(){e.disabled=!0,e.selected=!0,e.__value="",V(e,e.__value)},m(t,l){I(t,e,l)},d(t){t&&k(e)}}}function _e(n,e){let t,l=e[11].name+"",i,s,o;return{key:n,first:null,c(){t=B("option"),i=G(l),this.h()},l(f){t=T(f,"OPTION",{});var a=y(t);i=J(a,l),a.forEach(k),this.h()},h(){t.selected=s=e[1]===e[11].id,t.__value=o=e[11].id,V(t,t.__value),this.first=t},m(f,a){I(f,t,a),C(t,i)},p(f,a){e=f,a&8&&l!==(l=e[11].name+"")&&ae(i,l),a&10&&s!==(s=e[1]===e[11].id)&&(t.selected=s),a&8&&o!==(o=e[11].id)&&(t.__value=o,V(t,t.__value))},d(f){f&&k(t)}}}function he(n){let e,t='<span class="material-icons md-18">add</span>',l,i,s,o,f,a;function u(d){n[10](d)}let c={onSavedCoffeeBeans:n[2]};return n[5]!==void 0&&(c.setModalState=n[5]),i=new Oe({props:c}),X.push(()=>$(i,"setModalState",u)),{c(){e=B("button"),e.innerHTML=t,l=O(),R(i.$$.fragment),this.h()},l(d){e=T(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-h0kid9"&&(e.innerHTML=t),l=P(d),j(i.$$.fragment,d),this.h()},h(){_(e,"class","button-add bg-green-500 text-white rounded-md px-4 py-2 hover:bg-green-700 transition svelte-1rvbzk")},m(d,h){I(d,e,h),I(d,l,h),q(i,d,h),o=!0,f||(a=A(e,"click",pe(n[9])),f=!0)},p(d,h){const p={};h&4&&(p.onSavedCoffeeBeans=d[2]),!s&&h&32&&(s=!0,p.setModalState=d[5],Z(()=>s=!1)),i.$set(p)},i(d){o||(L(i.$$.fragment,d),o=!0)},o(d){z(i.$$.fragment,d),o=!1},d(d){d&&(k(e),k(l)),K(i,d),f=!1,a()}}}function Ve(n){let e,t,l,i,s,o,f,a,u,c,d,h,p,m,v;l=new le({props:{for_:se,valid:!n[0],$$slots:{default:[Pe]},$$scope:{ctx:n}}});function M(b,w){return b[3]!==void 0?Le:Fe}let S=M(n),N=S(n),g=n[4]&&he(n);return{c(){e=B("div"),t=B("div"),R(l.$$.fragment),i=O(),s=B("div"),o=B("select"),N.c(),u=O(),g&&g.c(),c=O(),d=B("p"),h=G(n[6]),this.h()},l(b){e=T(b,"DIV",{});var w=y(e);t=T(w,"DIV",{class:!0});var D=y(t);j(l.$$.fragment,D),i=P(D),s=T(D,"DIV",{class:!0});var H=y(s);o=T(H,"SELECT",{id:!0,class:!0,name:!0});var U=y(o);N.l(U),U.forEach(k),u=P(H),g&&g.l(H),H.forEach(k),D.forEach(k),c=P(w),d=T(w,"P",{class:!0});var r=y(d);h=J(r,n[6]),r.forEach(k),w.forEach(k),this.h()},h(){_(o,"id",se),_(o,"class",f=x(n[0]?"invalid":"valid")+" svelte-1rvbzk"),o.disabled=a=n[3]===void 0,_(o,"name",se),n[1]===void 0&&ve(()=>n[8].call(o)),_(s,"class","select-container svelte-1rvbzk"),_(t,"class","container svelte-1rvbzk"),_(d,"class","text-sm text-red-600 dark:text-red-500"),ue(d,"mt-2",n[6].length>0)},m(b,w){I(b,e,w),C(e,t),q(l,t,null),C(t,i),C(t,s),C(s,o),N.m(o,null),fe(o,n[1],!0),C(s,u),g&&g.m(s,null),C(e,c),C(e,d),C(d,h),p=!0,m||(v=[A(o,"change",n[8]),A(o,"change",n[7])],m=!0)},p(b,[w]){const D={};w&1&&(D.valid=!b[0]),w&16384&&(D.$$scope={dirty:w,ctx:b}),l.$set(D),S===(S=M(b))&&N?N.p(b,w):(N.d(1),N=S(b),N&&(N.c(),N.m(o,null))),(!p||w&1&&f!==(f=x(b[0]?"invalid":"valid")+" svelte-1rvbzk"))&&_(o,"class",f),(!p||w&8&&a!==(a=b[3]===void 0))&&(o.disabled=a),w&10&&fe(o,b[1]),b[4]?g?(g.p(b,w),w&16&&L(g,1)):(g=he(b),g.c(),L(g,1),g.m(s,null)):g&&(ge(),z(g,1,1,()=>{g=null}),ke()),(!p||w&64)&&ae(h,b[6]),(!p||w&64)&&ue(d,"mt-2",b[6].length>0)},i(b){p||(L(l.$$.fragment,b),L(g),p=!0)},o(b){z(l.$$.fragment,b),z(g),p=!1},d(b){b&&k(e),K(l),N.d(),g&&g.d(),m=!1,ie(v)}}}const se="coffee-beans";function ze(n,e,t){let{onSavedCoffeeBeans:l=void 0}=e,i,{allCoffeeBeans:s}=e,{selectedCoffeeBeansId:o}=e,{validationFailed:f=!1}=e,{showAddButton:a=!0}=e,u="";function c(){f&&t(0,f=!1)}function d(){o=Ce(this),t(1,o),t(3,s)}const h=()=>{i!==void 0&&i("open")};function p(m){i=m,t(5,i)}return n.$$set=m=>{"onSavedCoffeeBeans"in m&&t(2,l=m.onSavedCoffeeBeans),"allCoffeeBeans"in m&&t(3,s=m.allCoffeeBeans),"selectedCoffeeBeansId"in m&&t(1,o=m.selectedCoffeeBeansId),"validationFailed"in m&&t(0,f=m.validationFailed),"showAddButton"in m&&t(4,a=m.showAddButton)},n.$$.update=()=>{n.$$.dirty&1&&(f?t(6,u="Please select coffee beans."):t(6,u=""))},[f,o,l,s,a,i,u,c,d,h,p]}class xe extends te{constructor(e){super(),ne(this,e,ze,Ve,ee,{onSavedCoffeeBeans:2,allCoffeeBeans:3,selectedCoffeeBeansId:1,validationFailed:0,showAddButton:4})}}function He(n){let e;return{c(){e=G("Timestamp:")},l(t){e=J(t,"Timestamp:")},m(t,l){I(t,e,l)},d(t){t&&k(e)}}}function Ue(n){let e,t,l,i,s,o,f;return t=new le({props:{for_:oe,$$slots:{default:[He]},$$scope:{ctx:n}}}),{c(){e=B("div"),R(t.$$.fragment),l=O(),i=B("input"),this.h()},l(a){e=T(a,"DIV",{class:!0});var u=y(e);j(t.$$.fragment,u),l=P(u),i=T(u,"INPUT",{id:!0,class:!0,name:!0,type:!0}),u.forEach(k),this.h()},h(){_(i,"id",oe),_(i,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"),_(i,"name",oe),_(i,"type","datetime-local"),_(e,"class","container svelte-1iivmi0")},m(a,u){I(a,e,u),q(t,e,null),C(e,l),C(e,i),V(i,n[0]),s=!0,o||(f=A(i,"input",n[1]),o=!0)},p(a,[u]){const c={};u&4&&(c.$$scope={dirty:u,ctx:a}),t.$set(c),u&1&&V(i,a[0])},i(a){s||(L(t.$$.fragment,a),s=!0)},o(a){z(t.$$.fragment,a),s=!1},d(a){a&&k(e),K(t),o=!1,f()}}}const oe="timestamp";function Re(n,e,t){let{value:l}=e;function i(){l=this.value,t(0,l)}return n.$$set=s=>{"value"in s&&t(0,l=s.value)},[l,i]}class $e extends te{constructor(e){super(),ne(this,e,Re,Ue,ee,{value:0})}}function je(n){let e;return{c(){e=G(n[1])},l(t){e=J(t,n[1])},m(t,l){I(t,e,l)},p(t,l){l&2&&ae(e,t[1])},d(t){t&&k(e)}}}function qe(n){let e,t,l,i,s,o='<svg fill="none" viewBox="0 0 18 2" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-1srudln"><path d="M1 1h16" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>',f,a,u,c,d='<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-1srudln"><path d="M9 1v16M1 9h16" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>',h,p,m;return t=new le({props:{for_:n[2],$$slots:{default:[je]},$$scope:{ctx:n}}}),{c(){e=B("div"),R(t.$$.fragment),l=O(),i=B("div"),s=B("button"),s.innerHTML=o,f=O(),a=B("input"),u=O(),c=B("button"),c.innerHTML=d,this.h()},l(v){e=T(v,"DIV",{class:!0});var M=y(e);j(t.$$.fragment,M),l=P(M),i=T(M,"DIV",{class:!0});var S=y(i);s=T(S,"BUTTON",{id:!0,class:!0,type:!0,"data-svelte-h":!0}),Q(s)!=="svelte-u4t0xn"&&(s.innerHTML=o),f=P(S),a=T(S,"INPUT",{id:!0,name:!0,type:!0,class:!0}),u=P(S),c=T(S,"BUTTON",{id:!0,class:!0,type:!0,"data-svelte-h":!0}),Q(c)!=="svelte-1ue8ray"&&(c.innerHTML=d),S.forEach(k),M.forEach(k),this.h()},h(){_(s,"id","decrement-button"),_(s,"class","minus-button svelte-1srudln"),_(s,"type","button"),_(a,"id",n[2]),_(a,"name",n[2]),_(a,"type","text"),_(a,"class","svelte-1srudln"),_(c,"id","increment-button"),_(c,"class","plus-button svelte-1srudln"),_(c,"type","button"),_(i,"class","input-container svelte-1srudln"),_(e,"class","container svelte-1srudln")},m(v,M){I(v,e,M),q(t,e,null),C(e,l),C(e,i),C(i,s),C(i,f),C(i,a),V(a,n[0]),C(i,u),C(i,c),h=!0,p||(m=[A(s,"click",n[4]),A(a,"input",n[9]),A(a,"focusout",n[3]),A(a,"keydown",Ke),A(c,"click",n[5])],p=!0)},p(v,[M]){const S={};M&4&&(S.for_=v[2]),M&2050&&(S.$$scope={dirty:M,ctx:v}),t.$set(S),(!h||M&4)&&_(a,"id",v[2]),(!h||M&4)&&_(a,"name",v[2]),M&1&&a.value!==v[0]&&V(a,v[0])},i(v){h||(L(t.$$.fragment,v),h=!0)},o(v){z(t.$$.fragment,v),h=!1},d(v){v&&k(e),K(t),p=!1,ie(m)}}}function Ke(n){const e=n.key;if((e<"0"||e>"9")&&e!=="."&&e!=="Backspace"&&e!=="Delete"&&e!=="ArrowLeft"&&e!=="ArrowRight"){n.preventDefault();return}}function Ge(n,e,t){let{value:l=0}=e,{labelText:i=""}=e,{nameAttr:s=""}=e,{min:o=0}=e,{max:f=Number.MAX_SAFE_INTEGER}=e,{step:a=1}=e;function u(m){h(m.currentTarget.value)}function c(){h(l),l>=o+a&&t(0,l-=a)}function d(){h(l),l<=f-a&&t(0,l+=a)}function h(m){const v=Number(m);if(isNaN(v)){t(0,l=o);return}if(v>f){t(0,l=f);return}if(v<o){t(0,l=o);return}if(v%a!==0){t(0,l=Math.floor(v/a)*a);return}t(0,l=v)}function p(){l=this.value,t(0,l)}return n.$$set=m=>{"value"in m&&t(0,l=m.value),"labelText"in m&&t(1,i=m.labelText),"nameAttr"in m&&t(2,s=m.nameAttr),"min"in m&&t(6,o=m.min),"max"in m&&t(7,f=m.max),"step"in m&&t(8,a=m.step)},[l,i,s,u,c,d,o,f,a,p]}class et extends te{constructor(e){super(),ne(this,e,Ge,qe,ee,{value:0,labelText:1,nameAttr:2,min:6,max:7,step:8})}}export{xe as C,et as N,$e as T};
