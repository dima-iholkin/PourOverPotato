import{s as ne,b as H,a as Z,f as te,r as fe,t as ve,j as ke,n as Ce}from"./scheduler.vcOl-ZmV.js";import{S as ae,i as le,v as x,k as R,m as U,n as K,q as F,o as L,r as G,e as B,s as P,t as J,c as E,a as I,f as j,b as W,d as v,z as $,y as _,g as N,h as k,C as O,A as D,B as ge,j as se,H as de,I as ce,u as we,p as Se,J as Te,w as ee}from"./index.Cssh76hr.js";import{e as me,u as Me,d as Be}from"./each.Y9tOFi6h.js";import{y as Ee,t as ye,i as Ne}from"./indexedDB.DSM7SfQo.js";import{L as oe,T as Ie}from"./Textarea.sQmVyK-K.js";import{M as Ae}from"./Modal.98NkFoyT.js";const nt={recipeTarget:"Example: 17 clicks, 15g + 260g filtered water.",recipeResult:"Example: 2m15s draw down + 15s drip.",recipeThoughts:"Example: Perfect balance. Perfect concentration. Flowery notes."};function De(n){let t;return{c(){t=J("Coffee beans name:")},l(e){t=W(e,"Coffee beans name:")},m(e,l){N(e,t,l)},d(e){e&&v(t)}}}function Pe(n){let t,e,l,i,s,o,u,a,f,m,c,p,h,d,g,T,y,M,C="Save",b,w,A;l=new oe({props:{for_:"name",valid:!n[0],$$slots:{default:[De]},$$scope:{ctx:n}}});function V(r){n[19](r)}function X(r){n[20](r)}function Q(r){n[21](r)}let Y={id:"description",label:"Description:",name:"description",placeholder:ze};return n[2]!==void 0&&(Y.resizeTextarea=n[2]),n[4]!==void 0&&(Y.this_=n[4]),n[7]!==void 0&&(Y.value=n[7]),h=new Ie({props:Y}),H.push(()=>x(h,"resizeTextarea",V)),H.push(()=>x(h,"this_",X)),H.push(()=>x(h,"value",Q)),h.$on("keydown",n[9]),{c(){t=B("form"),e=B("div"),R(l.$$.fragment),i=P(),s=B("input"),a=P(),f=B("p"),m=J(n[8]),c=P(),p=B("div"),R(h.$$.fragment),y=P(),M=B("button"),M.textContent=C,this.h()},l(r){t=E(r,"FORM",{class:!0});var S=I(t);e=E(S,"DIV",{class:!0});var z=I(e);U(l.$$.fragment,z),i=j(z),s=E(z,"INPUT",{id:!0,autocomplete:!0,class:!0,name:!0,placeholder:!0,type:!0}),a=j(z),f=E(z,"P",{class:!0});var q=I(f);m=W(q,n[8]),q.forEach(v),z.forEach(v),c=j(S),p=E(S,"DIV",{class:!0});var ue=I(p);U(h.$$.fragment,ue),ue.forEach(v),y=j(S),M=E(S,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),$(M)!=="svelte-j4uhei"&&(M.textContent=C),S.forEach(v),this.h()},h(){_(s,"id","name"),_(s,"autocomplete","off"),_(s,"class",o=te(n[0]?"input-name-validation-failed":"input-name")+" svelte-tjgl6z"),_(s,"name","name"),_(s,"placeholder",u=n[0]?"":"Example: Rwanda Mabanza"),_(s,"type","text"),_(f,"class","mt-2 text-sm text-red-600 dark:text-red-500"),_(e,"class","mb-5"),_(p,"class","my-div mb-5 svelte-tjgl6z"),_(M,"class","button-submit svelte-tjgl6z"),_(M,"type","submit"),_(t,"class","mx-auto")},m(r,S){N(r,t,S),k(t,e),K(l,e,null),k(e,i),k(e,s),n[17](s),O(s,n[6]),k(e,a),k(e,f),k(f,m),k(t,c),k(t,p),K(h,p,null),k(t,y),k(t,M),n[22](t),b=!0,w||(A=[D(s,"input",n[18]),D(s,"input",n[11]),D(s,"keydown",n[10]),D(t,"submit",ge(n[12]))],w=!0)},p(r,S){const z={};S&1&&(z.valid=!r[0]),S&16777216&&(z.$$scope={dirty:S,ctx:r}),l.$set(z),(!b||S&1&&o!==(o=te(r[0]?"input-name-validation-failed":"input-name")+" svelte-tjgl6z"))&&_(s,"class",o),(!b||S&1&&u!==(u=r[0]?"":"Example: Rwanda Mabanza"))&&_(s,"placeholder",u),S&64&&s.value!==r[6]&&O(s,r[6]),(!b||S&256)&&se(m,r[8]);const q={};!d&&S&4&&(d=!0,q.resizeTextarea=r[2],Z(()=>d=!1)),!g&&S&16&&(g=!0,q.this_=r[4],Z(()=>g=!1)),!T&&S&128&&(T=!0,q.value=r[7],Z(()=>T=!1)),h.$set(q)},i(r){b||(F(l.$$.fragment,r),F(h.$$.fragment,r),b=!0)},o(r){L(l.$$.fragment,r),L(h.$$.fragment,r),b=!1},d(r){r&&v(t),G(l),n[17](null),G(h),n[22](null),w=!1,fe(A)}}}function je(n){let t,e,l;function i(o){n[23](o)}let s={onStateChange:n[13],title:"Add new coffee beans",$$slots:{default:[Pe]},$$scope:{ctx:n}};return n[1]!==void 0&&(s.setState=n[1]),t=new Ae({props:s}),H.push(()=>x(t,"setState",i)),{c(){R(t.$$.fragment)},l(o){U(t.$$.fragment,o)},m(o,u){K(t,o,u),l=!0},p(o,[u]){const a={};u&16777725&&(a.$$scope={dirty:u,ctx:o}),!e&&u&2&&(e=!0,a.setState=o[1],Z(()=>e=!1)),t.$set(a)},i(o){l||(F(t.$$.fragment,o),l=!0)},o(o){L(t.$$.fragment,o),l=!1},d(o){G(t,o)}}}const ze="Example: Washed process. Notes: plum, cherry.";function Fe(n,t,e){let{onModalStateChange:l=void 0}=t,{onSavedCoffeeBeans:i=void 0}=t;const s=r=>{o(r)};let o,u,a,f,m,c="",p="",h=!1,d="";function g(r){r.key==="Enter"&&(r.metaKey||r.ctrlKey)&&(r.preventDefault(),m.requestSubmit())}function T(r){r.key==="Enter"&&(r.preventDefault(),f.focus())}function y(){h&&(e(0,h=!1),e(8,d=""))}async function M(){const r=Ee.create({name:c,description:p});if(r==="ValidationFailed_NameMustBeAtLeast3CharsLong"){e(0,h=!0),e(8,d="Name must be at least 3 characters long.");return}const S=await ye(r);if(S==="Failure_NameAlreadyExist"){e(0,h=!0),e(8,d="Coffee beans with this name exist already.");return}Ne(`Coffee beans "${S.name}" created.`),i!==void 0&&i(S),o("closed"),e(6,c=""),e(7,p="")}function C(r){r==="open"&&(e(6,c=""),e(7,p=""),e(8,d=""),ve().then(()=>{u()})),l!==void 0&&l(r)}function b(r){H[r?"unshift":"push"](()=>{a=r,e(3,a)})}function w(){c=this.value,e(6,c)}function A(r){u=r,e(2,u)}function V(r){f=r,e(4,f)}function X(r){p=r,e(7,p)}function Q(r){H[r?"unshift":"push"](()=>{m=r,e(5,m)})}function Y(r){o=r,e(1,o)}return n.$$set=r=>{"onModalStateChange"in r&&e(14,l=r.onModalStateChange),"onSavedCoffeeBeans"in r&&e(15,i=r.onSavedCoffeeBeans)},n.$$.update=()=>{n.$$.dirty&1&&h===!1&&e(8,d="")},[h,o,u,a,f,m,c,p,d,g,T,y,M,C,l,i,s,b,w,A,V,X,Q,Y]}class Oe extends ae{constructor(t){super(),le(this,t,Fe,je,ne,{onModalStateChange:14,onSavedCoffeeBeans:15,setModalState:16})}get setModalState(){return this.$$.ctx[16]}}function _e(n,t,e){const l=n.slice();return l[11]=t[e],l}function Le(n){let t;return{c(){t=J("Coffee beans:")},l(e){t=W(e,"Coffee beans:")},m(e,l){N(e,t,l)},d(e){e&&v(t)}}}function Ve(n){let t,e="Loading coffee beans...";return{c(){t=B("option"),t.textContent=e,this.h()},l(l){t=E(l,"OPTION",{"data-svelte-h":!0}),$(t)!=="svelte-1sf778f"&&(t.textContent=e),this.h()},h(){t.disabled=!0,t.selected=!0,t.__value="",O(t,t.__value)},m(l,i){N(l,t,i)},p:Ce,d(l){l&&v(t)}}}function qe(n){let t,e=[],l=new Map,i,s=n[1]===void 0&&n[4]===!0&&he(),o=me(n[3]);const u=a=>a[11].id;for(let a=0;a<o.length;a+=1){let f=_e(n,o,a),m=u(f);l.set(m,e[a]=pe(m,f))}return{c(){s&&s.c(),t=ee();for(let a=0;a<e.length;a+=1)e[a].c();i=ee()},l(a){s&&s.l(a),t=ee();for(let f=0;f<e.length;f+=1)e[f].l(a);i=ee()},m(a,f){s&&s.m(a,f),N(a,t,f);for(let m=0;m<e.length;m+=1)e[m]&&e[m].m(a,f);N(a,i,f)},p(a,f){a[1]===void 0&&a[4]===!0?s||(s=he(),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),f&10&&(o=me(a[3]),e=Me(e,f,u,1,a,o,l,i.parentNode,Be,pe,i,_e))},d(a){a&&(v(t),v(i)),s&&s.d(a);for(let f=0;f<e.length;f+=1)e[f].d(a)}}}function he(n){let t;return{c(){t=B("option"),this.h()},l(e){t=E(e,"OPTION",{}),I(t).forEach(v),this.h()},h(){t.disabled=!0,t.selected=!0,t.__value="",O(t,t.__value)},m(e,l){N(e,t,l)},d(e){e&&v(t)}}}function pe(n,t){let e,l=t[11].name+"",i,s,o;return{key:n,first:null,c(){e=B("option"),i=J(l),this.h()},l(u){e=E(u,"OPTION",{});var a=I(e);i=W(a,l),a.forEach(v),this.h()},h(){e.selected=s=t[1]===t[11].id,e.__value=o=t[11].id,O(e,e.__value),this.first=e},m(u,a){N(u,e,a),k(e,i)},p(u,a){t=u,a&8&&l!==(l=t[11].name+"")&&se(i,l),a&10&&s!==(s=t[1]===t[11].id)&&(e.selected=s),a&8&&o!==(o=t[11].id)&&(e.__value=o,O(e,e.__value))},d(u){u&&v(e)}}}function be(n){let t,e='<span class="material-icons md-18">add</span>',l,i,s,o,u,a;function f(c){n[10](c)}let m={onSavedCoffeeBeans:n[2]};return n[5]!==void 0&&(m.setModalState=n[5]),i=new Oe({props:m}),H.push(()=>x(i,"setModalState",f)),{c(){t=B("button"),t.innerHTML=e,l=P(),R(i.$$.fragment),this.h()},l(c){t=E(c,"BUTTON",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-h0kid9"&&(t.innerHTML=e),l=j(c),U(i.$$.fragment,c),this.h()},h(){_(t,"class","button-add bg-green-500 text-white rounded-md px-4 py-2 hover:bg-green-700 transition svelte-1xjn7qa")},m(c,p){N(c,t,p),N(c,l,p),K(i,c,p),o=!0,u||(a=D(t,"click",ge(n[9])),u=!0)},p(c,p){const h={};p&4&&(h.onSavedCoffeeBeans=c[2]),!s&&p&32&&(s=!0,h.setModalState=c[5],Z(()=>s=!1)),i.$set(h)},i(c){o||(F(i.$$.fragment,c),o=!0)},o(c){L(i.$$.fragment,c),o=!1},d(c){c&&(v(t),v(l)),G(i,c),u=!1,a()}}}function He(n){let t,e,l,i,s,o,u,a,f,m,c,p,h,d,g;l=new oe({props:{for_:ie,valid:!n[0],$$slots:{default:[Le]},$$scope:{ctx:n}}});function T(b,w){return b[3]!==void 0?qe:Ve}let y=T(n),M=y(n),C=n[4]&&be(n);return{c(){t=B("div"),e=B("div"),R(l.$$.fragment),i=P(),s=B("div"),o=B("select"),M.c(),f=P(),C&&C.c(),m=P(),c=B("p"),p=J(n[6]),this.h()},l(b){t=E(b,"DIV",{});var w=I(t);e=E(w,"DIV",{class:!0});var A=I(e);U(l.$$.fragment,A),i=j(A),s=E(A,"DIV",{class:!0});var V=I(s);o=E(V,"SELECT",{id:!0,class:!0,name:!0});var X=I(o);M.l(X),X.forEach(v),f=j(V),C&&C.l(V),V.forEach(v),A.forEach(v),m=j(w),c=E(w,"P",{class:!0});var Q=I(c);p=W(Q,n[6]),Q.forEach(v),w.forEach(v),this.h()},h(){_(o,"id",ie),_(o,"class",u=te(n[0]?"invalid":"valid")+" svelte-1xjn7qa"),o.disabled=a=n[3]===void 0,_(o,"name",ie),n[1]===void 0&&ke(()=>n[8].call(o)),_(s,"class","select-container svelte-1xjn7qa"),_(e,"class","container svelte-1xjn7qa"),_(c,"class","text-sm text-red-600 dark:text-red-500"),de(c,"mt-2",n[6].length>0)},m(b,w){N(b,t,w),k(t,e),K(l,e,null),k(e,i),k(e,s),k(s,o),M.m(o,null),ce(o,n[1],!0),k(s,f),C&&C.m(s,null),k(t,m),k(t,c),k(c,p),h=!0,d||(g=[D(o,"change",n[8]),D(o,"change",n[7])],d=!0)},p(b,[w]){const A={};w&1&&(A.valid=!b[0]),w&16384&&(A.$$scope={dirty:w,ctx:b}),l.$set(A),y===(y=T(b))&&M?M.p(b,w):(M.d(1),M=y(b),M&&(M.c(),M.m(o,null))),(!h||w&1&&u!==(u=te(b[0]?"invalid":"valid")+" svelte-1xjn7qa"))&&_(o,"class",u),(!h||w&8&&a!==(a=b[3]===void 0))&&(o.disabled=a),w&10&&ce(o,b[1]),b[4]?C?(C.p(b,w),w&16&&F(C,1)):(C=be(b),C.c(),F(C,1),C.m(s,null)):C&&(we(),L(C,1,1,()=>{C=null}),Se()),(!h||w&64)&&se(p,b[6]),(!h||w&64)&&de(c,"mt-2",b[6].length>0)},i(b){h||(F(l.$$.fragment,b),F(C),h=!0)},o(b){L(l.$$.fragment,b),L(C),h=!1},d(b){b&&v(t),G(l),M.d(),C&&C.d(),d=!1,fe(g)}}}const ie="coffee-beans";function Re(n,t,e){let{onSavedCoffeeBeans:l=void 0}=t,i,{allCoffeeBeans:s}=t,{selectedCoffeeBeansId:o}=t,{validationFailed:u=!1}=t,{showAddButton:a=!0}=t,f="";function m(){u&&e(0,u=!1)}function c(){o=Te(this),e(1,o),e(3,s)}const p=()=>{i!==void 0&&i("open")};function h(d){i=d,e(5,i)}return n.$$set=d=>{"onSavedCoffeeBeans"in d&&e(2,l=d.onSavedCoffeeBeans),"allCoffeeBeans"in d&&e(3,s=d.allCoffeeBeans),"selectedCoffeeBeansId"in d&&e(1,o=d.selectedCoffeeBeansId),"validationFailed"in d&&e(0,u=d.validationFailed),"showAddButton"in d&&e(4,a=d.showAddButton)},n.$$.update=()=>{n.$$.dirty&1&&(u?e(6,f="Please select coffee beans."):e(6,f=""))},[u,o,l,s,a,i,f,m,c,p,h]}class at extends ae{constructor(t){super(),le(this,t,Re,He,ne,{onSavedCoffeeBeans:2,allCoffeeBeans:3,selectedCoffeeBeansId:1,validationFailed:0,showAddButton:4})}}function Ue(n){let t;return{c(){t=J("Timestamp:")},l(e){t=W(e,"Timestamp:")},m(e,l){N(e,t,l)},d(e){e&&v(t)}}}function Ke(n){let t,e,l,i,s,o,u;return e=new oe({props:{for_:re,$$slots:{default:[Ue]},$$scope:{ctx:n}}}),{c(){t=B("div"),R(e.$$.fragment),l=P(),i=B("input"),this.h()},l(a){t=E(a,"DIV",{class:!0});var f=I(t);U(e.$$.fragment,f),l=j(f),i=E(f,"INPUT",{id:!0,class:!0,name:!0,type:!0}),f.forEach(v),this.h()},h(){_(i,"id",re),_(i,"class","bg-gray-50 border border-gray-300 text-gray-900 text-base rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"),_(i,"name",re),_(i,"type","datetime-local"),_(t,"class","container svelte-1iivmi0")},m(a,f){N(a,t,f),K(e,t,null),k(t,l),k(t,i),O(i,n[0]),s=!0,o||(u=D(i,"input",n[1]),o=!0)},p(a,[f]){const m={};f&4&&(m.$$scope={dirty:f,ctx:a}),e.$set(m),f&1&&O(i,a[0])},i(a){s||(F(e.$$.fragment,a),s=!0)},o(a){L(e.$$.fragment,a),s=!1},d(a){a&&v(t),G(e),o=!1,u()}}}const re="timestamp";function Ge(n,t,e){let{value:l}=t;function i(){l=this.value,e(0,l)}return n.$$set=s=>{"value"in s&&e(0,l=s.value)},[l,i]}class lt extends ae{constructor(t){super(),le(this,t,Ge,Ke,ne,{value:0})}}function Je(n){let t;return{c(){t=J(n[1])},l(e){t=W(e,n[1])},m(e,l){N(e,t,l)},p(e,l){l&2&&se(t,e[1])},d(e){e&&v(t)}}}function We(n){let t,e,l,i,s,o='<svg fill="none" viewBox="0 0 18 2" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-1nfrhyi"><path d="M1 1h16" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>',u,a,f,m,c='<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-1nfrhyi"><path d="M9 1v16M1 9h16" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>',p,h,d;return e=new oe({props:{for_:n[2],$$slots:{default:[Je]},$$scope:{ctx:n}}}),{c(){t=B("div"),R(e.$$.fragment),l=P(),i=B("div"),s=B("button"),s.innerHTML=o,u=P(),a=B("input"),f=P(),m=B("button"),m.innerHTML=c,this.h()},l(g){t=E(g,"DIV",{class:!0});var T=I(t);U(e.$$.fragment,T),l=j(T),i=E(T,"DIV",{class:!0});var y=I(i);s=E(y,"BUTTON",{id:!0,class:!0,type:!0,"data-svelte-h":!0}),$(s)!=="svelte-u4t0xn"&&(s.innerHTML=o),u=j(y),a=E(y,"INPUT",{id:!0,autocomplete:!0,name:!0,type:!0,class:!0}),f=j(y),m=E(y,"BUTTON",{id:!0,class:!0,type:!0,"data-svelte-h":!0}),$(m)!=="svelte-1ue8ray"&&(m.innerHTML=c),y.forEach(v),T.forEach(v),this.h()},h(){_(s,"id","decrement-button"),_(s,"class","minus-button svelte-1nfrhyi"),_(s,"type","button"),_(a,"id",n[2]),_(a,"autocomplete","off"),_(a,"name",n[2]),_(a,"type","text"),_(a,"class","svelte-1nfrhyi"),_(m,"id","increment-button"),_(m,"class","plus-button svelte-1nfrhyi"),_(m,"type","button"),_(i,"class","input-container svelte-1nfrhyi"),_(t,"class","container svelte-1nfrhyi")},m(g,T){N(g,t,T),K(e,t,null),k(t,l),k(t,i),k(i,s),k(i,u),k(i,a),O(a,n[0]),k(i,f),k(i,m),p=!0,h||(d=[D(s,"click",n[4]),D(a,"input",n[9]),D(a,"focusout",n[3]),D(a,"keydown",Xe),D(m,"click",n[5])],h=!0)},p(g,[T]){const y={};T&4&&(y.for_=g[2]),T&2050&&(y.$$scope={dirty:T,ctx:g}),e.$set(y),(!p||T&4)&&_(a,"id",g[2]),(!p||T&4)&&_(a,"name",g[2]),T&1&&a.value!==g[0]&&O(a,g[0])},i(g){p||(F(e.$$.fragment,g),p=!0)},o(g){L(e.$$.fragment,g),p=!1},d(g){g&&v(t),G(e),h=!1,fe(d)}}}function Xe(n){const t=n.key;if((t<"0"||t>"9")&&t!=="."&&t!=="Backspace"&&t!=="Delete"&&t!=="ArrowLeft"&&t!=="ArrowRight"){n.preventDefault();return}}function Qe(n,t,e){let{value:l=0}=t,{labelText:i=""}=t,{nameAttr:s=""}=t,{min:o=0}=t,{max:u=Number.MAX_SAFE_INTEGER}=t,{step:a=1}=t;function f(d){p(d.currentTarget.value)}function m(){p(l),l>=o+a&&e(0,l-=a)}function c(){p(l),l<=u-a&&e(0,l+=a)}function p(d){const g=Number(d);if(isNaN(g)){e(0,l=o);return}if(g>u){e(0,l=u);return}if(g<o){e(0,l=o);return}if(g%a!==0){e(0,l=Math.floor(g/a)*a);return}e(0,l=g)}function h(){l=this.value,e(0,l)}return n.$$set=d=>{"value"in d&&e(0,l=d.value),"labelText"in d&&e(1,i=d.labelText),"nameAttr"in d&&e(2,s=d.nameAttr),"min"in d&&e(6,o=d.min),"max"in d&&e(7,u=d.max),"step"in d&&e(8,a=d.step)},[l,i,s,f,m,c,o,u,a,h]}class st extends ae{constructor(t){super(),le(this,t,Qe,We,ne,{value:0,labelText:1,nameAttr:2,min:6,max:7,step:8})}}export{at as C,st as N,lt as T,nt as p};
