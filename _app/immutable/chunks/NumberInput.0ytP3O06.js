import{s as ee,d as X,e as Z,f as x,r as ie,k as ve,n as be}from"./scheduler.c6D-u3vw.js";import{S as te,i as ne,y as $,k as H,m as R,n as U,q as j,o as V,r as K,e as B,s as P,t as G,c as E,a as I,f as F,b as J,d as k,z as Q,x as _,g as N,h as C,E as L,A,C as pe,j as ae,B as fe,I as ue,u as ge,p as ke,J as Ce,v as Y}from"./index.uR5eFXUy.js";import{e as de,u as we,d as Se}from"./each.SsXDy5GB.js";import{u as Me,r as Te,h as Be}from"./indexedDB.Q_ZGv_fi.js";import{L as le,T as Ee}from"./Textarea.pD-sxuTV.js";import{M as ye}from"./Modal.L2TqD2RN.js";const $e={recipeTarget:"Example: 17 clicks, 15g + 260g filtered water.",recipeResult:"Example: 2m15s draw down + 15s drip.",recipeThoughts:"Example: Perfect balance. Perfect concentration. Flowery notes."};function Ne(n){let e;return{c(){e=G("Coffee beans name:")},l(t){e=J(t,"Coffee beans name:")},m(t,l){N(t,e,l)},d(t){t&&k(e)}}}function Ie(n){let e,t,l,i,s,o,u,a,f,c,d,h,p,m,v,M,w,y="Save",g,b,S;l=new le({props:{for_:"name",valid:!n[0],$$slots:{default:[Ne]},$$scope:{ctx:n}}});function D(r){n[18](r)}function q(r){n[19](r)}let z={id:"description",label:"Description:",name:"description",placeholder:De};return n[3]!==void 0&&(z.this_=n[3]),n[6]!==void 0&&(z.value=n[6]),p=new Ee({props:z}),X.push(()=>$(p,"this_",D)),X.push(()=>$(p,"value",q)),p.$on("keydown",n[8]),{c(){e=B("form"),t=B("div"),H(l.$$.fragment),i=P(),s=B("input"),a=P(),f=B("p"),c=G(n[7]),d=P(),h=B("div"),H(p.$$.fragment),M=P(),w=B("button"),w.textContent=y,this.h()},l(r){e=E(r,"FORM",{class:!0});var T=I(e);t=E(T,"DIV",{class:!0});var O=I(t);R(l.$$.fragment,O),i=F(O),s=E(O,"INPUT",{id:!0,autocomplete:!0,class:!0,name:!0,placeholder:!0,type:!0}),a=F(O),f=E(O,"P",{class:!0});var W=I(f);c=J(W,n[7]),W.forEach(k),O.forEach(k),d=F(T),h=E(T,"DIV",{class:!0});var re=I(h);R(p.$$.fragment,re),re.forEach(k),M=F(T),w=E(T,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Q(w)!=="svelte-j4uhei"&&(w.textContent=y),T.forEach(k),this.h()},h(){_(s,"id","name"),_(s,"autocomplete","off"),_(s,"class",o=x(n[0]?"input-name-validation-failed":"input-name")+" svelte-tjgl6z"),_(s,"name","name"),_(s,"placeholder",u=n[0]?"":"Example: Rwanda Mabanza"),_(s,"type","text"),_(f,"class","mt-2 text-sm text-red-600 dark:text-red-500"),_(t,"class","mb-5"),_(h,"class","my-div mb-5 svelte-tjgl6z"),_(w,"class","button-submit svelte-tjgl6z"),_(w,"type","submit"),_(e,"class","mx-auto")},m(r,T){N(r,e,T),C(e,t),U(l,t,null),C(t,i),C(t,s),n[16](s),L(s,n[5]),C(t,a),C(t,f),C(f,c),C(e,d),C(e,h),U(p,h,null),C(e,M),C(e,w),n[20](e),g=!0,b||(S=[A(s,"input",n[17]),A(s,"input",n[10]),A(s,"keydown",n[9]),A(e,"submit",pe(n[11]))],b=!0)},p(r,T){const O={};T&1&&(O.valid=!r[0]),T&4194304&&(O.$$scope={dirty:T,ctx:r}),l.$set(O),(!g||T&1&&o!==(o=x(r[0]?"input-name-validation-failed":"input-name")+" svelte-tjgl6z"))&&_(s,"class",o),(!g||T&1&&u!==(u=r[0]?"":"Example: Rwanda Mabanza"))&&_(s,"placeholder",u),T&32&&s.value!==r[5]&&L(s,r[5]),(!g||T&128)&&ae(c,r[7]);const W={};!m&&T&8&&(m=!0,W.this_=r[3],Z(()=>m=!1)),!v&&T&64&&(v=!0,W.value=r[6],Z(()=>v=!1)),p.$set(W)},i(r){g||(j(l.$$.fragment,r),j(p.$$.fragment,r),g=!0)},o(r){V(l.$$.fragment,r),V(p.$$.fragment,r),g=!1},d(r){r&&k(e),K(l),n[16](null),K(p),n[20](null),b=!1,ie(S)}}}function Ae(n){let e,t,l;function i(o){n[21](o)}let s={onStateChange:n[12],title:"Add new coffee beans",$$slots:{default:[Ie]},$$scope:{ctx:n}};return n[1]!==void 0&&(s.setState=n[1]),e=new ye({props:s}),X.push(()=>$(e,"setState",i)),{c(){H(e.$$.fragment)},l(o){R(e.$$.fragment,o)},m(o,u){U(e,o,u),l=!0},p(o,[u]){const a={};u&4194557&&(a.$$scope={dirty:u,ctx:o}),!t&&u&2&&(t=!0,a.setState=o[1],Z(()=>t=!1)),e.$set(a)},i(o){l||(j(e.$$.fragment,o),l=!0)},o(o){V(e.$$.fragment,o),l=!1},d(o){K(e,o)}}}const De="Example: Washed process. Notes: plum, cherry.";function Pe(n,e,t){let{onModalStateChange:l=void 0}=e,{onSavedCoffeeBeans:i=void 0}=e;const s=r=>{o(r)};let o,u,a,f,c="",d="",h=!1,p="";function m(r){r.key==="Enter"&&(r.metaKey||r.ctrlKey)&&(r.preventDefault(),f.requestSubmit())}function v(r){r.key==="Enter"&&(r.preventDefault(),a.focus())}function M(){h&&(t(0,h=!1),t(7,p=""))}async function w(){const r=Me.create({name:c,description:d});if(r==="ValidationFailed_NameMustBeAtLeast3CharsLong"){t(0,h=!0),t(7,p="Name must be at least 3 characters long.");return}const T=await Te(r);if(T==="Failure_NameAlreadyExist"){t(0,h=!0),t(7,p="Coffee beans with this name exist already.");return}Be(`Coffee beans "${T.name}" created.`),i!==void 0&&i(T),o("closed"),t(5,c=""),t(6,d="")}function y(r){l!==void 0&&l(r)}function g(r){X[r?"unshift":"push"](()=>{u=r,t(2,u)})}function b(){c=this.value,t(5,c)}function S(r){a=r,t(3,a)}function D(r){d=r,t(6,d)}function q(r){X[r?"unshift":"push"](()=>{f=r,t(4,f)})}function z(r){o=r,t(1,o)}return n.$$set=r=>{"onModalStateChange"in r&&t(13,l=r.onModalStateChange),"onSavedCoffeeBeans"in r&&t(14,i=r.onSavedCoffeeBeans)},n.$$.update=()=>{n.$$.dirty&1&&h===!1&&t(7,p="")},[h,o,u,a,f,c,d,p,m,v,M,w,y,l,i,s,g,b,S,D,q,z]}class Fe extends te{constructor(e){super(),ne(this,e,Pe,Ae,ee,{onModalStateChange:13,onSavedCoffeeBeans:14,setModalState:15})}get setModalState(){return this.$$.ctx[15]}}function ce(n,e,t){const l=n.slice();return l[11]=e[t],l}function Oe(n){let e;return{c(){e=G("Coffee beans:")},l(t){e=J(t,"Coffee beans:")},m(t,l){N(t,e,l)},d(t){t&&k(e)}}}function je(n){let e,t="Loading coffee beans...";return{c(){e=B("option"),e.textContent=t,this.h()},l(l){e=E(l,"OPTION",{"data-svelte-h":!0}),Q(e)!=="svelte-1sf778f"&&(e.textContent=t),this.h()},h(){e.disabled=!0,e.selected=!0,e.__value="",L(e,e.__value)},m(l,i){N(l,e,i)},p:be,d(l){l&&k(e)}}}function Le(n){let e,t=[],l=new Map,i,s=n[1]===void 0&&n[4]===!0&&me(),o=de(n[3]);const u=a=>a[11].id;for(let a=0;a<o.length;a+=1){let f=ce(n,o,a),c=u(f);l.set(c,t[a]=_e(c,f))}return{c(){s&&s.c(),e=Y();for(let a=0;a<t.length;a+=1)t[a].c();i=Y()},l(a){s&&s.l(a),e=Y();for(let f=0;f<t.length;f+=1)t[f].l(a);i=Y()},m(a,f){s&&s.m(a,f),N(a,e,f);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(a,f);N(a,i,f)},p(a,f){a[1]===void 0&&a[4]===!0?s||(s=me(),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),f&10&&(o=de(a[3]),t=we(t,f,u,1,a,o,l,i.parentNode,Se,_e,i,ce))},d(a){a&&(k(e),k(i)),s&&s.d(a);for(let f=0;f<t.length;f+=1)t[f].d(a)}}}function me(n){let e;return{c(){e=B("option"),this.h()},l(t){e=E(t,"OPTION",{}),I(e).forEach(k),this.h()},h(){e.disabled=!0,e.selected=!0,e.__value="",L(e,e.__value)},m(t,l){N(t,e,l)},d(t){t&&k(e)}}}function _e(n,e){let t,l=e[11].name+"",i,s,o;return{key:n,first:null,c(){t=B("option"),i=G(l),this.h()},l(u){t=E(u,"OPTION",{});var a=I(t);i=J(a,l),a.forEach(k),this.h()},h(){t.selected=s=e[1]===e[11].id,t.__value=o=e[11].id,L(t,t.__value),this.first=t},m(u,a){N(u,t,a),C(t,i)},p(u,a){e=u,a&8&&l!==(l=e[11].name+"")&&ae(i,l),a&10&&s!==(s=e[1]===e[11].id)&&(t.selected=s),a&8&&o!==(o=e[11].id)&&(t.__value=o,L(t,t.__value))},d(u){u&&k(t)}}}function he(n){let e,t='<span class="material-icons md-18">add</span>',l,i,s,o,u,a;function f(d){n[10](d)}let c={onSavedCoffeeBeans:n[2]};return n[5]!==void 0&&(c.setModalState=n[5]),i=new Fe({props:c}),X.push(()=>$(i,"setModalState",f)),{c(){e=B("button"),e.innerHTML=t,l=P(),H(i.$$.fragment),this.h()},l(d){e=E(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-h0kid9"&&(e.innerHTML=t),l=F(d),R(i.$$.fragment,d),this.h()},h(){_(e,"class","button-add bg-green-500 text-white rounded-md px-4 py-2 hover:bg-green-700 transition svelte-1xjn7qa")},m(d,h){N(d,e,h),N(d,l,h),U(i,d,h),o=!0,u||(a=A(e,"click",pe(n[9])),u=!0)},p(d,h){const p={};h&4&&(p.onSavedCoffeeBeans=d[2]),!s&&h&32&&(s=!0,p.setModalState=d[5],Z(()=>s=!1)),i.$set(p)},i(d){o||(j(i.$$.fragment,d),o=!0)},o(d){V(i.$$.fragment,d),o=!1},d(d){d&&(k(e),k(l)),K(i,d),u=!1,a()}}}function Ve(n){let e,t,l,i,s,o,u,a,f,c,d,h,p,m,v;l=new le({props:{for_:se,valid:!n[0],$$slots:{default:[Oe]},$$scope:{ctx:n}}});function M(b,S){return b[3]!==void 0?Le:je}let w=M(n),y=w(n),g=n[4]&&he(n);return{c(){e=B("div"),t=B("div"),H(l.$$.fragment),i=P(),s=B("div"),o=B("select"),y.c(),f=P(),g&&g.c(),c=P(),d=B("p"),h=G(n[6]),this.h()},l(b){e=E(b,"DIV",{});var S=I(e);t=E(S,"DIV",{class:!0});var D=I(t);R(l.$$.fragment,D),i=F(D),s=E(D,"DIV",{class:!0});var q=I(s);o=E(q,"SELECT",{id:!0,class:!0,name:!0});var z=I(o);y.l(z),z.forEach(k),f=F(q),g&&g.l(q),q.forEach(k),D.forEach(k),c=F(S),d=E(S,"P",{class:!0});var r=I(d);h=J(r,n[6]),r.forEach(k),S.forEach(k),this.h()},h(){_(o,"id",se),_(o,"class",u=x(n[0]?"invalid":"valid")+" svelte-1xjn7qa"),o.disabled=a=n[3]===void 0,_(o,"name",se),n[1]===void 0&&ve(()=>n[8].call(o)),_(s,"class","select-container svelte-1xjn7qa"),_(t,"class","container svelte-1xjn7qa"),_(d,"class","text-sm text-red-600 dark:text-red-500"),fe(d,"mt-2",n[6].length>0)},m(b,S){N(b,e,S),C(e,t),U(l,t,null),C(t,i),C(t,s),C(s,o),y.m(o,null),ue(o,n[1],!0),C(s,f),g&&g.m(s,null),C(e,c),C(e,d),C(d,h),p=!0,m||(v=[A(o,"change",n[8]),A(o,"change",n[7])],m=!0)},p(b,[S]){const D={};S&1&&(D.valid=!b[0]),S&16384&&(D.$$scope={dirty:S,ctx:b}),l.$set(D),w===(w=M(b))&&y?y.p(b,S):(y.d(1),y=w(b),y&&(y.c(),y.m(o,null))),(!p||S&1&&u!==(u=x(b[0]?"invalid":"valid")+" svelte-1xjn7qa"))&&_(o,"class",u),(!p||S&8&&a!==(a=b[3]===void 0))&&(o.disabled=a),S&10&&ue(o,b[1]),b[4]?g?(g.p(b,S),S&16&&j(g,1)):(g=he(b),g.c(),j(g,1),g.m(s,null)):g&&(ge(),V(g,1,1,()=>{g=null}),ke()),(!p||S&64)&&ae(h,b[6]),(!p||S&64)&&fe(d,"mt-2",b[6].length>0)},i(b){p||(j(l.$$.fragment,b),j(g),p=!0)},o(b){V(l.$$.fragment,b),V(g),p=!1},d(b){b&&k(e),K(l),y.d(),g&&g.d(),m=!1,ie(v)}}}const se="coffee-beans";function qe(n,e,t){let{onSavedCoffeeBeans:l=void 0}=e,i,{allCoffeeBeans:s}=e,{selectedCoffeeBeansId:o}=e,{validationFailed:u=!1}=e,{showAddButton:a=!0}=e,f="";function c(){u&&t(0,u=!1)}function d(){o=Ce(this),t(1,o),t(3,s)}const h=()=>{i!==void 0&&i("open")};function p(m){i=m,t(5,i)}return n.$$set=m=>{"onSavedCoffeeBeans"in m&&t(2,l=m.onSavedCoffeeBeans),"allCoffeeBeans"in m&&t(3,s=m.allCoffeeBeans),"selectedCoffeeBeansId"in m&&t(1,o=m.selectedCoffeeBeansId),"validationFailed"in m&&t(0,u=m.validationFailed),"showAddButton"in m&&t(4,a=m.showAddButton)},n.$$.update=()=>{n.$$.dirty&1&&(u?t(6,f="Please select coffee beans."):t(6,f=""))},[u,o,l,s,a,i,f,c,d,h,p]}class et extends te{constructor(e){super(),ne(this,e,qe,Ve,ee,{onSavedCoffeeBeans:2,allCoffeeBeans:3,selectedCoffeeBeansId:1,validationFailed:0,showAddButton:4})}}function ze(n){let e;return{c(){e=G("Timestamp:")},l(t){e=J(t,"Timestamp:")},m(t,l){N(t,e,l)},d(t){t&&k(e)}}}function He(n){let e,t,l,i,s,o,u;return t=new le({props:{for_:oe,$$slots:{default:[ze]},$$scope:{ctx:n}}}),{c(){e=B("div"),H(t.$$.fragment),l=P(),i=B("input"),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=I(e);R(t.$$.fragment,f),l=F(f),i=E(f,"INPUT",{id:!0,class:!0,name:!0,type:!0}),f.forEach(k),this.h()},h(){_(i,"id",oe),_(i,"class","bg-gray-50 border border-gray-300 text-gray-900 text-base rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"),_(i,"name",oe),_(i,"type","datetime-local"),_(e,"class","container svelte-1iivmi0")},m(a,f){N(a,e,f),U(t,e,null),C(e,l),C(e,i),L(i,n[0]),s=!0,o||(u=A(i,"input",n[1]),o=!0)},p(a,[f]){const c={};f&4&&(c.$$scope={dirty:f,ctx:a}),t.$set(c),f&1&&L(i,a[0])},i(a){s||(j(t.$$.fragment,a),s=!0)},o(a){V(t.$$.fragment,a),s=!1},d(a){a&&k(e),K(t),o=!1,u()}}}const oe="timestamp";function Re(n,e,t){let{value:l}=e;function i(){l=this.value,t(0,l)}return n.$$set=s=>{"value"in s&&t(0,l=s.value)},[l,i]}class tt extends te{constructor(e){super(),ne(this,e,Re,He,ee,{value:0})}}function Ue(n){let e;return{c(){e=G(n[1])},l(t){e=J(t,n[1])},m(t,l){N(t,e,l)},p(t,l){l&2&&ae(e,t[1])},d(t){t&&k(e)}}}function Ke(n){let e,t,l,i,s,o='<svg fill="none" viewBox="0 0 18 2" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-1nfrhyi"><path d="M1 1h16" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>',u,a,f,c,d='<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-1nfrhyi"><path d="M9 1v16M1 9h16" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>',h,p,m;return t=new le({props:{for_:n[2],$$slots:{default:[Ue]},$$scope:{ctx:n}}}),{c(){e=B("div"),H(t.$$.fragment),l=P(),i=B("div"),s=B("button"),s.innerHTML=o,u=P(),a=B("input"),f=P(),c=B("button"),c.innerHTML=d,this.h()},l(v){e=E(v,"DIV",{class:!0});var M=I(e);R(t.$$.fragment,M),l=F(M),i=E(M,"DIV",{class:!0});var w=I(i);s=E(w,"BUTTON",{id:!0,class:!0,type:!0,"data-svelte-h":!0}),Q(s)!=="svelte-u4t0xn"&&(s.innerHTML=o),u=F(w),a=E(w,"INPUT",{id:!0,autocomplete:!0,name:!0,type:!0,class:!0}),f=F(w),c=E(w,"BUTTON",{id:!0,class:!0,type:!0,"data-svelte-h":!0}),Q(c)!=="svelte-1ue8ray"&&(c.innerHTML=d),w.forEach(k),M.forEach(k),this.h()},h(){_(s,"id","decrement-button"),_(s,"class","minus-button svelte-1nfrhyi"),_(s,"type","button"),_(a,"id",n[2]),_(a,"autocomplete","off"),_(a,"name",n[2]),_(a,"type","text"),_(a,"class","svelte-1nfrhyi"),_(c,"id","increment-button"),_(c,"class","plus-button svelte-1nfrhyi"),_(c,"type","button"),_(i,"class","input-container svelte-1nfrhyi"),_(e,"class","container svelte-1nfrhyi")},m(v,M){N(v,e,M),U(t,e,null),C(e,l),C(e,i),C(i,s),C(i,u),C(i,a),L(a,n[0]),C(i,f),C(i,c),h=!0,p||(m=[A(s,"click",n[4]),A(a,"input",n[9]),A(a,"focusout",n[3]),A(a,"keydown",Ge),A(c,"click",n[5])],p=!0)},p(v,[M]){const w={};M&4&&(w.for_=v[2]),M&2050&&(w.$$scope={dirty:M,ctx:v}),t.$set(w),(!h||M&4)&&_(a,"id",v[2]),(!h||M&4)&&_(a,"name",v[2]),M&1&&a.value!==v[0]&&L(a,v[0])},i(v){h||(j(t.$$.fragment,v),h=!0)},o(v){V(t.$$.fragment,v),h=!1},d(v){v&&k(e),K(t),p=!1,ie(m)}}}function Ge(n){const e=n.key;if((e<"0"||e>"9")&&e!=="."&&e!=="Backspace"&&e!=="Delete"&&e!=="ArrowLeft"&&e!=="ArrowRight"){n.preventDefault();return}}function Je(n,e,t){let{value:l=0}=e,{labelText:i=""}=e,{nameAttr:s=""}=e,{min:o=0}=e,{max:u=Number.MAX_SAFE_INTEGER}=e,{step:a=1}=e;function f(m){h(m.currentTarget.value)}function c(){h(l),l>=o+a&&t(0,l-=a)}function d(){h(l),l<=u-a&&t(0,l+=a)}function h(m){const v=Number(m);if(isNaN(v)){t(0,l=o);return}if(v>u){t(0,l=u);return}if(v<o){t(0,l=o);return}if(v%a!==0){t(0,l=Math.floor(v/a)*a);return}t(0,l=v)}function p(){l=this.value,t(0,l)}return n.$$set=m=>{"value"in m&&t(0,l=m.value),"labelText"in m&&t(1,i=m.labelText),"nameAttr"in m&&t(2,s=m.nameAttr),"min"in m&&t(6,o=m.min),"max"in m&&t(7,u=m.max),"step"in m&&t(8,a=m.step)},[l,i,s,f,c,d,o,u,a,p]}class nt extends te{constructor(e){super(),ne(this,e,Je,Ke,ee,{value:0,labelText:1,nameAttr:2,min:6,max:7,step:8})}}export{et as C,nt as N,tt as T,$e as p};
